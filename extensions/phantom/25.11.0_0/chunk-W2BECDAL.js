import{b as H,d as V,f as P,h as M,i as w,j as q}from"./chunk-T3JEJCOG.js";import{S as T,V as k,Yc as I,gb as E,ie as S,nb as v,ob as Q}from"./chunk-XKUMOCJO.js";import{a as C}from"./chunk-FI5JCZQR.js";import{A as b,ka as h}from"./chunk-RISGBUNP.js";import{x as d}from"./chunk-HTY4DAML.js";import{h as t,n as o}from"./chunk-3KENBVE7.js";t();o();t();o();var O=new P("Failed to get FiatRampTokens"),N=async(a,s,r)=>{try{let e=await T.api().headers(a).bearer(r).post("/fiat_ramp/v2/onramp/tokens",s);if(!k(e))throw O;return e.data}catch{throw O}};t();o();var x=a=>a.sort((s,r)=>E.compareNetworkID(s.token.caip19.chainId,r.token.caip19.chainId));var z=d({days:7}),J=d({hours:1}),D=(a,s,r,e=!0,n)=>{let{data:m}=S(),p=Array.from(new Set(m?.addresses?.map(i=>i.networkID))),u=Array.from(new Set(m?.addresses?.map(i=>i.addressType))),f={chainIDs:p},F={"x-client-platform":a,"x-client-app-version":s,"x-client-locale":r},{data:l}=I(),_=l?.userID,g=l?.accessToken;return h({queryKey:M.fiatRampTokens(F,f,_),queryFn:()=>N(F,f,g),gcTime:z,staleTime:J,enabled:e&&p.length>0,select:i=>{let y={...i,groups:i.groups.map(c=>({...c,tokens:x(c.tokens.filter(A=>A.addressType?u.includes(A.addressType):!0))}))};return n?n(y):y}})};t();o();t();o();var K=a=>{let s=a?.groups.flatMap(r=>r.tokens)??[];return x(s)};var L=(a,s,r,e=!0)=>D(a,s,r,e,K);t();o();t();o();var U=({clientPlatform:a,appVersion:s,locale:r,caip19:e,addressType:n})=>{let{data:m,isLoading:p,isError:u,isFetched:f}=S(),{data:F=[],isLoading:l,isError:_,isFetched:g}=L(a,s,r),i=F.find(c=>n&&E.getChainName(v(e).chainId)===E.bitcoin.name?Q(c.token.caip19)===e&&"addressType"in c&&c.addressType===n:Q(c.token.caip19)===e),y=m?.addresses.find(c=>i?.addressType?c.addressType===i.addressType&&c.networkID===i?.token.caip19.chainId:c.networkID===i?.token.caip19.chainId)?.address??"";return i?.token.caip19.chainId&&E.isEVMNetworkID(i.token.caip19.chainId)&&(y=y.toLowerCase()),{tokenToBuy:i,destinationAddress:y,quickSelectDenominations:i?.quickSelectDenominations||V,isLoading:p||l,isError:u||_,isFetched:f&&g}};var Z=({addressType:a,caip19:s,amount:r,context:e,redirectURL:n,captureAnalyticsEvent:m,navigateToFiatRampForm:p,onClose:u})=>{let{setState:f}=q(),{tokenToBuy:F,destinationAddress:l,quickSelectDenominations:_,isLoading:g,isError:i,isFetched:y}=U({clientPlatform:"web",appVersion:b,locale:C.language,caip19:s,addressType:a}),c=!!F&&!!l;return{canBuy:c,openBuy:()=>{c&&(f({...w,onClose:u??(()=>{}),ownerPublicKey:l,fungible:F.token,quickSelectDenominations:_,purchaseAmount:r??"",context:e??"modal",redirectURL:n}),m&&m(),p&&p(F.token,l))},destinationAddress:l,token:F,isLoading:g,isError:i,isFetched:y}};t();o();t();o();t();o();var j=new P("Failed to get FiatRampPaymentMethods"),B=async(a,s,r)=>{try{let e=await T.api().headers(a).bearer(r).post("/fiat_ramp/v2/onramp/payment_methods",s);if(!k(e))throw j;return e.data}catch{throw j}};var $=d({days:7}),ee=d({hours:1}),te=(a,s,r,e)=>{let n={"x-client-platform":a,"x-client-app-version":s,"x-client-locale":r},{data:m}=I(),p=m?.userID,u=m?.accessToken;return h({queryKey:M.fiatRampPaymentMethods(n,e,p),queryFn:()=>B(n,e,u),gcTime:$,staleTime:ee})};t();o();t();o();var W=new P("Failed to get ramp status"),Y=async(a,s,r)=>{try{let e=await T.api().headers(a).bearer(r).post("/fiat_ramp/v2/onramp/event_status",s);if(!k(e))throw W;return e.data}catch{throw W}};var oe=d({seconds:H}),ae=d({hours:1}),se=(a,s,r,e)=>{let n={"x-client-platform":a,"x-client-app-version":s,"x-client-locale":r},{data:m}=I(),p=m?.userID,u=m?.accessToken;return h({enabled:!!e,queryKey:M.fiatRampStatus(n,e,p),queryFn:()=>Y(n,{sessionId:e},u),gcTime:ae,staleTime:oe,refetchInterval:1e4})};t();o();t();o();t();o();var G=new P("Failed to get FiatRampRecommendedQuote"),X=async(a,s,r)=>{try{let e=await T.api().headers(a).bearer(r).post("/fiat_ramp/v2/onramp/recommended_quote",s);if(!k(e))throw G;return e.data}catch{throw G}};var re=d({days:7}),ne=d({hours:1}),ie=(a,s,r,e,n=!0)=>{let m={"x-client-platform":a,"x-client-app-version":s,"x-client-locale":r},{data:p}=I(),u=p?.userID,f=p?.accessToken;return h({queryKey:M.fiatRampRecommendedQuote(m,e,u),queryFn:()=>X(m,e,f),gcTime:re,staleTime:ne,enabled:n})};export{D as a,L as b,Z as c,te as d,ie as e,se as f};
//# sourceMappingURL=chunk-W2BECDAL.js.map
