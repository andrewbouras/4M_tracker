import{b as $}from"./chunk-RASVUPXB.js";import"./chunk-EAWLRCIR.js";import{c as W}from"./chunk-NGO5FOJW.js";import{b as O}from"./chunk-ZZPNXVUV.js";import"./chunk-2P7VAWV5.js";import{a as N}from"./chunk-IQQ7P2L4.js";import{a as L}from"./chunk-VTNRGHVT.js";import"./chunk-P2WKOPZQ.js";import"./chunk-4CMCOVQN.js";import"./chunk-WFPABEAU.js";import"./chunk-WZYS47J2.js";import{b as A}from"./chunk-AIQ7AHJY.js";import"./chunk-6V7ED5GE.js";import"./chunk-T3HNWLEC.js";import{b as S,j as v,k as z}from"./chunk-T3JEJCOG.js";import{jd as I}from"./chunk-XKUMOCJO.js";import"./chunk-EF7ER3CO.js";import{a as x}from"./chunk-2BA2A4Q2.js";import{$ as q,a as D,c as Q,l as i,m as c}from"./chunk-G7PMLIMH.js";import"./chunk-24ISZ5TA.js";import"./chunk-2J2WSGCG.js";import"./chunk-DHK5JDA3.js";import{a as C,m as M}from"./chunk-FI5JCZQR.js";import"./chunk-7XYHSLSH.js";import{A as E,Pa as w}from"./chunk-RISGBUNP.js";import"./chunk-X6UT6LAC.js";import"./chunk-HTY4DAML.js";import{a as V}from"./chunk-6MAAUKN7.js";import"./chunk-LYAMJYNC.js";import"./chunk-UNDMYLJW.js";import{f as K,h as b,n as k}from"./chunk-3KENBVE7.js";b();k();var e=K(V());var le=()=>{let{t}=M(),r=x(),{onProviderSelected:u,isLoading:n,providers:m,paymentMethod:s,quoteTimeToExpiry:l,quoteTimeToExpiryColor:h,context:g}=X();return e.default.createElement(i,{margin:16,maxHeight:"100%",height:"100%"},e.default.createElement($,{isLoading:n,isEmpty:m.length===0,emptyStateText:t("buyThirdPartyScreenProvidersEmptyState"),header:e.default.createElement(i,{direction:"row",alignContent:"center",position:"relative"},e.default.createElement(i,{position:"absolute",left:0,zIndex:10,cursor:"pointer"},e.default.createElement(Q.ArrowLeft,{size:24,color:"textSecondary",onClick:()=>void r.popStack()})),e.default.createElement(c,{flex:1,font:"heading3",align:"center"},t("fiatRampQuotes"))),content:e.default.createElement(e.default.Fragment,null,e.default.createElement(i,{gap:8,marginBottom:96,marginTop:12,flex:1},e.default.createElement(L,{marginBottom:12}),e.default.createElement(q,{rows:[{type:"drawer",id:"selected-payment-method",onClick:()=>void r.to("fiat-ramp-detail-payment-methods"),start:s?.assets?.icon&&e.default.createElement(O,{image:{type:"fungible",src:s.assets.icon},size:24}),topLeft:s?.name||t("buyThirdPartyScreenPaymentMethod")}]}),e.default.createElement(i,{direction:"row",justifyContent:"space-between"},e.default.createElement(c,{font:"bodyMedium",color:"textSecondary",children:t("buyThirdPartyScreenProviders")}),e.default.createElement("div",null,e.default.createElement(c,{font:"captionMedium",color:"textSecondary",children:`${t("fiatRampNewQuote")}:`})," ",e.default.createElement(c,{className:D({width:32}),font:"captionMedium",color:h,children:l}))),e.default.createElement(i,{gap:8,flex:1,overflow:"scroll"},m.map((d,y)=>e.default.createElement(N,{key:`${d.id}-${y}`,index:y,onClick:u,...d}))))),context:g}))},X=()=>{let t=x(),r=v(),u=v(o=>o.setState),{fungible:n,purchaseAmount:m,purchaseType:s,paymentMethod:l,ownerPublicKey:h,context:g}=r,d=I();if(!n)throw new Error("No fungible asset selected");let{data:[y,_]}=w(["enable-fiat-ramp-optimize-defaults","enable-fiat-ramp-optimize-default-payment-method"]),{currencyCode:B}=A(),{data:p,isPending:T}=z("web-embedded",E,C.language,{...s==="currency"?{fiatAmount:m}:{tokenAmount:m},token:n.caip19,fiatCurrencyCode:B,paymentMethodId:l?.id,destinationAddress:{address:h,chainId:n.caip19.chainId,resourceType:"address"},optimizeDefaults:y,optimizeDefaultPaymentMethod:_}),f=l||p?.paymentMethod,P=p?.providers||[],U=(0,e.useCallback)(o=>{d.capture("fiatOnrampProviderSelected",{data:{chainId:p?.token?.chainId,providerId:o.id,paymentMethodId:f?.id,destinationAmount:o.quote?.displayDestinationAmount,sourceAmount:o.quote?.displaySourceAmount,asset:p?.token,tag:o.tag}}),u({...r,provider:o,paymentMethod:f,checkoutQuoteType:"selected"}),t.popStack()},[r,p?.token,f,u,d,t]),[a,F]=(0,e.useState)(S);W(()=>{T||P.length===0||F(a===0?S:a-1)},T?null:1e3);let j=a<10?`0:0${a}`:`0:${a}`,H=a<=10?"accentWarning":"textPrimary";return{providers:P,paymentMethod:f,onProviderSelected:U,closeModal:()=>!0,isLoading:T,quoteTimeToExpiry:j,quoteTimeToExpiryColor:H,context:g}};export{le as FiatRampProvidersPage};
//# sourceMappingURL=FiatRampProvidersPage-25IZ5NFZ.js.map
