import{da as ht,fa as Ct,ha as xt,ia as Ft}from"./chunk-6RSSZ6VM.js";import"./chunk-IUNHH544.js";import"./chunk-SWJ57CIZ.js";import"./chunk-LSEYVCUG.js";import"./chunk-BMUB2YXP.js";import"./chunk-BTQAICSK.js";import"./chunk-LJVOEF4C.js";import"./chunk-5R5I7UFN.js";import"./chunk-FS5WEDFF.js";import"./chunk-NJHVGQ3T.js";import"./chunk-V4KRVOHD.js";import"./chunk-PUJ7YG5C.js";import"./chunk-NJ4HEJET.js";import"./chunk-JOYNNZVI.js";import"./chunk-2WTSXO3L.js";import"./chunk-C5UDUURS.js";import{b as At}from"./chunk-5LEHT7IY.js";import"./chunk-DZ2NE3XW.js";import"./chunk-6PWMWQVM.js";import"./chunk-O2N6PUOM.js";import"./chunk-LO5C3EJB.js";import"./chunk-NGO5FOJW.js";import{a as G}from"./chunk-CSY6ZILA.js";import{b as kt}from"./chunk-ZZPNXVUV.js";import"./chunk-ZON27MKP.js";import"./chunk-GDRVC4A7.js";import"./chunk-2LU4YM7A.js";import"./chunk-E6VR42GU.js";import"./chunk-W27Z2YZM.js";import"./chunk-3SURQQID.js";import"./chunk-XJTFMD4C.js";import"./chunk-4LYBFKKF.js";import"./chunk-2XU6ODO7.js";import"./chunk-7ZVEM3WY.js";import"./chunk-VQVTLSDS.js";import"./chunk-5LRZ7IFN.js";import"./chunk-ATEHMOFB.js";import"./chunk-2P7VAWV5.js";import{o as f,p as H,q as _,r as q,s as K,t as N,u as st,v as Be,w as x}from"./chunk-3HK6ZC5T.js";import"./chunk-UCBZOSRF.js";import"./chunk-FGZHIQDN.js";import"./chunk-ACZGMNYK.js";import"./chunk-YWEIY5NR.js";import"./chunk-U5F4RDP5.js";import{r as mt}from"./chunk-LLAFONE3.js";import"./chunk-O3DDAITN.js";import"./chunk-ITDMYF4L.js";import"./chunk-SWF27PRY.js";import"./chunk-BTKBODVJ.js";import"./chunk-IBEI3NGL.js";import"./chunk-7DYYI5MT.js";import"./chunk-IQQ7P2L4.js";import"./chunk-VTNRGHVT.js";import"./chunk-P2WKOPZQ.js";import"./chunk-GXGQ5VTF.js";import"./chunk-W2BECDAL.js";import{Fd as pt,Tb as lt,Wc as Se,_c as ct,ic as ne,kd as ut,yd as we}from"./chunk-4CMCOVQN.js";import"./chunk-WFPABEAU.js";import"./chunk-WZYS47J2.js";import"./chunk-AIQ7AHJY.js";import{N as tt,O as ot}from"./chunk-6V7ED5GE.js";import"./chunk-T3HNWLEC.js";import"./chunk-T3JEJCOG.js";import{$b as Je,Jd as et,Je as at,Rd as nt,S as z,ae as rt,gb as oe,ie as ue,je as it,mb as Ye,nb as ve,ob as Ze}from"./chunk-XKUMOCJO.js";import"./chunk-EF7ER3CO.js";import"./chunk-2BA2A4Q2.js";import{B as yt,b as me,c as ft,da as Tt,l as y,m as R,n as dt,u as gt,y as bt}from"./chunk-G7PMLIMH.js";import"./chunk-24ISZ5TA.js";import"./chunk-2J2WSGCG.js";import"./chunk-DHK5JDA3.js";import{a as U,m as Xe}from"./chunk-FI5JCZQR.js";import"./chunk-7XYHSLSH.js";import{Pa as $e,pa as ce}from"./chunk-RISGBUNP.js";import"./chunk-X6UT6LAC.js";import{R as Ge,a as d,i as Ke,k as Pe,x as I}from"./chunk-HTY4DAML.js";import{a as E}from"./chunk-6MAAUKN7.js";import"./chunk-LYAMJYNC.js";import"./chunk-UNDMYLJW.js";import{f as M,h as i,i as p,n as a}from"./chunk-3KENBVE7.js";i();a();i();a();i();a();var b=M(E());i();a();i();a();i();a();function S(e){let t=f(0),o=f(()=>({i:0}),(l,u)=>{let g=l(o);return Object.assign(g,{m:!0,peek:l,set:u}),u(t,h=>h+1),()=>{g.m=!1,c(g),m(g)}});o.onMount=l=>l();let n=f(l=>{l(t);let u=l(o);if(!u.m||u.irc||u.i&&!u.irf)return u.p;m(u);let g=new Map,h=T=>{let C=l(T);return g.set(T,C),C};h.peek=u.peek;let v=(...T)=>{try{return++u.i,u.set(...T)}finally{Array.from(g.keys(),l),--u.i}};v.recurse=(T,...C)=>{if(u.fc){if(p.NODE_ENV!=="production")throw new Error("set.recurse is not allowed in cleanup");return}try{return u.irc=!0,u.set(T,...C)}finally{u.irc=!1,Array.from(g).some(Q)&&s(u)}};function Q([T,C]){return l(T)!==C}++u.i;function D(){try{if(u.irf=!1,!u.m)return;c(u),u.c=r.effect(h,v)}catch(T){u.e=T,s(u)}finally{u.p=void 0,--u.i}}return u.irf?D():u.p=Promise.resolve().then(D)});if(p.NODE_ENV!=="production"){let l=function(u,g){Object.defineProperty(u,"debugLabel",{get:()=>`${r.debugLabel??"effect"}:${g}`}),u.debugPrivate=!0};l(t,"refresh"),l(o,"ref"),l(n,"base")}let r=f(l=>void l(n));return r.effect=e,r;function s(l){try{l.irf=!0,l.set(t,u=>u+1)}finally{l.irf=!1}}function c(l){if(typeof l.c=="function")try{l.fc=!0,l.c()}finally{l.fc=!1,l.c=void 0}}function m(l){if("e"in l){let u=l.e;throw delete l.e,u}}}i();a();i();a();i();a();i();a();var fo=d.object({account:d.string(),quantity:d.number(),quantityString:d.string()}),go=d.object({address:d.string(),quantity:d.number(),quantityString:d.string(),lastTransferredDate:d.string().nullish(),subaccounts:d.array(fo).optional()}),bo=d.object({price:d.number(),priceChange24h:d.number().optional(),lastUpdatedAt:d.string()}).transform(e=>({...e,lastUpdatedAt:new Date(e.lastUpdatedAt)})).nullish(),yo=d.object({price:d.number(),priceChange24h:d.number().optional(),lastUpdatedAt:d.date()}),Ve={name:d.string().nullish(),symbol:d.string().nullish(),decimals:d.number(),spamStatus:d.enum(["VERIFIED","NOT_VERIFIED","POSSIBLE_SPAM","SPAM"]).nullish(),logoUri:d.string().nullish(),price:bo,livePrice:yo.nullish().optional(),queriedWalletBalances:Pe(go)},bn=d.object({...Ve,type:d.enum(["native","fungible"]),totalQuantity:d.number(),totalQuantityString:d.string(),encodedCaip19:d.string(),decodedCaip19:Ye,legacyKey:d.string().nullish(),timestamp:d.string().optional(),walletAddress:d.string().optional()}),To=d.object({...Ve,caip19:d.string(),totalQuantity:d.number(),totalQuantityString:d.string()}),Pt=d.object({items:Pe(To),cursor:d.string().nullish().default(null)}).transform(e=>{let{items:t,cursor:o,...n}=e;return{...n,nextCursor:o,tokens:t,updatedAt:Date.now()}}),ko=d.object({...Ve,caip19:d.string(),timestamp:d.string(),postQuantityString:d.string(),postQuantity:d.number()}),vt=d.object({cursor:d.string().nullish().default(null),items:d.array(ko)}).transform(e=>({nextCursor:e.cursor,transfers:e.items})),Bt=d.object({totalValueUsdCentsCurrent:d.number(),totalValueUsdStringCurrent:d.string(),totalValueUsdCents24h:d.number(),totalValueUsdString24h:d.string(),totalPercentChange24h:d.number()});var Ao=I({minutes:10});async function ho({walletCaip19s:e,fungibleCaip19s:t,cursor:o}){let n={walletAddresses:e.join(","),includePrices:"true"};o&&(n.cursor=o),t&&t.length>0&&(n.fungibleAddresses=t.sort().join(","));try{let r=await z.api().timeout(I({seconds:30})).get("/portfolio/v1/fungibles/balances",{params:n}).then(s=>{if(s.data.errors)throw new Error(s.data.message);return s.data});return Pt.parse(r)}catch(r){throw console.error(r),r}}function St({walletCaip19s:e,fallbackFn:t}){return{staleTime:Ao,gcTime:I({days:3}),queryKey:["infinite-tokens",{walletCaip19s:e}],enabled:!!e.length,queryFn:async({pageParam:o})=>{try{return await ho({walletCaip19s:e,cursor:o})}catch(n){if(t){let r=t();if(r)return r}throw n}},initialPageParam:"",getNextPageParam:o=>o?.nextCursor||void 0}}i();a();i();a();var $=f(null);var X=f(e=>{let t=e($);return t?t.addresses.map(o=>Ze({chainId:o.networkID,address:o.address,resourceType:"address"})).sort():[]});var A=st(e=>{let t=e(X),o=e(K),n=["infinite-tokens",{walletCaip19s:t}],r=o.getQueryData(n);return St({walletCaip19s:t,fallbackFn:()=>{if(r?.pages.length&&o.getQueryState(n)?.status==="pending")return r.pages[0]}})});var pe=x(A,e=>e.hasNextPage);i();a();i();a();var wt=e=>ct(e)?.[0],Vt=e=>{let{caip19:t,...o}=e,n=e.encodedCaip19??t,r=ve(n);return{...o,type:n.includes("/nativeToken:")?"native":"fungible",encodedCaip19:n,decodedCaip19:r,legacyKey:wt(r)}},Dt=e=>{let{caip19:t,...o}=e,n=ve(t);return{...o,type:t.includes("/nativeToken:")?"native":"fungible",encodedCaip19:t,decodedCaip19:n,legacyKey:wt(n),totalQuantity:e.postQuantity,totalQuantityString:e.postQuantityString}};i();a();var Co=x($,e=>e?.identifier),Y=Co;var xo=f(e=>{let{data:t,status:o}=e(A);return e(Y)?o==="success"||t&&t.pages.length>0?t.pages.flatMap(s=>s.tokens.map(Vt)):[]:[]}),Z=xo;i();a();var F=f({});var re=f(1/0),De=f(e=>e(pe)?e(re):0,(e,t,o)=>{if(o===null){t(re,1/0);return}let n=Math.min(e(re),o);n!==e(re)&&t(re,n)}),fe=De,It=S((e,t)=>{let{hasNextPage:o}=e(A),n=e(Z),r=e(F);if(n.length>0&&!o){t(De,0);return}let s=n.slice(-100).filter(c=>c.type==="fungible").map(c=>{let m=r[c.encodedCaip19]??c.price;return m?c.totalQuantity*m.price/10**c.decimals:1/0});t(De,Math.min(...s))});i();a();var Fo=S((e,t)=>{let n=e(K).getQueryCache().subscribe(r=>{if(!r||r.type!=="updated")return;let s=r.query;s.queryKey[0]==="prices"&&t(F,c=>{let m=s.queryKey[1].id,l=s.state.data,u=c[m];return!l||u?.price===l?.price||!(!u?.lastUpdatedAt||l.lastUpdatedAt&&new Date(l.lastUpdatedAt)>u.lastUpdatedAt)?c:{...c,[m]:{price:l.price,priceChange24h:l.priceChange24h??l.usd_24h_change,lastUpdatedAt:new Date(l.lastUpdatedAt)}}})});return()=>{n()}}),Ut=Fo;i();a();i();a();function ie(e){return t=>{let o=!1,n={...t};for(let[r,s]of Object.entries(e)){let c=s?.price,m=s?.lastUpdatedAt?new Date(s.lastUpdatedAt):null;if(!c||!m)continue;let l=t[r]?.price!==c&&(!t[r]?.lastUpdatedAt||m>t[r].lastUpdatedAt);o=o||l,l&&(n[r]={price:s.price,priceChange24h:s.priceChange24h,lastUpdatedAt:m})}return o?n:t}}i();a();var Nt=f(e=>e(Z).slice(-100).reduce((n,r)=>(r.price&&(n[r.encodedCaip19]=r.price),n),{}));var Po=S((e,t)=>{let o=e(Nt);!o||Object.keys(o).length===0||t(F,ie(o))}),Rt=Po;i();a();i();a();i();a();i();a();async function vo(e){let t={walletAddresses:e.walletCaip19s.join(","),includePrices:"true"};"cursor"in e&&(t.cursor=e.cursor),"from"in e&&(t.fromTimestamp=e.from.toString());let o=await z.api().timeout(I({seconds:30})).get("/portfolio/v1/fungibles/updates",{params:t}).then(n=>n.data);return vt.parse(o)}async function Mt(e){let t=[],o=()=>t.at(-1)?.nextCursor;do{let n=o(),r=await vo(n?{walletCaip19s:e.walletCaip19s,cursor:n}:e);t.push(r)}while(o());return t.flatMap(n=>n.transfers.map(Dt))}i();a();function Ie({newUpdates:e,existingUpdates:t={}}){return e.reduce((o,n)=>o[n.encodedCaip19]?.totalQuantityString===n.totalQuantityString?o:{...o,[n.encodedCaip19]:n},t)}i();a();var Et=f(e=>{let{data:t}=e(A);return t?.pages[0].updatedAt??0});var Lt=5e3;function Bo(e){return e?.length?Math.floor(Math.max(...e.map(({timestamp:t})=>new Date(t??0).getTime()))/1e3):null}function So(e){let t=Bo(e);return t?t+1:null}var wo=N(e=>{let t=e(K),o=e(Et),n=Math.floor((o-I({minutes:10}))/1e3),r=e(X),s=["token-transfers",{walletCaip19s:r,from:n}];return{enabled:!!n,queryKey:s,refetchInterval:Lt,queryFn:async()=>{let m=t.getQueryData(s)?.lastTimestamp;if(!m)return{updates:{},lastTimestamp:n-Math.ceil(Lt*1.25/1e3)};let l=await Mt({walletCaip19s:r,from:m}),u=t.getQueryData(s)?.updates??{};return{updates:Ie({newUpdates:l,existingUpdates:u}),lastTimestamp:So(l)??m}}}}),Vo=x(wo,({data:e})=>e?.updates??{},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),de=Vo;var Do=f(e=>{let t=e(de);return Object.values(t).reduce((n,r)=>(r.price&&(n[r.encodedCaip19]=r.price),n),{})}),Ht=Do;var Io=S((e,t)=>{let o=e(Ht);!o||Object.keys(o).length===0||t(F,ie(o))}),Qt=Io;i();a();i();a();function Ue(e){return t=>{let o=!1,n={...t};for(let r of e.queried){let s=e.prices[r],c=s?.price;if(!s)continue;let l=!!!t[r]?.lastUpdatedAt||s.lastUpdatedAt&&new Date(s.lastUpdatedAt)>t[r].lastUpdatedAt;c&&t[r]?.price!==c&&l&&(o=!0,n[r]={price:c,priceChange24h:s.priceChange24h??s.usd_24h_change,lastUpdatedAt:s.lastUpdatedAt?new Date(s.lastUpdatedAt):new Date})}return o?n:t}}i();a();i();a();function Ne({tokens:e}){return lt({tokens:e})}i();a();i();a();i();a();i();a();function Uo(e){return{totalQuantity:e.totalQuantity,totalQuantityString:e.totalQuantityString}}var Ot=f(e=>{let t=e(Z),o=e(de),n=new Set(Object.keys(o)),r=t.reduce((c,m)=>{let l=o[m.encodedCaip19];return l?(n.delete(m.encodedCaip19),[...c,{...m,...Uo(l)}]):[...c,m]},[]);return n.forEach(c=>{let m=o[c];m&&r.push({...m,queriedWalletBalances:[]})}),r.flatMap(c=>oe.isBitcoinNetworkID(c.decodedCaip19.chainId)&&c.queriedWalletBalances.length?c.queriedWalletBalances.map(u=>({...c,queriedWalletBalances:[],totalQuantity:u.quantity,totalQuantityString:u.quantityString,walletAddress:u.address})):c)});function No(e,t){if(e.type==="native"&&t.type!=="native")return-1;if(e.type!=="native"&&t.type==="native")return 1;if(e.type==="native"&&t.type==="native")return e.name&&t.name?e.name.localeCompare(t.name):0}function Ro(e,t){if(!e&&t)return 1;if(e&&!t)return-1}function qt(e,t){if(e&&t)return e.localeCompare(t);if(e&&!t)return-1;if(!e&&t)return 1}function Wt(e,t){if(e!==t)return t-e}var ge=f(e=>{let t=e(F),o=e(Ot),n=e(fe),r=o.filter(s=>s.totalQuantity>0||s.type==="native").map(s=>({...s,livePrice:t[s.encodedCaip19]??s.price})).sort((s,c)=>{let m=s.livePrice?.price,l=c.livePrice?.price,u=Ro(m,l);if(u)return u;let g=s.totalQuantity/10**s.decimals,h=c.totalQuantity/10**c.decimals;if(!m&&!l){let T=No(s,c);if(T)return T;let C=Wt(g,h);if(C)return C;let j=qt(s.name,c.name);return j||0}let v=(m??0)*g,Q=(l??0)*h,D=Wt(v,Q);return D||(qt(s.name,c.name)??0)});return n?r.filter(s=>{let c=s.livePrice?.price,m=s.totalQuantity/10**s.decimals;return(c??0)*m>=n}):r});i();a();i();a();var be=f(null);var Mo=new Map,jt=N(e=>{let t=e(be),o=e(Y);return ut(t,o)}),zt=x(jt,e=>e.status),Eo=f(e=>e(jt).data??Mo),ye=Eo;var J=f(e=>{let t=e(ye);return e(ge).filter(n=>ne(t??new Map,{key:n.legacyKey??"",spamStatus:n.spamStatus}))});var ae=10,_t=ae*.75;function Kt(e){let t=Math.max(0,e-_t);return Math.floor(t/ae)*ae}function Gt(e){let t=e+_t;return Math.ceil(t/ae)*ae}var Te=f(0),ke=f(20),Lo=f(e=>{let t=e(J),o=e(Te),n=e(ke);return t.slice(o,n)}),$t=x(Lo,e=>e,(e,t)=>{let o=e.map(r=>r.encodedCaip19).sort().join(","),n=t.map(r=>r.encodedCaip19).sort().join(",");return o===n});var Xt=N(e=>{let t=e($t);return{enabled:t.length>0,refetchInterval:5e3,queryKey:["visible-prices",{tokens:t.map(o=>o.encodedCaip19).sort(),type:"visible-chunk"}],queryFn:async()=>{let o=await Ne({tokens:t.map(n=>n.decodedCaip19)});return{prices:Object.fromEntries(Object.entries(o).map(([n,r])=>[n,{...r,lastUpdatedAt:r.lastUpdatedAt??new Date().toISOString()}])),queried:t.map(n=>n.encodedCaip19)}}}});var Ho=S((e,t)=>{let{data:o}=e(Xt);o&&t(F,Ue(o))}),Yt=Ho;i();a();var se=f("fungibles");i();a();i();a();i();a();function ee(e,t){return t*Number(e.totalQuantity)/10**e.decimals}i();a();i();a();async function Re({walletCaip19s:e,includeFungibleCaip19s:t,excludeFungibleCaip19s:o}){let n=await z.api().timeout(I({seconds:30})).get("/portfolio/v1/fungibles/value",{params:{walletAddresses:e.join(","),includeFungibleCaip19s:t.join(","),excludeFungibleCaip19s:o.join(",")}}).then(r=>r.data);return Bt.parse(n)}var Qo=f(e=>{let t=e(ye),n=e(ge).reduce((r,s)=>{let c=ne(void 0,{key:s.legacyKey??"",spamStatus:s.spamStatus??"NOT_VERIFIED"}),m=ne(t,{key:s.legacyKey??"",spamStatus:s.spamStatus??"NOT_VERIFIED"});return c===m?r:c?{...r,exclude:[...r.exclude,s.encodedCaip19]}:{...r,include:[...r.include,s.encodedCaip19]}},{include:[],exclude:[]});return{include:n.include.sort(),exclude:n.exclude.sort()}}),Oo=N(e=>{let t=e(X),{include:o,exclude:n}=e(Qo);return{enabled:t.length>0,queryKey:["portfolio-value",{walletCaip19s:t,include:o,exclude:n}],refetchInterval:5e3,queryFn:()=>Re({walletCaip19s:t,includeFungibleCaip19s:o,excludeFungibleCaip19s:n})}}),Zt=Oo;var qo=(e,t)=>{if(t===-100)return-1*e;let o=e/(1+t/100);return e-o},Wo=(e,t)=>t-e===0?0:e/(t-e)*100,Jt=f(e=>{let t=e(J),o=!1,n=t.reduce((r,s)=>{let c=s.livePrice?.price,m=s.livePrice?.priceChange24h;c&&(o=!0);let l=ee(s,c??0),u=qo(l,m??0);return{currentValue:r.currentValue+l,priceDifference:r.priceDifference+u}},{currentValue:0,priceDifference:0});return o?{currentValue:n.currentValue,priceDifference:n.priceDifference,totalPercentChange24h:Wo(n.priceDifference,n.currentValue)}:{currentValue:void 0,priceDifference:void 0,totalPercentChange24h:void 0}}),eo=f(e=>{let{data:t}=e(Zt),o=t?.totalPercentChange24h,n=t?.totalValueUsdCents24h,r=t?.totalValueUsdCentsCurrent;return{currentValue:r!==void 0?r/100:void 0,priceDifference:n!==void 0&&r!==void 0?(r-n)/100:void 0,totalPercentChange24h:o}}),us=f(e=>{let t=e(Jt),o=e(eo);return{local:t,remote:o}}),jo=f(e=>{let t=e(Jt),o=e(eo);return!e(pe)&&e(A).isSuccess?t:o}),Ae=jo;i();a();var zo=Be(e=>{let t=rt(e);return N(()=>t)}),to=Be(e=>f(t=>!t(zo(e)).data?.isDeveloperMode));function Me(){let e=ce(),t=H(Y),o=H(Ae),n=H(to(e)),{data:r}=nt(t),{mutate:s}=it();return at({accountBalance:r?.value,accountId:t??"",enabled:n,value:o.currentValue,setAccountBalance:s}),o.currentValue}i();a();var he=M(E());i();a();var w=M(E());i();a();function Ee(e){return e===void 0?"-":`${e>=0?"+":"-"}${Math.abs(e).toFixed(2)}%`}i();a();var L=M(E());function Le({children:e,maxFontSize:t}){let o=(0,L.useRef)(null),[n,r]=(0,L.useState)(t);return(0,L.useEffect)(()=>{let s=o.current;if(!s)return;let c=new ResizeObserver(()=>{let m=n;s.querySelectorAll("*").forEach(u=>{for(;u.scrollWidth>s.clientWidth&&m>10;)m-=1,u.style.fontSize=`${m}px`}),r(m)});return c.observe(s),()=>{c.disconnect()}},[n]),L.default.createElement(y,{ref:o,overflow:"hidden",width:"100%",display:"flex",direction:"column",alignItems:"center"},L.default.createElement("div",{style:{fontSize:`${n}px`,whiteSpace:"nowrap"}},e))}i();a();var le=M(E()),_o="\u2022\u2022\u2022\u2022\u2022\u2022",W=({children:e,isBalanceHidden:t,showHiddenText:o,font:n="caption",textColor:r="textSecondary",paddingTop:s=0})=>t?o?le.default.createElement(y,{gap:4,alignItems:"center",direction:"row",paddingTop:s},le.default.createElement(ft.Eye,{size:16,color:"textSecondary"}),le.default.createElement(R,{font:n,color:r},U.t("commandShowBalance"))):le.default.createElement(R,{font:n,color:r},_o):e;var Ko={minimumFractionDigits:2,maximumFractionDigits:2};function He({percentChangeColor:e,totalValueUsdCurrent:t,totalValueUsd24h:o,totalPercentChange24h:n,isBalanceHidden:r,children:s}){return w.default.createElement(w.default.Fragment,null,w.default.createElement(y,{direction:"row",alignItems:"center",width:"100%",marginBottom:10,justifyContent:"center"},w.default.createElement(W,{isBalanceHidden:r},w.default.createElement(Le,{maxFontSize:38},w.default.createElement(G,{font:"inherit",value:t,intlNumberFormatOptions:Ko})))),w.default.createElement(y,{direction:"row",alignItems:"center",gap:6,justifyContent:"center"},w.default.createElement(W,{showHiddenText:!0,isBalanceHidden:r},w.default.createElement(G,{signConfig:"always",marginRight:6,font:"title1",color:"sentiment",value:o}),w.default.createElement(R,{color:e.name,borderRadius:6,paddingX:4,paddingY:2,style:{backgroundColor:Ge(e.token,.1)}},Ee(n)))),s)}function Qe({children:e,isBalanceHidden:t,toggleBalanceVisibility:o}){let{currentValue:n,priceDifference:r,totalPercentChange24h:s}=H(Ae),c=(0,he.useMemo)(()=>{let m=s?s>0?"accentSuccess":"accentAlert":"textSecondary",l=s?s>0?me.colors.legacy.accentSuccess:me.colors.legacy.accentAlert:me.colors.legacy.textSecondary;return{name:m,token:l}},[s]);return he.default.createElement(He,{toggleBalanceVisibility:o,isBalanceHidden:t,percentChangeColor:c,totalPercentChange24h:s,totalValueUsd24h:r,totalValueUsdCurrent:n},e)}i();a();var V=M(E());i();a();i();a();var Go=f(e=>{let{isLoading:t}=e(A),o=e(zt);return[t,o==="pending"]}),oo=x(Go,e=>e.some(t=>t));var $o={status:"idle",hasNextPage:!1,data:[]},Ce={status:"idle",data:[]},no=f(e=>{if(e(se)==="collectibles")return{fungibles:$o,collectibles:Ce};let o=e(oo),{hasNextPage:n,status:r}=e(A),s=e(J);return o?{collectibles:Ce,fungibles:{status:"loading",hasNextPage:!1,data:[]}}:s.length===0&&r==="error"?{collectibles:Ce,fungibles:{status:"error",hasNextPage:!1,data:[]}}:{collectibles:Ce,fungibles:{status:"success",hasNextPage:n,data:s}}});i();a();var Oe=f({start:0,end:0}),ro=f(e=>e(Oe),(e,t,o)=>{let n=0,r=0;Array.isArray(o)?(n=Math.min(...o),r=Math.max(...o),t(Oe,{start:n,end:r})):(t(Oe,o),n=o.start,r=o.end);let s=Kt(n),c=Gt(r);s!==e(Te)&&t(Te,s),c!==e(ke)&&t(ke,c)});i();a();var k=M(E());i();a();var xe=M(E());function Xo(e){let{mainnetID:t,iconUrl:o,name:n,tokenSymbol:r}=oe[e];return{id:t,imageUrl:o,name:n,symbol:r}}var io=(0,xe.memo)(({imageSrc:e,fallbackText:t,chainId:o,type:n})=>{let r=oe.getChainID(o);return xe.default.createElement(kt,{image:{type:"fungible",src:e,fallback:t.substring(0,4)},tokenType:n==="native"?Se.get(o).nativeFungibleTokenType:Se.get(o).nonNativeFungibleTokenType,chainMeta:Xo(r)})});function Yo({token:e,price:t}){let o=t?ee(e,t):"-";return o==="-"?k.default.createElement(R,null,"-"):k.default.createElement(G,{value:o,font:"bodySemibold",minimumResolutionValue:.01,intlNumberFormatOptions:we})}var Zo=(e,t)=>{if(t===-100)return-1*e;let o=e/(1+t/100);return e-o},Jo=({networkID:e,walletAddress:t})=>{let o=et();return t?Je.get(e).badge?.(e,o,t)??null:null};function en({token:e,price:t,priceChange:o,renderImageSource:n,renderImageFallbackText:r,renderImageChainId:s,renderImageType:c,isBalanceHidden:m}){let{t:l}=Xe(),u=e.totalQuantity/10**e.decimals,g=ee(e,t??0),h=Zo(g,o??0),v=Jo({networkID:e.decodedCaip19.chainId,walletAddress:e.walletAddress})||"";return k.default.createElement(dt,{truncate:"left",topLeft:k.default.createElement(y,{direction:"row",gap:6,alignItems:"center"},k.default.createElement(R,{font:"bodySemibold"},e.name||l("tokenRowUnknownToken")),v?k.default.createElement(gt,{size:"small"},v):null),verticalAlign:"baseline",bottomLeft:k.default.createElement(W,{isBalanceHidden:m},`${pt(u)} ${e.symbol||"null"}`),topRight:k.default.createElement(W,{isBalanceHidden:m,font:"title3Semibold",textColor:"white"},t?k.default.createElement(Yo,{token:e,price:t}):"-"),bottomRight:k.default.createElement(W,{isBalanceHidden:m},o||t?k.default.createElement(G,{signConfig:"exceptZero",font:"caption",value:h,color:"sentiment",minimumResolutionValue:.01,intlNumberFormatOptions:we}):"-"),start:k.default.createElement(io,{imageSrc:n,fallbackText:r,chainId:s,type:c})})}var ao=(0,k.memo)(en);var tn=({isBalanceHidden:e,dataRow:t,onFungibleDetailNav:o})=>{let n=t.symbol||(t.legacyKey??"").substring(0,4);return V.default.createElement(y,{onPress:()=>o({caip19:t.encodedCaip19,key:t.legacyKey??"",tokenAccount:void 0}),width:"100%",paddingX:"screen",marginBottom:8},V.default.createElement(ao,{token:t,price:t.livePrice?.price,priceChange:t.livePrice?.priceChange24h,renderImageSource:t.logoUri??"",renderImageFallbackText:n,renderImageChainId:t.decodedCaip19.chainId,renderImageType:t.type,isBalanceHidden:e}))};function on({onFungibleDetailNav:e,renderListHeaderComponent:t,isBalanceHidden:o}){let n=_(ro),r=H(no).fungibles.data,s=(0,V.useCallback)(({stopIndex:m,startIndex:l})=>{n({start:l,end:m})},[n]),c=(0,V.useCallback)(m=>m.encodedCaip19,[]);return V.default.createElement(Tt.ScrollView,{estimatedItemSize:74,onViewableIndexesChanged:s},t?V.default.createElement(y,{marginY:16,marginX:"screen"},t()):null,r.map(m=>V.default.createElement(tn,{key:c(m),dataRow:m,onFungibleDetailNav:e,isBalanceHidden:o})))}var so=(0,V.memo)(on);function qe({onFungibleDetailNav:e,onTappingAccount:t,onTappingQRButton:o,onTappingSearch:n,onTappingSettings:r=()=>{},onTappingManageTokens:s=()=>{},onTappingManageCollections:c=()=>{},renderListFooterComponent:m,renderPageFooterComponent:l,renderListHeaderComponent:u,renderPageHeaderComponent:g,renderFixedHeaderComponent:h,renderCollectiblesComponent:v,accountAvatar:Q}){let{data:D,isLoading:T}=ue(),C=_($),j=_(fe),We=ce(),je=_(be);(0,b.useEffect)(()=>{je(We)},[We,je]),q(Rt),q(Qt),q(Ut),q(Yt),q(It);let lo=Me();(0,b.useEffect)(()=>{T||(j(null),C(D??null))},[D,T,C,j]);let{data:[co]}=$e(["enable-merge-collectibles"]),[te,uo]=q(se),O=tt(),ze=ot(),Fe=(0,b.useCallback)(()=>{ze(!O)},[O,ze]),_e=b.default.useRef(null),mo=(0,b.useCallback)(()=>{_e.current?.open()},[]),po=(0,b.useMemo)(()=>{let B=[];return te==="fungibles"&&B.push({text:U.t("portfolioHomeManageTokens"),onPress:s,icon:"ToggleLeft"}),te==="collectibles"&&B.push({text:U.t("portfolioHomeManageCollectibles"),onPress:c,icon:"ToggleLeft"}),B.push({text:O?U.t("portfolioHomeShowBalances"):U.t("portfolioHomeHideBalances"),onPress:Fe,icon:O?"EyeFill":"EyeFillOff"}),B.push({text:U.t("portfolioHomeWalletSettings"),onPress:r,icon:"Settings"}),B},[O,c,s,r,te,Fe]);return b.default.createElement(b.default.Fragment,null,g?.(),b.default.createElement(so,{isBalanceHidden:O,renderCollectiblesComponent:v,renderFixedHeaderComponent:h,renderListFooterComponent:m,renderListHeaderComponent:()=>b.default.createElement(y,null,b.default.createElement(Qe,{toggleBalanceVisibility:Fe,isBalanceHidden:O},u?.()),b.default.createElement(y,{direction:"row",justifyContent:"space-between",alignItems:"center",marginBottom:8,marginX:16},b.default.createElement(y,{direction:"row",gap:12},[{key:"fungibles",title:U.t("portfolioHomeTokens"),isActive:te==="fungibles"},co&&{key:"collectibles",title:U.t("portfolioHomeCollectibles"),isActive:te==="collectibles"}].filter(Ke).map(B=>b.default.createElement(R,{key:B.key,font:"title1Semibold",onPress:B.isActive?void 0:()=>uo(B.key),color:B.isActive?"textPrimary":"textSecondary"},B.title))),b.default.createElement(bt,{ref:_e,items:po},b.default.createElement(yt,{backgroundColor:[null,"bgButton"],color:["textSecondary","textPrimary"],icon:"MoreHorizontal",label:"More",size:40,onPress:mo})))),accountAvatar:Q,onFungibleDetailNav:e,onTappingAccount:t,onTappingQRButton:o,onTappingSearch:n}),l?.({portfolioValue:lo}))}var P=M(E());function nn(){let{data:e}=ue(),t=Ct(),{pushDetailView:o}=At(),{handleShowModalVisibility:n,handleHideModalVisibility:r}=Ft(),s=(0,P.useCallback)(()=>{e&&n("onramp")},[n,e]),c=(0,P.useCallback)(()=>{e&&n("receive",{account:e,onCloseClick:()=>r("receive")})},[r,n,e]),m=(0,P.useCallback)(()=>{t({})},[t]),l=(0,P.useCallback)(()=>{n("sendFungibleSelect")},[n]),{ctaActions:u}=mt({onTappingBuy:s,onTappingReceive:c,onTappingSend:l,onTappingSwap:m,account:e}),g=(0,P.useCallback)(()=>P.default.createElement(y,{marginY:32},P.default.createElement(ht,{disabled:e?.isReadOnly,actions:u,uiContextName:"home",maxButtons:4})),[u,e?.isReadOnly]),h=(0,P.useCallback)(({caip19:v,key:Q,tokenAccount:D})=>{o(P.default.createElement(xt,{caip19:v,fungibleKey:Q,splTokenAccount:D,entryPoint:"home"}))},[o]);return P.default.createElement(qe,{onFungibleDetailNav:h,renderListHeaderComponent:g})}export{nn as default};
//# sourceMappingURL=PortfolioHomeTabPage-NJIYO464.js.map
