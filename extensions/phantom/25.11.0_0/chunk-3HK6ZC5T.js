import{v as gy}from"./chunk-FGZHIQDN.js";import{a as fy}from"./chunk-ACZGMNYK.js";import{p as dy}from"./chunk-YWEIY5NR.js";import{e as Wp}from"./chunk-U5F4RDP5.js";import{s as my,w as yy}from"./chunk-LLAFONE3.js";import{a as ry}from"./chunk-ITDMYF4L.js";import{a as Ix}from"./chunk-IBEI3NGL.js";import{$a as Zg,A as Ma,Ba as Kg,Bb as Xg,Bc as cy,C as Gg,Cb as Jg,Cc as ur,Db as es,Eb as ey,Fb as ty,Fd as Tt,Gd as li,Ja as $g,Ka as Hg,Pa as Yp,Qa as jg,Rb as Ze,Sb as Ht,Tb as Ka,Tc as uy,Wb as ny,Wc as Cr,Xc as Ko,Ya as zg,Yb as sy,Yc as Ye,Za as Wg,Zc as py,_c as $o,bb as Oa,cb as Yg,d as Ug,db as Jn,e as ar,eb as qa,g as Lg,gd as ly,h as Mg,i as Og,j as La,ld as $,mc as ai,md as Bt,nc as iy,nd as pr,qc as cr,qd as ui,rc as St,tc as ay,ud as Xp,vc as ci,xb as Va,y as qg,z as Vg,zb as Ga,zd as pi}from"./chunk-4CMCOVQN.js";import{d as oy,h as co}from"./chunk-WZYS47J2.js";import{b as De}from"./chunk-AIQ7AHJY.js";import{N as Zp,U as Rg,ga as Qg,j as kg,o as Ge}from"./chunk-6V7ED5GE.js";import{c as Da,h as _a,j as zp,k as si}from"./chunk-T3HNWLEC.js";import{e as Jp,g as el}from"./chunk-T3JEJCOG.js";import{$d as Ng,Aa as vg,C as Ea,Cc as Ve,Db as Nt,Dc as Fr,Fd as Yn,Gb as zn,Hb as Wn,Hd as Ba,He as Go,Jc as Pg,L as Kt,Le as Re,Md as Qa,Ne as Bg,Ob as Eg,Qd as Ua,Rd as Dg,S as X,Sb as Ig,Td as _g,V as me,Xa as ni,Yc as Zn,ad as ii,fb as jp,gb as I,hb as Ir,ia as Oo,ib as se,ie as he,jb as ir,jd as oe,mb as Pr,md as Na,nb as qo,nd as Fg,ob as Y,pb as Vo,pd as Cg,pe as Xn,qd as We,sb as Ra,vb as xg,y as or}from"./chunk-XKUMOCJO.js";import{n as Kn,u as ag}from"./chunk-EF7ER3CO.js";import{c as Ha}from"./chunk-2BA2A4Q2.js";import{l as $a,m as kr,v as uo}from"./chunk-G7PMLIMH.js";import{c as gt}from"./chunk-DHK5JDA3.js";import{a as R,l as Tg,m as qe,n as Ne}from"./chunk-FI5JCZQR.js";import{A as Ee,C as $e,D as cg,E as ot,Ha as Ag,Pa as Se,X as Qe,Z as ug,_ as pg,aa as Hn,ba as Pa,ca as lg,da as mg,f as Tx,fa as ee,ha as ve,ia as $t,ja as dg,ka as re,m as xx,o as Er,p as $n,pa as ue,q as so,t as Kp,ua as ao,va as U}from"./chunk-RISGBUNP.js";import{c as Ia}from"./chunk-X6UT6LAC.js";import{$ as _t,T as jn,U as yg,W as Sg,X as io,Y as Ex,Z as Hp,_ as sr,a as f,b as q,ba as oi,c as j,ca as hg,da as fe,ea as wg,fa as bg,ga as yt,ha as ka,o as fg,p as gg,q as Fa,t as $p,v as Ca,w as nr,x as J}from"./chunk-HTY4DAML.js";import{a as D}from"./chunk-6MAAUKN7.js";import{c as ft,f as k,h as i,i as m,l as vx,m as Buffer,n as a}from"./chunk-3KENBVE7.js";var vy=ft((Rr,Ay)=>{i();a();var by=typeof self<"u"?self:Rr,ja=function(){function t(){this.fetch=!1,this.DOMException=by.DOMException}return t.prototype=by,new t}();(function(t){var e=function(r){var o={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};function n(x){return x&&DataView.prototype.isPrototypeOf(x)}if(o.arrayBuffer)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(x){return x&&s.indexOf(Object.prototype.toString.call(x))>-1};function u(x){if(typeof x!="string"&&(x=String(x)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(x))throw new TypeError("Invalid character in header field name");return x.toLowerCase()}function p(x){return typeof x!="string"&&(x=String(x)),x}function l(x){var E={next:function(){var F=x.shift();return{done:F===void 0,value:F}}};return o.iterable&&(E[Symbol.iterator]=function(){return E}),E}function d(x){this.map={},x instanceof d?x.forEach(function(E,F){this.append(F,E)},this):Array.isArray(x)?x.forEach(function(E){this.append(E[0],E[1])},this):x&&Object.getOwnPropertyNames(x).forEach(function(E){this.append(E,x[E])},this)}d.prototype.append=function(x,E){x=u(x),E=p(E);var F=this.map[x];this.map[x]=F?F+", "+E:E},d.prototype.delete=function(x){delete this.map[u(x)]},d.prototype.get=function(x){return x=u(x),this.has(x)?this.map[x]:null},d.prototype.has=function(x){return this.map.hasOwnProperty(u(x))},d.prototype.set=function(x,E){this.map[u(x)]=p(E)},d.prototype.forEach=function(x,E){for(var F in this.map)this.map.hasOwnProperty(F)&&x.call(E,this.map[F],F,this)},d.prototype.keys=function(){var x=[];return this.forEach(function(E,F){x.push(F)}),l(x)},d.prototype.values=function(){var x=[];return this.forEach(function(E){x.push(E)}),l(x)},d.prototype.entries=function(){var x=[];return this.forEach(function(E,F){x.push([F,E])}),l(x)},o.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function g(x){if(x.bodyUsed)return Promise.reject(new TypeError("Already read"));x.bodyUsed=!0}function y(x){return new Promise(function(E,F){x.onload=function(){E(x.result)},x.onerror=function(){F(x.error)}})}function S(x){var E=new FileReader,F=y(E);return E.readAsArrayBuffer(x),F}function h(x){var E=new FileReader,F=y(E);return E.readAsText(x),F}function w(x){for(var E=new Uint8Array(x),F=new Array(E.length),Q=0;Q<E.length;Q++)F[Q]=String.fromCharCode(E[Q]);return F.join("")}function b(x){if(x.slice)return x.slice(0);var E=new Uint8Array(x.byteLength);return E.set(new Uint8Array(x)),E.buffer}function T(){return this.bodyUsed=!1,this._initBody=function(x){this._bodyInit=x,x?typeof x=="string"?this._bodyText=x:o.blob&&Blob.prototype.isPrototypeOf(x)?this._bodyBlob=x:o.formData&&FormData.prototype.isPrototypeOf(x)?this._bodyFormData=x:o.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)?this._bodyText=x.toString():o.arrayBuffer&&o.blob&&n(x)?(this._bodyArrayBuffer=b(x.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):o.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(x)||c(x))?this._bodyArrayBuffer=b(x):this._bodyText=x=Object.prototype.toString.call(x):this._bodyText="",this.headers.get("content-type")||(typeof x=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):o.searchParams&&URLSearchParams.prototype.isPrototypeOf(x)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o.blob&&(this.blob=function(){var x=g(this);if(x)return x;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(S)}),this.text=function(){var x=g(this);if(x)return x;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(w(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o.formData&&(this.formData=function(){return this.text().then(B)}),this.json=function(){return this.text().then(JSON.parse)},this}var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function P(x){var E=x.toUpperCase();return v.indexOf(E)>-1?E:x}function C(x,E){E=E||{};var F=E.body;if(x instanceof C){if(x.bodyUsed)throw new TypeError("Already read");this.url=x.url,this.credentials=x.credentials,E.headers||(this.headers=new d(x.headers)),this.method=x.method,this.mode=x.mode,this.signal=x.signal,!F&&x._bodyInit!=null&&(F=x._bodyInit,x.bodyUsed=!0)}else this.url=String(x);if(this.credentials=E.credentials||this.credentials||"same-origin",(E.headers||!this.headers)&&(this.headers=new d(E.headers)),this.method=P(E.method||this.method||"GET"),this.mode=E.mode||this.mode||null,this.signal=E.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&F)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(F)}C.prototype.clone=function(){return new C(this,{body:this._bodyInit})};function B(x){var E=new FormData;return x.trim().split("&").forEach(function(F){if(F){var Q=F.split("="),O=Q.shift().replace(/\+/g," "),M=Q.join("=").replace(/\+/g," ");E.append(decodeURIComponent(O),decodeURIComponent(M))}}),E}function G(x){var E=new d,F=x.replace(/\r?\n[\t ]+/g," ");return F.split(/\r?\n/).forEach(function(Q){var O=Q.split(":"),M=O.shift().trim();if(M){var N=O.join(":").trim();E.append(M,N)}}),E}T.call(C.prototype);function L(x,E){E||(E={}),this.type="default",this.status=E.status===void 0?200:E.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in E?E.statusText:"OK",this.headers=new d(E.headers),this.url=E.url||"",this._initBody(x)}T.call(L.prototype),L.prototype.clone=function(){return new L(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},L.error=function(){var x=new L(null,{status:0,statusText:""});return x.type="error",x};var z=[301,302,303,307,308];L.redirect=function(x,E){if(z.indexOf(E)===-1)throw new RangeError("Invalid status code");return new L(null,{status:E,headers:{location:x}})},r.DOMException=t.DOMException;try{new r.DOMException}catch{r.DOMException=function(E,F){this.message=E,this.name=F;var Q=Error(E);this.stack=Q.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function K(x,E){return new Promise(function(F,Q){var O=new C(x,E);if(O.signal&&O.signal.aborted)return Q(new r.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function N(){M.abort()}M.onload=function(){var Z={status:M.status,statusText:M.statusText,headers:G(M.getAllResponseHeaders()||"")};Z.url="responseURL"in M?M.responseURL:Z.headers.get("X-Request-URL");var _="response"in M?M.response:M.responseText;F(new L(_,Z))},M.onerror=function(){Q(new TypeError("Network request failed"))},M.ontimeout=function(){Q(new TypeError("Network request failed"))},M.onabort=function(){Q(new r.DOMException("Aborted","AbortError"))},M.open(O.method,O.url,!0),O.credentials==="include"?M.withCredentials=!0:O.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&o.blob&&(M.responseType="blob"),O.headers.forEach(function(Z,_){M.setRequestHeader(_,Z)}),O.signal&&(O.signal.addEventListener("abort",N),M.onreadystatechange=function(){M.readyState===4&&O.signal.removeEventListener("abort",N)}),M.send(typeof O._bodyInit>"u"?null:O._bodyInit)})}return K.polyfill=!0,t.fetch||(t.fetch=K,t.Headers=d,t.Request=C,t.Response=L),r.Headers=d,r.Request=C,r.Response=L,r.fetch=K,Object.defineProperty(r,"__esModule",{value:!0}),r}({})})(ja);ja.fetch.ponyfill=!0;delete ja.fetch.polyfill;var ts=ja;Rr=ts.fetch;Rr.default=ts.fetch;Rr.fetch=ts.fetch;Rr.Headers=ts.Headers;Rr.Request=ts.Request;Rr.Response=ts.Response;Ay.exports=Rr});var xy=ft((yU,Ty)=>{i();a();(function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e={rotl:function(r,o){return r<<o|r>>>32-o},rotr:function(r,o){return r<<32-o|r>>>o},endian:function(r){if(r.constructor==Number)return e.rotl(r,8)&16711935|e.rotl(r,24)&4278255360;for(var o=0;o<r.length;o++)r[o]=e.endian(r[o]);return r},randomBytes:function(r){for(var o=[];r>0;r--)o.push(Math.floor(Math.random()*256));return o},bytesToWords:function(r){for(var o=[],n=0,s=0;n<r.length;n++,s+=8)o[s>>>5]|=r[n]<<24-s%32;return o},wordsToBytes:function(r){for(var o=[],n=0;n<r.length*32;n+=8)o.push(r[n>>>5]>>>24-n%32&255);return o},bytesToHex:function(r){for(var o=[],n=0;n<r.length;n++)o.push((r[n]>>>4).toString(16)),o.push((r[n]&15).toString(16));return o.join("")},hexToBytes:function(r){for(var o=[],n=0;n<r.length;n+=2)o.push(parseInt(r.substr(n,2),16));return o},bytesToBase64:function(r){for(var o=[],n=0;n<r.length;n+=3)for(var s=r[n]<<16|r[n+1]<<8|r[n+2],c=0;c<4;c++)n*8+c*6<=r.length*8?o.push(t.charAt(s>>>6*(3-c)&63)):o.push("=");return o.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/ig,"");for(var o=[],n=0,s=0;n<r.length;s=++n%4)s!=0&&o.push((t.indexOf(r.charAt(n-1))&Math.pow(2,-2*s+8)-1)<<s*2|t.indexOf(r.charAt(n))>>>6-s*2);return o}};Ty.exports=e})()});var nl=ft((wU,Ey)=>{i();a();var ol={utf8:{stringToBytes:function(t){return ol.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(ol.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r)&255);return e},bytesToString:function(t){for(var e=[],r=0;r<t.length;r++)e.push(String.fromCharCode(t[r]));return e.join("")}}};Ey.exports=ol});var Py=ft((vU,Iy)=>{i();a();(function(){var t=xy(),e=nl().utf8,r=nl().bin,o=function(s){s.constructor==String?s=e.stringToBytes(s):typeof Buffer<"u"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(s)?s=Array.prototype.slice.call(s,0):Array.isArray(s)||(s=s.toString());var c=t.bytesToWords(s),u=s.length*8,p=[],l=1732584193,d=-271733879,g=-1732584194,y=271733878,S=-1009589776;c[u>>5]|=128<<24-u%32,c[(u+64>>>9<<4)+15]=u;for(var h=0;h<c.length;h+=16){for(var w=l,b=d,T=g,v=y,P=S,C=0;C<80;C++){if(C<16)p[C]=c[h+C];else{var B=p[C-3]^p[C-8]^p[C-14]^p[C-16];p[C]=B<<1|B>>>31}var G=(l<<5|l>>>27)+S+(p[C]>>>0)+(C<20?(d&g|~d&y)+1518500249:C<40?(d^g^y)+1859775393:C<60?(d&g|d&y|g&y)-1894007588:(d^g^y)-899497514);S=y,y=g,g=d<<30|d>>>2,d=l,l=G}l+=w,d+=b,g+=T,y+=v,S+=P}return[l,d,g,y,S]},n=function(s,c){var u=t.wordsToBytes(o(s));return c&&c.asBytes?u:c&&c.asString?r.bytesToString(u):t.bytesToHex(u)};n._blocksize=16,n._digestsize=20,Iy.exports=n})()});var ky=ft((CU,kx)=>{kx.exports={name:"@phantom-labs/blocklist",version:"0.13.0",main:"index.js",types:"index.d.ts",repository:"git@github.com:phantom-labs/blocklist.git",author:"Jordan Leigh <AlwaysBCoding@gmail.com>",license:"MIT",scripts:{build:"node build.js"},dependencies:{"js-yaml":"^4.1.0",sha3:"^2.1.4"}}});var Ry=ft((kU,Rx)=>{Rx.exports={blocklist:["phantomweb.app","aurory.app","solvision.io","staratlas.art","starsatlas.com","sollet.cc","raydlum.io","aurorynft.com","sneks.gg","solletweb.io","i-sollet.com","fancyfrenchienft.art","solanawebwallet.online","phahtom.com","server-syncwallet.com","staratias.app","raydium.network","grapesnetwork.me","staratias.art","soistarter.org","audius-nft.top","aurory.me","degenapes.app","phantom-app.online","phantomwallet.net","dapps-node.com","phantom-app.link","solanaoutage.com","walletconnectdapps.net","staratlas.cx","web-phantom.app","0120tt.com"],whitelist:[],fuzzylist:[],contentHash:"830ea1c9a833213eabc17990adf053081f503b1203ca9a2c711db7199e657293"}});var Dy=ft(al=>{i();a();var{version:Dx}=ky(),_x=Ry(),Nx=()=>Dx,Bx=()=>_x;al.getVersion=Nx;al.getBlocklist=Bx});var Ny=ft(os=>{"use strict";i();a();os.__esModule=!0;os.distance=os.closest=void 0;var Dr=new Uint32Array(65536),Qx=function(t,e){for(var r=t.length,o=e.length,n=1<<r-1,s=-1,c=0,u=r,p=r;p--;)Dr[t.charCodeAt(p)]|=1<<p;for(p=0;p<o;p++){var l=Dr[e.charCodeAt(p)],d=l|c;l|=(l&s)+s^s,c|=~(l|s),s&=l,c&n&&u++,s&n&&u--,c=c<<1|1,s=s<<1|~(d|c),c&=d}for(p=r;p--;)Dr[t.charCodeAt(p)]=0;return u},Ux=function(t,e){for(var r=e.length,o=t.length,n=[],s=[],c=Math.ceil(r/32),u=Math.ceil(o/32),p=0;p<c;p++)s[p]=-1,n[p]=0;for(var l=0;l<u-1;l++){for(var d=0,g=-1,y=l*32,S=Math.min(32,o)+y,h=y;h<S;h++)Dr[t.charCodeAt(h)]|=1<<h;for(var p=0;p<r;p++){var w=Dr[e.charCodeAt(p)],b=s[p/32|0]>>>p&1,T=n[p/32|0]>>>p&1,v=w|d,P=((w|T)&g)+g^g|w|T,C=d|~(P|g),B=g&P;C>>>31^b&&(s[p/32|0]^=1<<p),B>>>31^T&&(n[p/32|0]^=1<<p),C=C<<1|b,B=B<<1|T,g=B|~(v|C),d=C&v}for(var h=y;h<S;h++)Dr[t.charCodeAt(h)]=0}for(var G=0,L=-1,z=l*32,K=Math.min(32,o-z)+z,h=z;h<K;h++)Dr[t.charCodeAt(h)]|=1<<h;for(var x=o,p=0;p<r;p++){var w=Dr[e.charCodeAt(p)],b=s[p/32|0]>>>p&1,T=n[p/32|0]>>>p&1,v=w|G,P=((w|T)&L)+L^L|w|T,C=G|~(P|L),B=L&P;x+=C>>>o-1&1,x-=B>>>o-1&1,C>>>31^b&&(s[p/32|0]^=1<<p),B>>>31^T&&(n[p/32|0]^=1<<p),C=C<<1|b,B=B<<1|T,L=B|~(v|C),G=C&v}for(var h=z;h<K;h++)Dr[t.charCodeAt(h)]=0;return x},_y=function(t,e){if(t.length<e.length){var r=e;e=t,t=r}return e.length===0?t.length:t.length<=32?Qx(t,e):Ux(t,e)};os.distance=_y;var Lx=function(t,e){for(var r=1/0,o=0,n=0;n<e.length;n++){var s=_y(t,e[n]);s<r&&(r=s,o=n)}return e[o]};os.closest=Lx});var By=ft((cl,di)=>{i();a();(function(){"use strict";var t;try{t=typeof Intl<"u"&&typeof Intl.Collator<"u"?Intl.Collator("generic",{sensitivity:"base"}):null}catch{console.log("Collator could not be initialized and wouldn't be used")}var e=Ny(),r=[],o=[],n={get:function(s,c,u){var p=u&&t&&u.useCollator;if(p){var l=s.length,d=c.length;if(l===0)return d;if(d===0)return l;var g,y,S,h,w;for(S=0;S<d;++S)r[S]=S,o[S]=c.charCodeAt(S);r[d]=d;var b;for(S=0;S<l;++S){for(y=S+1,h=0;h<d;++h)g=y,b=t.compare(s.charAt(S),String.fromCharCode(o[h]))===0,y=r[h]+(b?0:1),w=g+1,y>w&&(y=w),w=r[h+1]+1,y>w&&(y=w),r[h]=g;r[h]=y}return y}return e.distance(s,c)}};typeof define<"u"&&define!==null&&define.amd?define(function(){return n}):typeof di<"u"&&di!==null&&typeof cl<"u"&&di.exports===cl?di.exports=n:(typeof self<"u"&&typeof self.postMessage=="function"&&typeof self.importScripts=="function"||typeof self<"u"&&self!==null)&&(self.Levenshtein=n)})()});var bh=ft((wi,as)=>{i();a();var ZS=200,AE="Expected a function",im="__lodash_hash_undefined__",pc=1,us=2,am=1/0,YS=9007199254740991,sc="[object Arguments]",Jl="[object Array]",XS="[object Boolean]",JS="[object Date]",eh="[object Error]",th="[object Function]",vE="[object GeneratorFunction]",ic="[object Map]",rh="[object Number]",is="[object Object]",qS="[object Promise]",oh="[object RegExp]",ac="[object Set]",nh="[object String]",sh="[object Symbol]",em="[object WeakMap]",ih="[object ArrayBuffer]",cc="[object DataView]",TE="[object Float32Array]",xE="[object Float64Array]",EE="[object Int8Array]",IE="[object Int16Array]",PE="[object Int32Array]",FE="[object Uint8Array]",CE="[object Uint8ClampedArray]",kE="[object Uint16Array]",RE="[object Uint32Array]",DE=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_E=/^\w*$/,NE=/^\./,BE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,QE=/[\\^$.*+?()[\]{}|]/g,UE=/\\(\\)?/g,LE=/^\[object .+?Constructor\]$/,ME=/^(?:0|[1-9]\d*)$/,Pe={};Pe[TE]=Pe[xE]=Pe[EE]=Pe[IE]=Pe[PE]=Pe[FE]=Pe[CE]=Pe[kE]=Pe[RE]=!0;Pe[sc]=Pe[Jl]=Pe[ih]=Pe[XS]=Pe[cc]=Pe[JS]=Pe[eh]=Pe[th]=Pe[ic]=Pe[rh]=Pe[is]=Pe[oh]=Pe[ac]=Pe[nh]=Pe[em]=!1;var ah=typeof self=="object"&&self&&self.Object===Object&&self,OE=typeof self=="object"&&self&&self.Object===Object&&self,mo=ah||OE||Function("return this")(),ch=typeof wi=="object"&&wi&&!wi.nodeType&&wi,VS=ch&&typeof as=="object"&&as&&!as.nodeType&&as,qE=VS&&VS.exports===ch,GS=qE&&ah.process,KS=function(){try{return GS&&GS.binding("util")}catch{}}(),$S=KS&&KS.isTypedArray;function VE(t,e){var r=t?t.length:0;return!!r&&HE(t,e,0)>-1}function GE(t,e,r){for(var o=-1,n=t?t.length:0;++o<n;)if(r(e,t[o]))return!0;return!1}function KE(t,e){for(var r=-1,o=t?t.length:0;++r<o;)if(e(t[r],r,t))return!0;return!1}function $E(t,e,r,o){for(var n=t.length,s=r+(o?1:-1);o?s--:++s<n;)if(e(t[s],s,t))return s;return-1}function HE(t,e,r){if(e!==e)return $E(t,jE,r);for(var o=r-1,n=t.length;++o<n;)if(t[o]===e)return o;return-1}function jE(t){return t!==t}function zE(t){return function(e){return e?.[t]}}function WE(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o}function ZE(t){return function(e){return t(e)}}function YE(t,e){return t.has(e)}function XE(t,e){return t?.[e]}function tm(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function JE(t){var e=-1,r=Array(t.size);return t.forEach(function(o,n){r[++e]=[n,o]}),r}function eI(t,e){return function(r){return t(e(r))}}function cm(t){var e=-1,r=Array(t.size);return t.forEach(function(o){r[++e]=o}),r}var tI=Array.prototype,rI=Function.prototype,lc=Object.prototype,Yl=mo["__core-js_shared__"],HS=function(){var t=/[^.]+$/.exec(Yl&&Yl.keys&&Yl.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),uh=rI.toString,Br=lc.hasOwnProperty,ps=lc.toString,oI=RegExp("^"+uh.call(Br).replace(QE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jS=mo.Symbol,zS=mo.Uint8Array,nI=lc.propertyIsEnumerable,sI=tI.splice,iI=eI(Object.keys,Object),rm=ls(mo,"DataView"),bi=ls(mo,"Map"),om=ls(mo,"Promise"),cs=ls(mo,"Set"),nm=ls(mo,"WeakMap"),Ai=ls(Object,"create"),aI=Zo(rm),cI=Zo(bi),uI=Zo(om),pI=Zo(cs),lI=Zo(nm),uc=jS?jS.prototype:void 0,Xl=uc?uc.valueOf:void 0,WS=uc?uc.toString:void 0;function zo(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function mI(){this.__data__=Ai?Ai(null):{}}function dI(t){return this.has(t)&&delete this.__data__[t]}function fI(t){var e=this.__data__;if(Ai){var r=e[t];return r===im?void 0:r}return Br.call(e,t)?e[t]:void 0}function gI(t){var e=this.__data__;return Ai?e[t]!==void 0:Br.call(e,t)}function yI(t,e){var r=this.__data__;return r[t]=Ai&&e===void 0?im:e,this}zo.prototype.clear=mI;zo.prototype.delete=dI;zo.prototype.get=fI;zo.prototype.has=gI;zo.prototype.set=yI;function Qr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function SI(){this.__data__=[]}function hI(t){var e=this.__data__,r=mc(e,t);if(r<0)return!1;var o=e.length-1;return r==o?e.pop():sI.call(e,r,1),!0}function wI(t){var e=this.__data__,r=mc(e,t);return r<0?void 0:e[r][1]}function bI(t){return mc(this.__data__,t)>-1}function AI(t,e){var r=this.__data__,o=mc(r,t);return o<0?r.push([t,e]):r[o][1]=e,this}Qr.prototype.clear=SI;Qr.prototype.delete=hI;Qr.prototype.get=wI;Qr.prototype.has=bI;Qr.prototype.set=AI;function Ur(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function vI(){this.__data__={hash:new zo,map:new(bi||Qr),string:new zo}}function TI(t){return dc(this,t).delete(t)}function xI(t){return dc(this,t).get(t)}function EI(t){return dc(this,t).has(t)}function II(t,e){return dc(this,t).set(t,e),this}Ur.prototype.clear=vI;Ur.prototype.delete=TI;Ur.prototype.get=xI;Ur.prototype.has=EI;Ur.prototype.set=II;function vi(t){var e=-1,r=t?t.length:0;for(this.__data__=new Ur;++e<r;)this.add(t[e])}function PI(t){return this.__data__.set(t,im),this}function FI(t){return this.__data__.has(t)}vi.prototype.add=vi.prototype.push=PI;vi.prototype.has=FI;function Nr(t){this.__data__=new Qr(t)}function CI(){this.__data__=new Qr}function kI(t){return this.__data__.delete(t)}function RI(t){return this.__data__.get(t)}function DI(t){return this.__data__.has(t)}function _I(t,e){var r=this.__data__;if(r instanceof Qr){var o=r.__data__;if(!bi||o.length<ZS-1)return o.push([t,e]),this;r=this.__data__=new Ur(o)}return r.set(t,e),this}Nr.prototype.clear=CI;Nr.prototype.delete=kI;Nr.prototype.get=RI;Nr.prototype.has=DI;Nr.prototype.set=_I;function NI(t,e){var r=Wo(t)||Sh(t)?WE(t.length,String):[],o=r.length,n=!!o;for(var s in t)(e||Br.call(t,s))&&!(n&&(s=="length"||dh(s,o)))&&r.push(s);return r}function mc(t,e){for(var r=t.length;r--;)if(yh(t[r][0],e))return r;return-1}function ph(t,e){e=fc(e,t)?[e]:lh(e);for(var r=0,o=e.length;t!=null&&r<o;)t=t[gc(e[r++])];return r&&r==o?t:void 0}function BI(t){return ps.call(t)}function QI(t,e){return t!=null&&e in Object(t)}function um(t,e,r,o,n){return t===e?!0:t==null||e==null||!yc(t)&&!Sc(e)?t!==t&&e!==e:UI(t,e,um,r,o,n)}function UI(t,e,r,o,n,s){var c=Wo(t),u=Wo(e),p=Jl,l=Jl;c||(p=lo(t),p=p==sc?is:p),u||(l=lo(e),l=l==sc?is:l);var d=p==is&&!tm(t),g=l==is&&!tm(e),y=p==l;if(y&&!d)return s||(s=new Nr),c||sP(t)?mh(t,e,r,o,n,s):WI(t,e,p,r,o,n,s);if(!(n&us)){var S=d&&Br.call(t,"__wrapped__"),h=g&&Br.call(e,"__wrapped__");if(S||h){var w=S?t.value():t,b=h?e.value():e;return s||(s=new Nr),r(w,b,o,n,s)}}return y?(s||(s=new Nr),ZI(t,e,r,o,n,s)):!1}function LI(t,e,r,o){var n=r.length,s=n,c=!o;if(t==null)return!s;for(t=Object(t);n--;){var u=r[n];if(c&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++n<s;){u=r[n];var p=u[0],l=t[p],d=u[1];if(c&&u[2]){if(l===void 0&&!(p in t))return!1}else{var g=new Nr;if(o)var y=o(l,d,p,t,e,g);if(!(y===void 0?um(d,l,o,pc|us,g):y))return!1}}return!0}function MI(t){if(!yc(t)||eP(t))return!1;var e=wh(t)||tm(t)?oI:LE;return e.test(Zo(t))}function OI(t){return Sc(t)&&lm(t.length)&&!!Pe[ps.call(t)]}function qI(t){return typeof t=="function"?t:t==null?uP:typeof t=="object"?Wo(t)?KI(t[0],t[1]):GI(t):lP(t)}function VI(t){if(!tP(t))return iI(t);var e=[];for(var r in Object(t))Br.call(t,r)&&r!="constructor"&&e.push(r);return e}function GI(t){var e=YI(t);return e.length==1&&e[0][2]?gh(e[0][0],e[0][1]):function(r){return r===t||LI(r,t,e)}}function KI(t,e){return fc(t)&&fh(e)?gh(gc(t),e):function(r){var o=aP(r,t);return o===void 0&&o===e?cP(r,t):um(e,o,void 0,pc|us)}}function $I(t){return function(e){return ph(e,t)}}function HI(t){if(typeof t=="string")return t;if(mm(t))return WS?WS.call(t):"";var e=t+"";return e=="0"&&1/t==-am?"-0":e}function jI(t,e,r){var o=-1,n=VE,s=t.length,c=!0,u=[],p=u;if(r)c=!1,n=GE;else if(s>=ZS){var l=e?null:zI(t);if(l)return cm(l);c=!1,n=YE,p=new vi}else p=e?[]:u;e:for(;++o<s;){var d=t[o],g=e?e(d):d;if(d=r||d!==0?d:0,c&&g===g){for(var y=p.length;y--;)if(p[y]===g)continue e;e&&p.push(g),u.push(d)}else n(p,g,r)||(p!==u&&p.push(g),u.push(d))}return u}function lh(t){return Wo(t)?t:rP(t)}var zI=cs&&1/cm(new cs([,-0]))[1]==am?function(t){return new cs(t)}:pP;function mh(t,e,r,o,n,s){var c=n&us,u=t.length,p=e.length;if(u!=p&&!(c&&p>u))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var d=-1,g=!0,y=n&pc?new vi:void 0;for(s.set(t,e),s.set(e,t);++d<u;){var S=t[d],h=e[d];if(o)var w=c?o(h,S,d,e,t,s):o(S,h,d,t,e,s);if(w!==void 0){if(w)continue;g=!1;break}if(y){if(!KE(e,function(b,T){if(!y.has(T)&&(S===b||r(S,b,o,n,s)))return y.add(T)})){g=!1;break}}else if(!(S===h||r(S,h,o,n,s))){g=!1;break}}return s.delete(t),s.delete(e),g}function WI(t,e,r,o,n,s,c){switch(r){case cc:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ih:return!(t.byteLength!=e.byteLength||!o(new zS(t),new zS(e)));case XS:case JS:case rh:return yh(+t,+e);case eh:return t.name==e.name&&t.message==e.message;case oh:case nh:return t==e+"";case ic:var u=JE;case ac:var p=s&us;if(u||(u=cm),t.size!=e.size&&!p)return!1;var l=c.get(t);if(l)return l==e;s|=pc,c.set(t,e);var d=mh(u(t),u(e),o,n,s,c);return c.delete(t),d;case sh:if(Xl)return Xl.call(t)==Xl.call(e)}return!1}function ZI(t,e,r,o,n,s){var c=n&us,u=sm(t),p=u.length,l=sm(e),d=l.length;if(p!=d&&!c)return!1;for(var g=p;g--;){var y=u[g];if(!(c?y in e:Br.call(e,y)))return!1}var S=s.get(t);if(S&&s.get(e))return S==e;var h=!0;s.set(t,e),s.set(e,t);for(var w=c;++g<p;){y=u[g];var b=t[y],T=e[y];if(o)var v=c?o(T,b,y,e,t,s):o(b,T,y,t,e,s);if(!(v===void 0?b===T||r(b,T,o,n,s):v)){h=!1;break}w||(w=y=="constructor")}if(h&&!w){var P=t.constructor,C=e.constructor;P!=C&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof C=="function"&&C instanceof C)&&(h=!1)}return s.delete(t),s.delete(e),h}function dc(t,e){var r=t.__data__;return JI(e)?r[typeof e=="string"?"string":"hash"]:r.map}function YI(t){for(var e=sm(t),r=e.length;r--;){var o=e[r],n=t[o];e[r]=[o,n,fh(n)]}return e}function ls(t,e){var r=XE(t,e);return MI(r)?r:void 0}var lo=BI;(rm&&lo(new rm(new ArrayBuffer(1)))!=cc||bi&&lo(new bi)!=ic||om&&lo(om.resolve())!=qS||cs&&lo(new cs)!=ac||nm&&lo(new nm)!=em)&&(lo=function(t){var e=ps.call(t),r=e==is?t.constructor:void 0,o=r?Zo(r):void 0;if(o)switch(o){case aI:return cc;case cI:return ic;case uI:return qS;case pI:return ac;case lI:return em}return e});function XI(t,e,r){e=fc(e,t)?[e]:lh(e);for(var o,n=-1,c=e.length;++n<c;){var s=gc(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}if(o)return o;var c=t?t.length:0;return!!c&&lm(c)&&dh(s,c)&&(Wo(t)||Sh(t))}function dh(t,e){return e=e??YS,!!e&&(typeof t=="number"||ME.test(t))&&t>-1&&t%1==0&&t<e}function fc(t,e){if(Wo(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||mm(t)?!0:_E.test(t)||!DE.test(t)||e!=null&&t in Object(e)}function JI(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function eP(t){return!!HS&&HS in t}function tP(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||lc;return t===r}function fh(t){return t===t&&!yc(t)}function gh(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var rP=pm(function(t){t=iP(t);var e=[];return NE.test(t)&&e.push(""),t.replace(BE,function(r,o,n,s){e.push(n?s.replace(UE,"$1"):o||r)}),e});function gc(t){if(typeof t=="string"||mm(t))return t;var e=t+"";return e=="0"&&1/t==-am?"-0":e}function Zo(t){if(t!=null){try{return uh.call(t)}catch{}try{return t+""}catch{}}return""}function oP(t,e){return t&&t.length?jI(t,qI(e,2)):[]}function pm(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(AE);var r=function(){var o=arguments,n=e?e.apply(this,o):o[0],s=r.cache;if(s.has(n))return s.get(n);var c=t.apply(this,o);return r.cache=s.set(n,c),c};return r.cache=new(pm.Cache||Ur),r}pm.Cache=Ur;function yh(t,e){return t===e||t!==t&&e!==e}function Sh(t){return nP(t)&&Br.call(t,"callee")&&(!nI.call(t,"callee")||ps.call(t)==sc)}var Wo=Array.isArray;function hh(t){return t!=null&&lm(t.length)&&!wh(t)}function nP(t){return Sc(t)&&hh(t)}function wh(t){var e=yc(t)?ps.call(t):"";return e==th||e==vE}function lm(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=YS}function yc(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Sc(t){return!!t&&typeof t=="object"}function mm(t){return typeof t=="symbol"||Sc(t)&&ps.call(t)==sh}var sP=$S?ZE($S):OI;function iP(t){return t==null?"":HI(t)}function aP(t,e,r){var o=t==null?void 0:ph(t,e);return o===void 0?r:o}function cP(t,e){return t!=null&&XI(t,e,QI)}function sm(t){return hh(t)?NI(t):VI(t)}function uP(t){return t}function pP(){}function lP(t){return fc(t)?zE(gc(t)):$I(t)}as.exports=oP});var $h=ft((oj,Kh)=>{"use strict";i();a();Kh.exports=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}});var Yh=ft((Wh,Zh)=>{"use strict";i();a();var vc=$h(),{hasOwnProperty:jh}=Object.prototype,{propertyIsEnumerable:gF}=Object,fs=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,enumerable:!0,configurable:!0}),yF=Wh,Hh={concatArrays:!1,ignoreUndefined:!1},Tc=t=>{let e=[];for(let r in t)jh.call(t,r)&&e.push(r);if(Object.getOwnPropertySymbols){let r=Object.getOwnPropertySymbols(t);for(let o of r)gF.call(t,o)&&e.push(o)}return e};function gs(t){return Array.isArray(t)?SF(t):vc(t)?hF(t):t}function SF(t){let e=t.slice(0,0);return Tc(t).forEach(r=>{fs(e,r,gs(t[r]))}),e}function hF(t){let e=Object.getPrototypeOf(t)===null?Object.create(null):{};return Tc(t).forEach(r=>{fs(e,r,gs(t[r]))}),e}var zh=(t,e,r,o)=>(r.forEach(n=>{typeof e[n]>"u"&&o.ignoreUndefined||(n in t&&t[n]!==Object.getPrototypeOf(t)?fs(t,n,xm(t[n],e[n],o)):fs(t,n,gs(e[n])))}),t),wF=(t,e,r)=>{let o=t.slice(0,0),n=0;return[t,e].forEach(s=>{let c=[];for(let u=0;u<s.length;u++)jh.call(s,u)&&(c.push(String(u)),s===t?fs(o,n++,s[u]):fs(o,n++,gs(s[u])));o=zh(o,s,Tc(s).filter(u=>!c.includes(u)),r)}),o};function xm(t,e,r){return r.concatArrays&&Array.isArray(t)&&Array.isArray(e)?wF(t,e,r):!vc(e)||!vc(t)?gs(e):zh(t,e,Tc(e),r)}Zh.exports=function(...t){let e=xm(gs(Hh),this!==yF&&this||{},Hh),r={_:{}};for(let o of t)if(o!==void 0){if(!vc(o))throw new TypeError("`"+o+"` is not an Option Object");r=xm(r,{_:o},e)}return r._}});var Lw=ft((Ci,ws)=>{i();a();var NF=200,BF="Expected a function",Um="__lodash_hash_undefined__",Qc=1,bs=2,gw=1/0,yw=9007199254740991,Cc="[object Arguments]",km="[object Array]",Sw="[object Boolean]",hw="[object Date]",ww="[object Error]",bw="[object Function]",QF="[object GeneratorFunction]",kc="[object Map]",Aw="[object Number]",hs="[object Object]",iw="[object Promise]",vw="[object RegExp]",Rc="[object Set]",Tw="[object String]",xw="[object Symbol]",Rm="[object WeakMap]",Ew="[object ArrayBuffer]",Dc="[object DataView]",UF="[object Float32Array]",LF="[object Float64Array]",MF="[object Int8Array]",OF="[object Int16Array]",qF="[object Int32Array]",VF="[object Uint8Array]",GF="[object Uint8ClampedArray]",KF="[object Uint16Array]",$F="[object Uint32Array]",HF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jF=/^\w*$/,zF=/^\./,WF=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZF=/[\\^$.*+?()[\]{}|]/g,YF=/\\(\\)?/g,XF=/^\[object .+?Constructor\]$/,JF=/^(?:0|[1-9]\d*)$/,Ce={};Ce[UF]=Ce[LF]=Ce[MF]=Ce[OF]=Ce[qF]=Ce[VF]=Ce[GF]=Ce[KF]=Ce[$F]=!0;Ce[Cc]=Ce[km]=Ce[Ew]=Ce[Sw]=Ce[Dc]=Ce[hw]=Ce[ww]=Ce[bw]=Ce[kc]=Ce[Aw]=Ce[hs]=Ce[vw]=Ce[Rc]=Ce[Tw]=Ce[Rm]=!1;var Iw=typeof self=="object"&&self&&self.Object===Object&&self,eC=typeof self=="object"&&self&&self.Object===Object&&self,wo=Iw||eC||Function("return this")(),Pw=typeof Ci=="object"&&Ci&&!Ci.nodeType&&Ci,aw=Pw&&typeof ws=="object"&&ws&&!ws.nodeType&&ws,tC=aw&&aw.exports===Pw,cw=tC&&Iw.process,uw=function(){try{return cw&&cw.binding("util")}catch{}}(),pw=uw&&uw.isTypedArray;function rC(t,e,r,o){for(var n=-1,s=t?t.length:0;++n<s;){var c=t[n];e(o,c,r(c),t)}return o}function oC(t,e){for(var r=-1,o=t?t.length:0;++r<o;)if(e(t[r],r,t))return!0;return!1}function nC(t){return function(e){return e?.[t]}}function sC(t,e){for(var r=-1,o=Array(t);++r<t;)o[r]=e(r);return o}function iC(t){return function(e){return t(e)}}function aC(t,e){return t?.[e]}function Dm(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function cC(t){var e=-1,r=Array(t.size);return t.forEach(function(o,n){r[++e]=[n,o]}),r}function uC(t,e){return function(r){return t(e(r))}}function pC(t){var e=-1,r=Array(t.size);return t.forEach(function(o){r[++e]=o}),r}var lC=Array.prototype,mC=Function.prototype,Uc=Object.prototype,Fm=wo["__core-js_shared__"],lw=function(){var t=/[^.]+$/.exec(Fm&&Fm.keys&&Fm.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Fw=mC.toString,Or=Uc.hasOwnProperty,As=Uc.toString,dC=RegExp("^"+Fw.call(Or).replace(ZF,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mw=wo.Symbol,dw=wo.Uint8Array,fC=Uc.propertyIsEnumerable,gC=lC.splice,yC=uC(Object.keys,Object),_m=vs(wo,"DataView"),ki=vs(wo,"Map"),Nm=vs(wo,"Promise"),Bm=vs(wo,"Set"),Qm=vs(wo,"WeakMap"),Ri=vs(Object,"create"),SC=tn(_m),hC=tn(ki),wC=tn(Nm),bC=tn(Bm),AC=tn(Qm),_c=mw?mw.prototype:void 0,Cm=_c?_c.valueOf:void 0,fw=_c?_c.toString:void 0;function en(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function vC(){this.__data__=Ri?Ri(null):{}}function TC(t){return this.has(t)&&delete this.__data__[t]}function xC(t){var e=this.__data__;if(Ri){var r=e[t];return r===Um?void 0:r}return Or.call(e,t)?e[t]:void 0}function EC(t){var e=this.__data__;return Ri?e[t]!==void 0:Or.call(e,t)}function IC(t,e){var r=this.__data__;return r[t]=Ri&&e===void 0?Um:e,this}en.prototype.clear=vC;en.prototype.delete=TC;en.prototype.get=xC;en.prototype.has=EC;en.prototype.set=IC;function qr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function PC(){this.__data__=[]}function FC(t){var e=this.__data__,r=Lc(e,t);if(r<0)return!1;var o=e.length-1;return r==o?e.pop():gC.call(e,r,1),!0}function CC(t){var e=this.__data__,r=Lc(e,t);return r<0?void 0:e[r][1]}function kC(t){return Lc(this.__data__,t)>-1}function RC(t,e){var r=this.__data__,o=Lc(r,t);return o<0?r.push([t,e]):r[o][1]=e,this}qr.prototype.clear=PC;qr.prototype.delete=FC;qr.prototype.get=CC;qr.prototype.has=kC;qr.prototype.set=RC;function Vr(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var o=t[e];this.set(o[0],o[1])}}function DC(){this.__data__={hash:new en,map:new(ki||qr),string:new en}}function _C(t){return Mc(this,t).delete(t)}function NC(t){return Mc(this,t).get(t)}function BC(t){return Mc(this,t).has(t)}function QC(t,e){return Mc(this,t).set(t,e),this}Vr.prototype.clear=DC;Vr.prototype.delete=_C;Vr.prototype.get=NC;Vr.prototype.has=BC;Vr.prototype.set=QC;function Nc(t){var e=-1,r=t?t.length:0;for(this.__data__=new Vr;++e<r;)this.add(t[e])}function UC(t){return this.__data__.set(t,Um),this}function LC(t){return this.__data__.has(t)}Nc.prototype.add=Nc.prototype.push=UC;Nc.prototype.has=LC;function Mr(t){this.__data__=new qr(t)}function MC(){this.__data__=new qr}function OC(t){return this.__data__.delete(t)}function qC(t){return this.__data__.get(t)}function VC(t){return this.__data__.has(t)}function GC(t,e){var r=this.__data__;if(r instanceof qr){var o=r.__data__;if(!ki||o.length<NF-1)return o.push([t,e]),this;r=this.__data__=new Vr(o)}return r.set(t,e),this}Mr.prototype.clear=MC;Mr.prototype.delete=OC;Mr.prototype.get=qC;Mr.prototype.has=VC;Mr.prototype.set=GC;function KC(t,e){var r=ho(t)||Qw(t)?sC(t.length,String):[],o=r.length,n=!!o;for(var s in t)(e||Or.call(t,s))&&!(n&&(s=="length"||Dw(s,o)))&&r.push(s);return r}function Lc(t,e){for(var r=t.length;r--;)if(Bw(t[r][0],e))return r;return-1}function $C(t,e,r,o){return HC(t,function(n,s,c){e(o,n,r(n),c)}),o}var HC=ck(zC),jC=uk();function zC(t,e){return t&&jC(t,e,Bc)}function Cw(t,e){e=Oc(e,t)?[e]:kw(e);for(var r=0,o=e.length;t!=null&&r<o;)t=t[qc(e[r++])];return r&&r==o?t:void 0}function WC(t){return As.call(t)}function ZC(t,e){return t!=null&&e in Object(t)}function Lm(t,e,r,o,n){return t===e?!0:t==null||e==null||!Vc(t)&&!Gc(e)?t!==t&&e!==e:YC(t,e,Lm,r,o,n)}function YC(t,e,r,o,n,s){var c=ho(t),u=ho(e),p=km,l=km;c||(p=So(t),p=p==Cc?hs:p),u||(l=So(e),l=l==Cc?hs:l);var d=p==hs&&!Dm(t),g=l==hs&&!Dm(e),y=p==l;if(y&&!d)return s||(s=new Mr),c||bk(t)?Rw(t,e,r,o,n,s):pk(t,e,p,r,o,n,s);if(!(n&bs)){var S=d&&Or.call(t,"__wrapped__"),h=g&&Or.call(e,"__wrapped__");if(S||h){var w=S?t.value():t,b=h?e.value():e;return s||(s=new Mr),r(w,b,o,n,s)}}return y?(s||(s=new Mr),lk(t,e,r,o,n,s)):!1}function XC(t,e,r,o){var n=r.length,s=n,c=!o;if(t==null)return!s;for(t=Object(t);n--;){var u=r[n];if(c&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++n<s;){u=r[n];var p=u[0],l=t[p],d=u[1];if(c&&u[2]){if(l===void 0&&!(p in t))return!1}else{var g=new Mr;if(o)var y=o(l,d,p,t,e,g);if(!(y===void 0?Lm(d,l,o,Qc|bs,g):y))return!1}}return!0}function JC(t){if(!Vc(t)||gk(t))return!1;var e=Uw(t)||Dm(t)?dC:XF;return e.test(tn(t))}function ek(t){return Gc(t)&&qm(t.length)&&!!Ce[As.call(t)]}function tk(t){return typeof t=="function"?t:t==null?xk:typeof t=="object"?ho(t)?nk(t[0],t[1]):ok(t):Ek(t)}function rk(t){if(!yk(t))return yC(t);var e=[];for(var r in Object(t))Or.call(t,r)&&r!="constructor"&&e.push(r);return e}function ok(t){var e=mk(t);return e.length==1&&e[0][2]?Nw(e[0][0],e[0][1]):function(r){return r===t||XC(r,t,e)}}function nk(t,e){return Oc(t)&&_w(e)?Nw(qc(t),e):function(r){var o=vk(r,t);return o===void 0&&o===e?Tk(r,t):Lm(e,o,void 0,Qc|bs)}}function sk(t){return function(e){return Cw(e,t)}}function ik(t){if(typeof t=="string")return t;if(Vm(t))return fw?fw.call(t):"";var e=t+"";return e=="0"&&1/t==-gw?"-0":e}function kw(t){return ho(t)?t:Sk(t)}function ak(t,e){return function(r,o){var n=ho(r)?rC:$C,s=e?e():{};return n(r,t,tk(o,2),s)}}function ck(t,e){return function(r,o){if(r==null)return r;if(!Om(r))return t(r,o);for(var n=r.length,s=e?n:-1,c=Object(r);(e?s--:++s<n)&&o(c[s],s,c)!==!1;);return r}}function uk(t){return function(e,r,o){for(var n=-1,s=Object(e),c=o(e),u=c.length;u--;){var p=c[t?u:++n];if(r(s[p],p,s)===!1)break}return e}}function Rw(t,e,r,o,n,s){var c=n&bs,u=t.length,p=e.length;if(u!=p&&!(c&&p>u))return!1;var l=s.get(t);if(l&&s.get(e))return l==e;var d=-1,g=!0,y=n&Qc?new Nc:void 0;for(s.set(t,e),s.set(e,t);++d<u;){var S=t[d],h=e[d];if(o)var w=c?o(h,S,d,e,t,s):o(S,h,d,t,e,s);if(w!==void 0){if(w)continue;g=!1;break}if(y){if(!oC(e,function(b,T){if(!y.has(T)&&(S===b||r(S,b,o,n,s)))return y.add(T)})){g=!1;break}}else if(!(S===h||r(S,h,o,n,s))){g=!1;break}}return s.delete(t),s.delete(e),g}function pk(t,e,r,o,n,s,c){switch(r){case Dc:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Ew:return!(t.byteLength!=e.byteLength||!o(new dw(t),new dw(e)));case Sw:case hw:case Aw:return Bw(+t,+e);case ww:return t.name==e.name&&t.message==e.message;case vw:case Tw:return t==e+"";case kc:var u=cC;case Rc:var p=s&bs;if(u||(u=pC),t.size!=e.size&&!p)return!1;var l=c.get(t);if(l)return l==e;s|=Qc,c.set(t,e);var d=Rw(u(t),u(e),o,n,s,c);return c.delete(t),d;case xw:if(Cm)return Cm.call(t)==Cm.call(e)}return!1}function lk(t,e,r,o,n,s){var c=n&bs,u=Bc(t),p=u.length,l=Bc(e),d=l.length;if(p!=d&&!c)return!1;for(var g=p;g--;){var y=u[g];if(!(c?y in e:Or.call(e,y)))return!1}var S=s.get(t);if(S&&s.get(e))return S==e;var h=!0;s.set(t,e),s.set(e,t);for(var w=c;++g<p;){y=u[g];var b=t[y],T=e[y];if(o)var v=c?o(T,b,y,e,t,s):o(b,T,y,t,e,s);if(!(v===void 0?b===T||r(b,T,o,n,s):v)){h=!1;break}w||(w=y=="constructor")}if(h&&!w){var P=t.constructor,C=e.constructor;P!=C&&"constructor"in t&&"constructor"in e&&!(typeof P=="function"&&P instanceof P&&typeof C=="function"&&C instanceof C)&&(h=!1)}return s.delete(t),s.delete(e),h}function Mc(t,e){var r=t.__data__;return fk(e)?r[typeof e=="string"?"string":"hash"]:r.map}function mk(t){for(var e=Bc(t),r=e.length;r--;){var o=e[r],n=t[o];e[r]=[o,n,_w(n)]}return e}function vs(t,e){var r=aC(t,e);return JC(r)?r:void 0}var So=WC;(_m&&So(new _m(new ArrayBuffer(1)))!=Dc||ki&&So(new ki)!=kc||Nm&&So(Nm.resolve())!=iw||Bm&&So(new Bm)!=Rc||Qm&&So(new Qm)!=Rm)&&(So=function(t){var e=As.call(t),r=e==hs?t.constructor:void 0,o=r?tn(r):void 0;if(o)switch(o){case SC:return Dc;case hC:return kc;case wC:return iw;case bC:return Rc;case AC:return Rm}return e});function dk(t,e,r){e=Oc(e,t)?[e]:kw(e);for(var o,n=-1,c=e.length;++n<c;){var s=qc(e[n]);if(!(o=t!=null&&r(t,s)))break;t=t[s]}if(o)return o;var c=t?t.length:0;return!!c&&qm(c)&&Dw(s,c)&&(ho(t)||Qw(t))}function Dw(t,e){return e=e??yw,!!e&&(typeof t=="number"||JF.test(t))&&t>-1&&t%1==0&&t<e}function Oc(t,e){if(ho(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Vm(t)?!0:jF.test(t)||!HF.test(t)||e!=null&&t in Object(e)}function fk(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function gk(t){return!!lw&&lw in t}function yk(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Uc;return t===r}function _w(t){return t===t&&!Vc(t)}function Nw(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var Sk=Mm(function(t){t=Ak(t);var e=[];return zF.test(t)&&e.push(""),t.replace(WF,function(r,o,n,s){e.push(n?s.replace(YF,"$1"):o||r)}),e});function qc(t){if(typeof t=="string"||Vm(t))return t;var e=t+"";return e=="0"&&1/t==-gw?"-0":e}function tn(t){if(t!=null){try{return Fw.call(t)}catch{}try{return t+""}catch{}}return""}var hk=ak(function(t,e,r){t[r]=e});function Mm(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(BF);var r=function(){var o=arguments,n=e?e.apply(this,o):o[0],s=r.cache;if(s.has(n))return s.get(n);var c=t.apply(this,o);return r.cache=s.set(n,c),c};return r.cache=new(Mm.Cache||Vr),r}Mm.Cache=Vr;function Bw(t,e){return t===e||t!==t&&e!==e}function Qw(t){return wk(t)&&Or.call(t,"callee")&&(!fC.call(t,"callee")||As.call(t)==Cc)}var ho=Array.isArray;function Om(t){return t!=null&&qm(t.length)&&!Uw(t)}function wk(t){return Gc(t)&&Om(t)}function Uw(t){var e=Vc(t)?As.call(t):"";return e==bw||e==QF}function qm(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yw}function Vc(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Gc(t){return!!t&&typeof t=="object"}function Vm(t){return typeof t=="symbol"||Gc(t)&&As.call(t)==xw}var bk=pw?iC(pw):ek;function Ak(t){return t==null?"":ik(t)}function vk(t,e,r){var o=t==null?void 0:Cw(t,e);return o===void 0?r:o}function Tk(t,e){return t!=null&&dk(t,e,ZC)}function Bc(t){return Om(t)?KC(t):rk(t)}function xk(t){return t}function Ek(t){return Oc(t)?nC(qc(t)):sk(t)}ws.exports=hk});var Ji=ft(Ud=>{"use strict";i();a();Object.defineProperty(Ud,"__esModule",{value:!0});var AA=D();function FD(t){var e=AA.useRef();return AA.useEffect(function(){e.current=t}),e.current}Ud.default=FD});i();a();i();a();i();a();var Px=f.object({balance:f.boolean(),history:f.boolean()}),tU=f.record(f.string(),Px),mi=class extends Error{constructor(e){super(e),this.name="SetTermsAcknowledgementError"}};var Sy=async(t,e)=>{try{return await t.set("termsHaveBeenAcknowledgedLastSeenVersion",e)}catch{throw new mi("Error Setting Terms Acknowledgement")}},hy=async t=>{try{return await t.remove("termsHaveBeenAcknowledgedLastSeenVersion")}catch{throw new mi("Error Clearing Terms Acknowledgement")}};async function Fx(t){return(await t.get("onboardedAt"))?.onboardedAt}async function wy(t,e=Date.now()){e&&!await Fx(t)?await t.set("onboardedAt",{onboardedAt:e}):e||await t.remove("onboardedAt")}i();a();i();a();var Fy=k(vy(),1),Cy=k(Py(),1),sl=k(vx(),1),rs=(t=>(t.BLOCK="BLOCK",t.NONE="NONE",t))(rs||{});function Cx(t,e){for(let r=0;r<t.k;r++){let o=(0,Cy.default)(`${t.salt}_${e}_${r}`,{asBytes:!0}),s=sl.Buffer.from(o).subarray(0,4).readUInt32BE(0)%t.bits,c=Math.floor(s/24),u=sl.Buffer.from(t.bitVector.slice(c*4,c*4+4),"base64"),p=s%24,l=Math.floor(p/8),d=p%8;if(!(u[l]&1<<7-d))return!1}return!0}var EU=typeof self<"u"&&self.fetch?self.fetch:Fy.default;function il(t,e,r,o){let s=new URL(o).hostname.toLowerCase().split(".");for(let c=0;c<s.length-1;c++){let u=s.slice(c).join(".");if(e.includes(u)||Cx(t,u)&&!r.includes(u))return"BLOCK"}return"NONE"}var za=k(Dy());var Oy=k(By());i();a();var Qy="https://blocklist.phantom.app/multichain.json",ul="https://blowfish-blocklist-proxy.phantom.app",Mx="https://github.com/phantom-labs/blocklist",pl=(t=3)=>({retry:t,retryDelay:e=>Math.min(1e3*2**e,3e4)}),lr={SLIPPAGE_EXCEEDED:"SLIPPAGE_EXCEEDED",INSUFFICIENT_FUNDS:"INSUFFICIENT_FUNDS",INSUFFICIENT_GAS:"INSUFFICIENT_GAS",UNKNOWN_ERROR:"UNKNOWN_ERROR",SIMULATION_FAILED:"SIMULATION_FAILED",TRANSACTION_EXPIRED:"TRANSACTION_EXPIRED",ACCOUNT_FROZEN:"ACCOUNT_FROZEN",SIMULATION_TIMEOUT:"SIMULATION_TIMEOUT",STALE_QUOTE:"STALE_QUOTE"};function Ox(t){return{1:"1-critical-alert",2:"2-alert",3:"3-critical-error",4:"4-error",5:"5-information"}[t]}var Vx=3,fl=6e5,Gx=6e4,WU=f.object({type:f.union([f.literal("all"),f.literal("blocklist"),f.literal("whitelist"),f.literal("error"),f.literal("fuzzy"),f.literal("blowfishBloomFilter")]),result:f.boolean(),source:f.optional(f.string()),match:f.string().optional(),isSubdomainDomainWhitelisted:f.boolean().optional()}),ZU=f.object({localHash:f.any(),cursor:f.any()}),gl=f.object({bitVector:f.string(),k:f.number(),hash:f.string(),bits:f.number(),salt:f.string()}),qy=f.union([f.object({bloomFilter:gl,bloomFilterHash:f.string(),recentlyAdded:f.array(f.string()),recentlyRemoved:f.array(f.string()),nextCursor:f.string()}),f.object({bloomFilter:gl.optional(),bloomFilterHash:f.optional(f.string()),recentlyAdded:f.array(f.string()),recentlyRemoved:f.array(f.string()),nextCursor:f.string()})]),Vy=f.object({bloomFilter:gl,lastUpdated:f.number()}).nullish(),Gy=f.object({recentlyAdded:f.array(f.string()),recentlyRemoved:f.array(f.string()),lastUpdated:f.number().optional()}).nullish(),fi=class{blocklist;whitelist;fuzzylist;tolerance;constructor(e,r,o,n){this.blocklist=ll(e),this.whitelist=ll(r),this.fuzzylist=ll(o),this.tolerance=n||Vx}check(e,r){if(!e)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let o=Wa(e),n=yl(o);if($x(n,this.whitelist)){let p=new URL(e).hostname;if(ml(yl(p),this.blocklist)){let d={type:"blocklist",result:!0,source:p,isSubdomainDomainWhitelisted:!0};return r.capture("blockedDomain",{data:d}),d}else return{type:"whitelist",result:!1,source:p,isSubdomainDomainWhitelisted:!0}}if(ml(n,this.whitelist))return{type:"whitelist",result:!1,source:o,isSubdomainDomainWhitelisted:!1};if(ml(n,this.blocklist)){let p={type:"blocklist",result:!0,source:o,isSubdomainDomainWhitelisted:!1};return r.capture("blockedDomain",{data:p}),p}if(this.tolerance>0){let p=Uy(n);p=p.replace("www.","");let l=this.fuzzylist.find(d=>{let g=Uy(d);return Oy.default.get(p,g)<=this.tolerance});if(l)return{type:"fuzzy",result:!0,match:Kx(l),source:o,isSubdomainDomainWhitelisted:!1}}return{type:"all",result:!1,source:o,isSubdomainDomainWhitelisted:!1}}},Wa=t=>{let e=new URL(t).hostname.split(".");return e.slice(0).slice(-(e.length===4?3:2)).join(".")},ll=t=>t.map(yl),yl=t=>t.split(".").reverse(),Kx=t=>t.slice().reverse().join("."),Uy=t=>t.slice(1).reverse().join("."),ml=(t,e)=>e.some(r=>r.length>t.length?!1:r.every((o,n)=>t[n]===o)),$x=(t,e)=>e.some(r=>r[0]===t[0]&&r[1]===t[1]&&r[2]==="*"),Hx=async t=>{let e=(0,za.getBlocklist)(),r=await t.get("cachedBlocklistDiff"),o=null;try{o=JSON.parse(`${r}`)}catch(n){U.captureError(new Error(`Error parsing blocklist diff: ${n?.message}`),"generic")}if(o&&o.expiresAt&&o.expiresAt>Date.now())return new fi(e.blocklist.concat(o.blocklist),e.whitelist.concat(o.whitelist),e.fuzzylist.concat(o.fuzzylist));{let n={},s=(0,za.getVersion)();o&&(n.lastContentHash=`${o.contentHash}`),s&&(n.localBlocklistVersion=`${s}`);let c=await X.headers(n).get(Qy);if(c.status===200){let u=c.data;return u.expiresAt=Date.now()+fl,t.set("cachedBlocklistDiff",JSON.stringify(u)),new fi(e.blocklist.concat(u.blocklist),e.whitelist.concat(u.whitelist),e.fuzzylist.concat(u.fuzzylist))}else{if(c.status===304)return o.expiresAt=Date.now()+fl,t.set("cachedBlocklistDiff",JSON.stringify(o)),new fi(e.blocklist.concat(o.blocklist),e.whitelist.concat(o.whitelist),e.fuzzylist.concat(o.fuzzylist));throw new Error("Invalid response from blocklist")}}},Sl=async(t,e,r)=>{let o,n;try{let c=await Fa(e.getFeatureFlags(),1e3);o=!!c["kill-blowfish-blocklist-cursor"],n=!!c["kill-previous-blocklist"]}catch{o=!1,n=!1}let s;try{if(n)return o?My(r,t,e):Ly(r,t,e);{s=await Hx(t);let c=s.check(r,e);return c.type==="all"?o?My(r,t,e):Ly(r,t,e):c}}catch{return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}}},Ly=async(t,e,r)=>{if(!t)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let o=Wa(t),n=await e.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"]),s=n.cachedBloomFilter??null,c=n.cachedBloomFilterHash??null,u=n.cachedScanDataCursor??null,p=n.cachedScanDataRecents??null,l=null,d={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0},g=null;if(s){let S=Vy.safeParse(s);S.success?l=S.data:await dl(e)}if(p){let S=Gy.safeParse(p);S.success?d=S.data:await dl(e)}if(u){let h=f.string().safeParse(u);h.success?g=h.data:await dl(e)}if(!d||d.lastUpdated==null||Date.now()>d.lastUpdated+Gx){let S={localHash:c,cursor:g},h=await X.post(ul,S);if(h.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let w=h.data,b,T=qy.safeParse(w);if(T.success)b=T.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let v=[],P=[],C=typeof c=="string"&&b.bloomFilterHash?c!==b.bloomFilterHash:!1;d!=null&&!C&&(v=d.recentlyAdded,P=d.recentlyRemoved),v=v.concat(b.recentlyAdded),P=P.concat(b.recentlyRemoved),v=v.filter(G=>b.recentlyRemoved.indexOf(G)<0),P=P.filter(G=>b.recentlyAdded.indexOf(G)<0);let B={recentlyAdded:v,recentlyRemoved:P,lastUpdated:Date.now()};if(await e.set("cachedScanDataRecents",B),d=B,b.nextCursor!==g&&await e.set("cachedScanDataCursor",b.nextCursor),b.bloomFilter!=null){let G={bloomFilter:b.bloomFilter,lastUpdated:Date.now()};await Promise.all([e.set("cachedBloomFilter",G),e.set("cachedBloomFilterHash",b.bloomFilterHash)]),l=G}}if(!l)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let y=il(l.bloomFilter,d.recentlyAdded,d.recentlyRemoved,t);if(y===rs.BLOCK){let S={result:!0,source:o,type:"blowfishBloomFilter"};return r.capture("blockedDomain",{data:S}),S}else if(y===rs.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};async function dl(t){await t.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents","cachedScanDataCursor"])}var My=async(t,e,r)=>{if(!t)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let o=Wa(t),n=await e.getAll(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"]),s=n.cachedBloomFilter??null,c=n.cachedBloomFilterHash??null,u=n.cachedScanDataRecents??null,p=null,l={recentlyAdded:[],recentlyRemoved:[],lastUpdated:0};if(s){let g=Vy.safeParse(s);g.success?p=g.data:await e.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(u){let g=Gy.safeParse(u);g.success?l=g.data:await e.remove(["cachedBloomFilter","cachedBloomFilterHash","cachedScanDataRecents"])}if(!l||l.lastUpdated==null||Date.now()>l.lastUpdated+fl){let g={localHash:c},y=await X.post(ul,g);if(y.status!==200)return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let S=y.data,h,w=qy.safeParse(S);if(w.success)h=w.data;else return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1};let b={recentlyAdded:h.recentlyAdded,recentlyRemoved:h.recentlyRemoved,lastUpdated:Date.now()};if(await e.set("cachedScanDataRecents",b),l=b,h.bloomFilter!=null){let T={bloomFilter:h.bloomFilter,lastUpdated:Date.now()};await Promise.all([e.set("cachedBloomFilter",T),e.set("cachedBloomFilterHash",h.bloomFilterHash)]),p=T}}if(!p)return{type:"all",result:!1,isSubdomainDomainWhitelisted:!1};let d=il(p.bloomFilter,l.recentlyAdded,l.recentlyRemoved,t);if(d===rs.BLOCK){let g={result:!0,source:o,type:"blowfishBloomFilter"};return r.capture("blockedDomain",{data:g}),g}else if(d===rs.NONE)return{result:!1,type:"all",isSubdomainDomainWhitelisted:!1};return{result:!1,type:"error",isSubdomainDomainWhitelisted:!1}};i();a();i();a();var jx=t=>t/1e8;i();a();i();a();var Za={GREEN:"accentSuccess",RED:"accentAlert",WHITE:"textPrimary"};function Wx(t){switch(t){case"PLUS":return Za.GREEN;case"MINUS":return Za.RED;case"EQUAL":return Za.WHITE;default:return Za.WHITE}}function Zx(t){let e=t?.advancedDetails&&"safeguard"in t.advancedDetails?t?.advancedDetails?.safeguard:void 0;if(e?.recommended&&!e?.shouldBundle&&!e.error&&!e.verifyError&&e?.transactions&&e.transactions.length>0)return e.transactions}function Ky(t,e){if(t.params&&"safeguard"in t.params&&t.params.safeguard&&e?.advancedDetails&&"safeguard"in e.advancedDetails&&e.advancedDetails.safeguard?.transactions){let r=e.advancedDetails.safeguard;if(r.error)return r.error;let o=t.params.transactions,n=r.transactions;if(n){let s;try{ty(o,n)}catch(c){c instanceof es?s=c:c instanceof Error?s=es.createUnknownError(c.message):s=es.createUnknownError("Non error type",c)}if(s)return e.advancedDetails.safeguard.verifyError=s,s}}}function $y(t){if(t.advancedDetails&&"requestId"in t.advancedDetails)return t.advancedDetails.requestId}i();a();i();a();var hl=async(t,e,r)=>{let o=`/simulation/v1?language=${t}`,n=await X.api().post(o,{...r,chainId:r.networkID,appVersion:Ee,platform:$e,deviceId:e});if(!me(n))throw new Error("Failed to scan message");return n.data},gi=async(t,e,r)=>{let o=`/simulation/v1?language=${t}`,n={...r.params,...r.params&&"safeguard"in r.params?{safeguard:{...r.params.safeguard,lighthouseProgramId:ey}}:{}},s=await X.api().post(o,{...r,chainId:r.networkID,params:n,metadata:r.metadata,appVersion:Ee,platform:$e,deviceId:e});if(!me(s))throw new Error("Failed to scan transaction");let c=s.data,u=Ky(r,c);if(u instanceof es){let p=$y(c);U.captureMessage(`Verify error ${p??""}: ${u.message}`,"safeguard")}return c};var FL=f.union([f.literal("signTransaction"),f.literal("signAllTransactions"),f.literal("signAndSendTransaction"),f.literal("signAndSendAllTransactions")]);i();a();var Yx=0;function xt(t,e){let r=`atom${++Yx}`,o={toString(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&this.debugLabel?r+":"+this.debugLabel:r}};return typeof t=="function"?o.read=t:(o.init=t,o.read=Xx,o.write=Jx),e&&(o.write=e),o}function Xx(t){return t(this)}function Jx(t,e,r){return e(this,typeof r=="function"?r(t(this)):r)}var Hy=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,bl=t=>"init"in t,wl=t=>!!t.write,Xa=new WeakMap,Al=t=>{var e;return vl(t)&&!((e=Xa.get(t))!=null&&e[1])},eE=(t,e)=>{let r=Xa.get(t);if(r)r[1]=!0,r[0].forEach(o=>o(e));else if((import.meta.env?import.meta.env.MODE:void 0)!=="production")throw new Error("[Bug] cancelable promise not found")},tE=t=>{if(Xa.has(t))return;let e=[new Set,!1];Xa.set(t,e);let r=()=>{e[1]=!0};t.then(r,r),t.onCancel=o=>{e[0].add(o)}},vl=t=>typeof t?.then=="function",jy=t=>"v"in t||"e"in t,Ya=t=>{if("e"in t)throw t.e;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("v"in t))throw new Error("[Bug] atom state is not initialized");return t.v},zy=(t,e,r)=>{r.p.has(t)||(r.p.add(t),e.then(()=>{r.p.delete(t)},()=>{r.p.delete(t)}))},rE=(t,e,r,o)=>{var n;if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&r===t)throw new Error("[Bug] atom cannot depend on itself");e.d.set(r,o.n),Al(e.v)&&zy(t,e.v,o),(n=o.m)==null||n.t.add(t)},oE=Symbol.for("JOTAI.EXPERIMENTAL.FLUSHSTOREHOOK"),Wy=(...t)=>{let[e,r,o,n,s,c]=t,u=E=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!E)throw new Error("Atom is undefined or null");let F=e(E);return F||(F={d:new Map,p:new Set,n:0},r(E,F),s?.(E,x)),F},p=new WeakMap,l=new Map,d=new Set,g=new Set,y=()=>{var E;let F=[],Q=O=>{try{O()}catch(M){F.push(M)}};do{(E=x[oE])==null||E.call(x);let O=new Set,M=O.add.bind(O);l.forEach(N=>{var Z;return(Z=N.m)==null?void 0:Z.l.forEach(M)}),l.clear(),d.forEach(M),d.clear(),g.forEach(M),g.clear(),O.forEach(Q),l.size&&v()}while(l.size||d.size||g.size);if(F.length)throw F[0]},S=(E,F,Q)=>{let O="v"in F,M=F.v,N=Al(F.v)?F.v:null;if(vl(Q)){tE(Q);for(let Z of F.d.keys())zy(E,Q,u(Z));F.v=Q}else F.v=Q;delete F.e,(!O||!Object.is(M,F.v))&&(++F.n,N&&eE(N,Q))},h=E=>{var F;let Q=u(E);if(jy(Q)&&(Q.m&&p.get(E)!==Q.n||Array.from(Q.d).every(([we,Ke])=>h(we).n===Ke)))return Q;Q.d.clear();let O=!0,M=()=>{Q.m&&(B(E,Q),v(),y())},N=we=>{if(Hy(E,we)){let ke=u(we);if(!jy(ke))if(bl(we))S(we,ke,we.init);else throw new Error("no atom init");return Ya(ke)}let Ke=h(we);try{return Ya(Ke)}finally{rE(E,Q,we,Ke),O||M()}},Z,_,ye={get signal(){return Z||(Z=new AbortController),Z.signal},get setSelf(){return(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!wl(E)&&console.warn("setSelf function cannot be used with read-only atom"),!_&&wl(E)&&(_=(...we)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&O&&console.warn("setSelf function cannot be called in sync"),!O)return C(E,...we)}),_}};try{let we=o(E,N,ye);return S(E,Q,we),vl(we)&&((F=we.onCancel)==null||F.call(we,()=>Z?.abort()),we.then(M,M)),Q}catch(we){return delete Q.v,Q.e=we,++Q.n,Q}finally{O=!1}},w=E=>Ya(h(E)),b=E=>{var F;let Q=new Map;for(let O of((F=E.m)==null?void 0:F.t)||[]){let M=u(O);M.m&&Q.set(O,M)}for(let O of E.p)Q.set(O,u(O));return Q},T=E=>{let F=[E];for(;F.length;){let Q=F.pop();for(let[O,M]of b(Q))p.has(O)||(p.set(O,M.n),F.push(M))}},v=()=>{var E;let F=[],Q=new WeakSet,O=new WeakSet,M=Array.from(l);for(;M.length;){let[N,Z]=M[M.length-1];if(O.has(N)){M.pop();continue}if(Q.has(N)){p.get(N)===Z.n?F.push([N,Z,Z.n]):(p.delete(N),l.set(N,Z)),O.add(N),M.pop();continue}Q.add(N);for(let[_,ye]of b(Z))Q.has(_)||M.push([_,ye])}for(let N=F.length-1;N>=0;--N){let[Z,_,ye]=F[N],we=!1;for(let Ke of _.d.keys())if(Ke!==Z&&l.has(Ke)){we=!0;break}we&&(h(Z),B(Z,_),ye!==_.n&&(l.set(Z,_),(E=_.u)==null||E.call(_))),p.delete(Z)}},P=(E,...F)=>{let Q=!0,O=N=>Ya(h(N)),M=(N,...Z)=>{var _;let ye=u(N);try{if(Hy(E,N)){if(!bl(N))throw new Error("atom not writable");let we=ye.n,Ke=Z[0];S(N,ye,Ke),B(N,ye),we!==ye.n&&(l.set(N,ye),(_=ye.u)==null||_.call(ye),T(ye));return}else return P(N,...Z)}finally{Q||(v(),y())}};try{return n(E,O,M,...F)}finally{Q=!1}},C=(E,...F)=>{try{return P(E,...F)}finally{v(),y()}},B=(E,F)=>{var Q;if(F.m&&!Al(F.v)){for(let[O,M]of F.d)if(!F.m.d.has(O)){let N=u(O);G(O,N).t.add(E),F.m.d.add(O),M!==N.n&&(l.set(O,N),(Q=N.u)==null||Q.call(N),T(N))}for(let O of F.m.d||[])if(!F.d.has(O)){F.m.d.delete(O);let M=L(O,u(O));M?.t.delete(E)}}},G=(E,F)=>{var Q;if(!F.m){h(E);for(let O of F.d.keys())G(O,u(O)).t.add(E);if(F.m={l:new Set,d:new Set(F.d.keys()),t:new Set},(Q=F.h)==null||Q.call(F),wl(E)){let O=F.m,M=()=>{let N=!0,Z=(..._)=>{try{return P(E,..._)}finally{N||(v(),y())}};try{let _=c(E,Z);_&&(O.u=()=>{N=!0;try{_()}finally{N=!1}})}finally{N=!1}};g.add(M)}}return F.m},L=(E,F)=>{var Q;if(F.m&&!F.m.l.size&&!Array.from(F.m.t).some(O=>{var M;return(M=u(O).m)==null?void 0:M.d.has(E)})){let O=F.m.u;O&&d.add(O),delete F.m,(Q=F.h)==null||Q.call(F);for(let M of F.d.keys()){let N=L(M,u(M));N?.t.delete(E)}return}return F.m},x={get:w,set:C,sub:(E,F)=>{let Q=u(E),M=G(E,Q).l;return M.add(F),y(),()=>{M.delete(F),L(E,Q),y()}},unstable_derive:E=>Wy(...E(...t))};return x},nE=t=>{let e=new Set,r,o=0,n=t.unstable_derive((...u)=>{let[p,l,,d]=u;return r=p,u[1]=function(y,S){l(y,S);let h=S.h;S.h=()=>{h?.(),S.m?e.add(y):e.delete(y)}},u[3]=function(y,S,h,...w){return o?h(y,...w):d(y,S,h,...w)},u}),s=n.set;return Object.assign(n,{dev4_get_internal_weak_map:()=>({get:u=>{let p=r(u);if(!(!p||p.n===0))return p}}),dev4_get_mounted_atoms:()=>e,dev4_restore_atoms:u=>{s({read:()=>null,write:(l,d)=>{++o;try{for(let[g,y]of u)bl(g)&&d(g,y)}finally{--o}}})}})},Tl=()=>{let t=new WeakMap,e=Wy(r=>t.get(r),(r,o)=>t.set(r,o).get(r),(r,...o)=>r.read(...o),(r,...o)=>r.write(...o),(r,...o)=>{var n;return(n=r.unstable_onInit)==null?void 0:n.call(r,...o)},(r,...o)=>{var n;return(n=r.onMount)==null?void 0:n.call(r,...o)});return(import.meta.env?import.meta.env.MODE:void 0)!=="production"?nE(e):e},yi,Zy=()=>(yi||(yi=Tl(),(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&(globalThis.__JOTAI_DEFAULT_STORE__||(globalThis.__JOTAI_DEFAULT_STORE__=yi),globalThis.__JOTAI_DEFAULT_STORE__!==yi&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"))),yi);i();a();var Xe=k(D(),1);var Xy=(0,Xe.createContext)(void 0),Ja=t=>{let e=(0,Xe.useContext)(Xy);return t?.store||e||Zy()},Jy=({children:t,store:e})=>{let r=(0,Xe.useRef)(void 0);return!e&&!r.current&&(r.current=Tl()),(0,Xe.createElement)(Xy.Provider,{value:e||r.current},t)},El=t=>typeof t?.then=="function",eS=t=>{t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e})},sE=Xe.default.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(eS(t),t)}),xl=new WeakMap,Yy=t=>{let e=xl.get(t);return e||(e=new Promise((r,o)=>{let n=t,s=p=>l=>{n===p&&r(l)},c=p=>l=>{n===p&&o(l)},u=p=>{"onCancel"in p&&typeof p.onCancel=="function"&&p.onCancel(l=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&l===p)throw new Error("[Bug] p is not updated even after cancelation");El(l)?(xl.set(l,e),n=l,l.then(s(l),c(l)),u(l)):r(l)})};t.then(s(t),c(t)),u(t)}),xl.set(t,e)),e};function iE(t,e){let r=Ja(e),[[o,n,s],c]=(0,Xe.useReducer)(l=>{let d=r.get(t);return Object.is(l[0],d)&&l[1]===r&&l[2]===t?l:[d,r,t]},void 0,()=>[r.get(t),r,t]),u=o;(n!==r||s!==t)&&(c(),u=r.get(t));let p=e?.delay;if((0,Xe.useEffect)(()=>{let l=r.sub(t,()=>{if(typeof p=="number"){let d=r.get(t);El(d)&&eS(Yy(d)),setTimeout(c,p);return}c()});return c(),l},[r,t,p]),(0,Xe.useDebugValue)(u),El(u)){let l=Yy(u);return sE(l)}return u}function tS(t,e){let r=Ja(e);return(0,Xe.useCallback)((...n)=>{if((import.meta.env?import.meta.env.MODE:void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return r.set(t,...n)},[r,t])}function aE(t,e){return[iE(t,e),tS(t,e)]}i();a();var rS=f.enum(["Native","Fungible","SemiFungible","NonFungible","Unknown"]),_r=f.object({id:f.string(),displayName:f.string().optional(),logoURI:f.union([f.string(),f.null()]).optional(),tokenType:rS,decimals:f.number().optional(),symbol:f.string().optional(),isSpam:f.boolean().optional()}),oS=f.object({id:Ir,displayName:f.string(),logoURI:f.union([f.string(),f.null()]).optional()}),ec=f.object({token:_r,amount:f.string(),to:Ir,from:Ir}),Il=f.literal("UNCLASSIFIED_APP_INTERACTION"),Pl=f.literal("TOKEN_SEND"),Fl=f.literal("TOKEN_BURN"),Cl=f.literal("TOKEN_SWAP"),kl=f.literal("TOKEN_UNWRAP"),Rl=f.literal("WITHDRAW_STAKE"),Dl=f.literal("DEACTIVATE_STAKE"),_l=f.literal("STAKE"),Nl=f.literal("COLLECTIBLE_LIST"),Bl=f.literal("COLLECTIBLE_BUY_ITEM"),Ql=f.literal("COLLECTIBLE_CANCEL_BID"),Ul=f.literal("COLLECTIBLE_BID_ITEM"),Ll=f.literal("COLLECTIBLE_UNLIST"),Ml=f.literal("COLLECTIBLE_SELL_ITEM"),Ol=f.literal("CANCEL_TX"),ql=f.literal("TOKEN_APPROVAL"),Vl=f.literal("CANCEL_ORDER"),Gl=f.literal("COLLECTION_APPROVAL"),Kl=f.literal("BRIDGE_INIT"),cE=f.union([Il,Pl,Fl,Cl,kl,Rl,Dl,_l,Nl,Bl,Ql,Ul,Ll,Ml,Ol,ql,Vl,Gl,Kl]),nS=f.object({transactionType:Il,balanceChanges:f.array(ec),dapp:f.union([ar,f.null()]).optional()}),sS=f.object({transactionType:Pl,balanceChanges:f.array(ec).nonempty(),dapp:f.union([ar,f.null()]).optional()}),iS=f.object({transactionType:Fl,dapp:f.union([ar,f.null()]).optional(),token:_r,amount:f.string()}),aS=f.object({transactionType:Cl,dapp:f.union([ar,f.null()]).optional(),receiveToken:_r,sendToken:_r,receiveAmount:f.string(),sendAmount:f.string()}),cS=f.object({transactionType:kl,token:_r,amount:f.string()}),uS=f.object({transactionType:Rl,stakeAccount:Ir,amount:f.string()}),pS=f.object({transactionType:Dl,stakeAccount:Ir,amount:f.string()}),lS=f.object({transactionType:_l,stakeAccount:Ir,amount:f.string(),validatorName:f.string().optional(),validatorWebsite:f.string().optional(),keybaseUsername:f.string().optional()}),mS=f.object({transactionType:Ol}),ns=f.object({dapp:f.union([ar,f.null()]),itemAmount:f.string().optional(),item:_r,forAmount:f.string(),forAsset:_r,listingUrl:f.string().optional()}),dS=ns.merge(f.object({transactionType:Nl})),fS=ns.merge(f.object({transactionType:Bl})),gS=ns.merge(f.object({transactionType:Ql})),yS=ns.merge(f.object({transactionType:Ul})),SS=ns.merge(f.object({transactionType:Ll})),hS=ns.merge(f.object({transactionType:Ml})),wS=f.object({transactionType:ql,dapp:f.union([ar,f.null()]).optional(),token:_r,value:f.string().optional(),isApproved:f.boolean()}),bS=f.object({transactionType:Vl,dapp:f.union([ar,f.null()]).optional(),orderId:f.string()}),AS=f.object({transactionType:Gl,collection:oS,dapp:f.union([ar,f.null()]).optional(),isApproved:f.boolean()}),vS=f.object({transactionType:Kl,dapp:f.union([ar,f.null()]).optional(),balanceChanges:f.array(ec).nonempty(),explorerUrl:f.string().optional()}),TS=f.enum(["success","failed"]),xS=f.object({networkFee:f.string().optional(),networkFeePayer:f.string().optional(),status:TS,errorMessage:f.union([f.string(),f.null()]),blockNumber:f.string(),chainId:ir,transactionId:f.string()}),tc=f.object({timestamp:f.number(),owner:Ir,id:Ir,interactionData:f.union([nS,sS,iS,aS,cS,uS,pS,lS,dS,fS,gS,yS,SS,hS,mS,wS,bS,AS,vS]),chainMeta:xS}),it=t=>t.split("/")[1]?.split(":").slice(1).join(":");i();a();var Ho=t=>{switch(t){case"SemiFungible":case"NonFungible":return!0;default:return!1}},$l=(t,e)=>{let r=it(t.to),o=it(t.from),n=e.some(c=>c.address.toLowerCase()===r.toLowerCase()),s=e.some(c=>c.address.toLowerCase()===o.toLowerCase());return n&&!s};i();a();var Hl=k(D());i();a();var ES=({interactionData:t,isError:e,selectedAccountAddresses:r,getKnownAddressLabel:o,start:n,networkID:s})=>{let u=t.balanceChanges[0],{token:{symbol:p,displayName:l,tokenType:d,decimals:g},amount:y}=u,S=$l(u,r),h=Ho(d),b=uE({isCollectible:h,sign:S?"+":"-",amount:y,decimals:g,tokenSymbol:p,tokenType:d,isError:e});if(S){let P=it(u.from),C=zp(P,void 0,o(P,s));return{topLeft:{text:`${R.t("transactionsReceived")} ${h?l||R.t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${b}`,color:"accentSuccess"},bottomLeft:{text:R.t("transactionsFromParagraphInterpolated",{from:C,defaultValue:`From ${C}`})},start:n}}let T=it(u.to),v=zp(T,void 0,o(T,s));return{topLeft:{text:e?R.t("transactionsSendFailed"):`${R.t("transactionsSent")} ${h?l||R.t("richTransactionDetailUnknownNFT"):""}`},topRight:{text:`${b}`,color:"textPrimary"},bottomLeft:{text:R.t("transactionsToParagraphInterpolated",{to:v,defaultValue:`To ${v}`})},start:n}};function uE({isCollectible:t,sign:e,amount:r,decimals:o,tokenSymbol:n,tokenType:s,isError:c}){return c||o===void 0||s==="NonFungible"?"":t?`${e}${yt(r,o)}`:`${e}${yt(r,o)}${n?` ${nr(n,6)}`:""}`}var pE=["So11111111111111111111111111111111111111112","501"],lE=(t,e,r,o,n)=>{let{interactionData:s,chainMeta:c}=t,{transactionType:u}=s,p=c.status==="failed",l=c.chainId,d=I.getTokenSymbol(l),g=I.getTokenDecimals(l),y=e("historyUnknownDappName"),S=Hl.default.createElement(r,{activityItem:t,size:"small",isDetailViewOrSvg:!1});switch(u){case"TOKEN_SEND":return ES({interactionData:s,isError:p,selectedAccountAddresses:n,getKnownAddressLabel:o,start:S,networkID:l});case"TOKEN_BURN":{let{amount:h,token:w}=s,b="";return w.displayName?h==="1"?b=w.displayName:b=`${w.displayName} (${h})`:b=e("richTransactionDetailUnknownNFT"),{topLeft:{text:p?`${e("transactionsFailedBurn")}`:`${e("transactionsBurned")}`},bottomLeft:{text:b},start:S}}case"TOKEN_UNWRAP":{let{amount:h,token:w}=s;return{topLeft:{text:p?`${e("transactionsUnwrappedFailed")}`:`${e("transactionsUnwrapped")}`},topRight:{text:p?"":`${yt(h,w.decimals??0)} ${w.symbol}`,color:"textPrimary"},start:S}}case"TOKEN_SWAP":{let{receiveAmount:h,receiveToken:w,sendAmount:b,sendToken:T,dapp:v}=s,P=v?v.displayName:e("historyUnknownDappName"),C=si(it(T.id)||""),B=si(it(w.id)||""),G="";!p&&w.decimals!==void 0&&(G=`+${yt(h,w.decimals)} ${nr(w.symbol||B,6)}`);let L="";return!p&&T.decimals!==void 0&&(L=`-${yt(b,T.decimals)} ${nr(T.symbol||C,6)}`),{topLeft:{text:e(p?"transactionsFailedSwap":"transactionsSwapped")},topRight:{text:G,color:"accentSuccess"},bottomLeft:{text:P},bottomRight:{text:L,color:"textPrimary"},start:S}}case"BRIDGE_INIT":{let h=s.dapp?s.dapp.displayName:y,b=s.balanceChanges[0],{token:{symbol:T,decimals:v},amount:P}=b,C=T?` ${nr(T,6)}`:"";if(!p&&v!==void 0){let B=`-${yt(P,v)}${C}`;return{topLeft:{text:p?e("transactionBridgeInitiatedFailed"):`${e("transactionBridgeInitiated")}`},bottomLeft:{text:h},topRight:{text:`${B}`,color:"textPrimary"},start:S}}return{topLeft:{text:p?e("transactionBridgeInitiatedFailed"):`${e("transactionBridgeInitiated")}`},bottomLeft:{text:h},start:S}}case"WITHDRAW_STAKE":{let{amount:h,stakeAccount:w}=s,b=it(w),T=I.getTokenSymbol(l);return{topLeft:{text:e(p?"transactionsWithdrawStakeFailed":"transactionsWithdrawStake")},topRight:{text:p?"":`${yt(h,g)} ${nr(T,6)}`,color:"textPrimary"},bottomLeft:{text:_a(b,4)},start:S}}case"DEACTIVATE_STAKE":{let{stakeAccount:h}=s,w=it(h);return{topLeft:{text:e(p?"transactionsDeactivateStakeFailed":"transactionsDeactivateStake")},bottomLeft:{text:_a(w,4)},start:S}}case"STAKE":{let{amount:h,stakeAccount:w,validatorName:b}=s,T=it(w);return{topLeft:{text:e(p?"transactionsStakedFailed":"transactionsStaked")},topRight:{text:p?"":`${yt(h,g)} ${nr(d,6)}`,color:"textPrimary"},bottomLeft:{text:b||_a(T,4)},start:S}}case"COLLECTIBLE_LIST":{let{dapp:h,item:w}=s,b=h?h.displayName:e("historyUnknownDappName"),T=w.displayName||e("richTransactionDetailUnknownNFT");return{topLeft:{text:p?e("transactionsListedFailed"):e("transactionsListedInterpolated",{name:T})},bottomLeft:{text:b},start:S}}case"COLLECTIBLE_BUY_ITEM":{let{dapp:h,itemAmount:w,item:b,forAsset:T,forAmount:v}=s,P=h?h.displayName:e("historyUnknownDappName"),C=IS(v,T.decimals,nr(T.symbol||"",6)),B=b.symbol||si(it(b.id)),G=w&&b.tokenType==="SemiFungible"?`+${w} ${B}`:`+${B}`;return{topLeft:{text:e(p?"transactionsBuyFailed":"transactionsBoughtCollectible")},topRight:{text:p?"":G,color:"accentSuccess"},bottomRight:{text:p?"":`${C}`,color:"textPrimary"},bottomLeft:{text:P},start:S}}case"COLLECTIBLE_CANCEL_BID":{let{dapp:h,item:w}=s,b=h?h.displayName:e("historyUnknownDappName"),T=w.displayName||e("richTransactionDetailUnknownNFT");return{topLeft:{text:p?e("transactionsCancelBidOnFailed"):e("transactionsCancelBidOnInterpolated",{name:T})},bottomLeft:{text:b},start:S}}case"COLLECTIBLE_BID_ITEM":{let{dapp:h,item:w}=s,b=h?h.displayName:e("historyUnknownDappName"),T=w.displayName||e("richTransactionDetailUnknownNFT");return{topLeft:{text:p?e("transactionsBidFailed"):e("transactionsBidOnInterpolated",{name:T})},bottomLeft:{text:b},start:S}}case"COLLECTIBLE_UNLIST":{let{dapp:h,item:w}=s,b=h?h.displayName:e("historyUnknownDappName"),T=w.displayName||e("richTransactionDetailUnknownNFT");return{topLeft:{text:p?e("transactionsUnlistedFailed"):e("transactionsUnlistedInterpolated",{name:T})},bottomLeft:{text:b},start:S}}case"COLLECTIBLE_SELL_ITEM":{let{dapp:h,itemAmount:w,item:b,forAsset:T,forAmount:v}=s,P=h?h.displayName:e("historyUnknownDappName"),C=T.decimals!==void 0?`+${yt(v,T.decimals)} ${nr(T.symbol||"",6)}`:e("transactionsUnknownAmount"),B=b.symbol||si(it(b.id)),G=w&&b.tokenType==="SemiFungible"?`-${w} ${B}`:`-${B}`;return{topLeft:{text:e(p?"transactionsSoldFailed":"transactionsSoldCollectible")},topRight:{text:p?"":`${C}`,color:"accentSuccess"},bottomRight:{text:p?"":G,color:"textPrimary"},bottomLeft:{text:P},start:S}}case"CANCEL_TX":return{topLeft:{text:e(p?"transactionCancelledFailed":"transactionCancelled")},start:S};case"TOKEN_APPROVAL":{let{dapp:h,token:w,isApproved:b}=s,T=Ho(w.tokenType)?w.displayName:w.symbol,v;return p?b?Ho(w.tokenType)?v=e("transactionApproveTokenFailed",{tokenSymbol:T}):v=e("transactionApprovalFailed"):Ho(w.tokenType)?v=e("transactionRevokeApproveTokenFailed",{tokenSymbol:T}):v=e("transactionRevokeFailed"):b?v=e("transactionApproveToken",{tokenSymbol:T}):v=e("transactionRevokeApproveToken",{tokenSymbol:T}),{topLeft:{text:v},bottomLeft:{text:h?h.displayName:y,color:"textTertiary"},start:S}}case"COLLECTION_APPROVAL":{let{collection:h,isApproved:w,dapp:b}=s,T=h.displayName,v;return p?w?v=e("transactionApproveTokenFailed",{tokenSymbol:T}):v=e("transactionRevokeApproveTokenFailed",{tokenSymbol:T}):w?v=e("transactionApproveToken",{tokenSymbol:T}):v=e("transactionRevokeApproveToken",{tokenSymbol:T}),{topLeft:{text:v},bottomLeft:{text:b?b.displayName:y,color:"textTertiary"},start:S}}case"CANCEL_ORDER":{let{dapp:h}=s;return{topLeft:{text:e(p?"transactionCancelOrderFailed":"transactionCancelOrder")},bottomLeft:{text:h?.displayName||e("historyUnknownDappName"),color:"textTertiary"},start:S}}case"UNCLASSIFIED_APP_INTERACTION":{let{dapp:h}=s,w=h?h.displayName:y;return{topLeft:{text:e(p?"transactionsFailedAppInteraction":"transactionsAppInteraction")},bottomLeft:{text:w},start:S}}}},mE=(t,e)=>{let{display:r,type:o}=t,{topLeft:n,topRight:s,bottomLeft:c,bottomRight:u}=r.summary,p=Hl.default.createElement(e,{logoUri:r.summary.logoUri,pendingTransactionType:o,size:"small"});return{topLeft:n,topRight:s,bottomLeft:c,bottomRight:u,start:p}},jl=(t,e,r)=>{let o=(t??[]).map(jg);if(e){let n=o.find(s=>s.chainId===e)?.address;if(n){let s={chainId:e,address:n};r&&(s.filters=[{type:"token",value:r}]),o=[s]}}return o},zl=t=>{if(!t)return;let e=$(t);if(e.resourceType!=="nativeToken")return t.type==="SPL"?t.data.splTokenAccountPubkey:e.address},dE=(t,e)=>{let r=it(t.id);return pE.includes(r)&&(t.tokenType="Native"),t.tokenType==="Native"?{chainId:e,slip44:I.getSlip44(e),resourceType:"nativeToken"}:{chainId:e,address:r,resourceType:"address"}},IS=(t,e,r)=>{if(!t||!e)return R.t("transactionsUnknownAmount");let o=fe(t,e),n=o.abs(),s=o.isZero()?"":o.isPositive()?"-":"+",c=Tt(n);return`${s}${c} ${r}`};i();a();i();a();i();a();var po={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!0};var PS={...po};i();a();var FS={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};i();a();var CS={...po,showTimeToMineRowInPendingTransactionDetail:!0};i();a();var kS={...po};i();a();var RS={...po};i();a();var DS={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};i();a();var _S={showTimeToMineRowInPendingTransactionDetail:!1,showFeeRowInPendingTransactionDetail:!1};var fE=new Wn({solana:DS,ethereum:CS,polygon:RS,monad:kS,base:PS,bitcoin:FS,sui:_S}),NS=zn(fE);i();a();i();a();i();a();var OS=k(D());i();a();var LS=k(D());i();a();var gE=10,yE="/history/v2",ss=class extends Error{message="406: Cache bust!"},Si=class extends Error{message="Server response malformed."},rc=class extends Error{},oc=class extends Error{},Wl=f.object({next:f.union([f.null(),f.string()]),results:f.array(tc)}),BS=async t=>{let e=await X.api().retry(3,2e3).post(`${yE}`,t);if(e.status===406)throw new ss;if(e.status>=400&&e.status<500)throw new oc(`FetchActivityItem: Status code: ${e.status}`);if(e.status>=500)throw new rc(`FetchActivityItem: Status code: ${e.status}`);return e.data},QS=t=>!Array.isArray(t.results)||typeof t.next!="string"&&t.next!==null,nc=async t=>{let e=await BS(t);if(QS(e))throw new Si;for(;e.results?.length<gE&&e.next;){if(QS(e))throw new Si;let r=await BS({next:e.next,isSpam:t.isSpam});e.next=r.next,e.results=[...e.results,...r.results]}try{return Wl.parse(e)}catch(r){let o=r,n=[],s=o.issues;for(let p=0;p<s.length;++p){let l=s[p].path;if(l[0]!=="results")throw U.captureError(o,"history"),o;let d=l[1];if(typeof d!="number")throw U.captureError(o,"history"),o;n.push(d)}n.sort(function(p,l){return l-p});let c=n.map(p=>e.results[p]).map(p=>p.interactionData?.transactionType||""),u=[];for(let p=0;p<n.length;++p){let l=n[p],d=e.results[l],g={timestamp:d?.timestamp,owner:d?.owner,id:d?.id,chainMeta:d?.chainMeta,interactionData:{transactionType:"UNCLASSIFIED_APP_INTERACTION",balanceChanges:[]}};try{tc.parse(g),e.results[l]=g,u.push(l)}catch{}}for(let p=0;p<n.length;++p){let l=n[p];u.indexOf(l)===-1&&e.results.splice(l,1)}n.length&&console.error(`Removed history items, ${c.join(",")}`);try{return Wl.parse(e)}catch(p){let l=p;throw U.captureError(l,"history"),l}}};var SE=3e5,hi="fetch-infinite-activity-items",MS=({accounts:t,isSpam:e})=>[hi,t,e],hE=(t,e)=>{t.removeQueries({queryKey:e})},Zl=({accounts:t,isSpam:e})=>{let r=ee();(0,LS.useEffect)(()=>()=>{r.cancelQueries({queryKey:[hi],exact:!1})},[r]);let o=MS({accounts:t,isSpam:e});return $t({queryKey:o,queryFn:async({pageParam:c})=>{try{let u;c&&c!==""?u=await nc({next:c,isSpam:e}):u=await nc({accounts:t||[],isSpam:e});let p=u.results.map(l=>(l.interactionData.transactionType==="TOKEN_SEND"&&l.interactionData.balanceChanges.sort(wE(t)),l));return{...u,results:p}}catch(u){u instanceof ss&&hE(r,o),U.captureError(u,"history")}},getNextPageParam:c=>c?.next,staleTime:SE,retry:!1,enabled:!!t?.length&&t.every(c=>!I.isLocalNetworkID(c.chainId)),initialPageParam:""})};function wE(t){return(e,r)=>{let o=US(e,t),n=US(r,t);return o?-1:n?1:0}}function US(t,e){let r=t.to.split("/address:")[1],o=t.from.split("/address:")[1];return e.some(n=>n.address.toLowerCase()===r.toLowerCase()||n.address.toLowerCase()===o.toLowerCase())}var bE=({fungible:t,isSpam:e=!1})=>{let{data:r=Ig,status:o}=Ng(),n=r.isDeveloperMode,s=zl(t),{data:c}=Go({address:t?.data.walletAddress,networkID:t?.data.chain.id}),u=(0,OS.useMemo)(()=>jl(c?[c]:[],t?.data.chain.id,s),[c,t?.data.chain.id,s]),p=Zl({accounts:u,isSpam:e}),l=p.isPending||o==="pending";return{activityItemsData:p,isLoadingHistory:l,isDeveloperMode:n}};i();a();var hc=k(D());i();a();var Ph=k(Ix()),Fh=k(bh());var mP=f.object({domain:f.string(),url:f.string(),name:f.string(),category:f.string(),imageUrl:f.string()}),Ch=f.object({uuid:f.string(),data:f.array(mP)}),dP=f.object({chainId:ir,address:f.string(),name:f.string(),symbol:f.string(),logoUrl:f.string(),marketCap:f.number(),price:f.number(),priceChange:f.number(),volume:f.number(),volumeChange:f.number()}),kh=f.object({items:f.array(dP)}),fP=f.object({paymentTokenId:f.string(),name:f.string(),symbol:f.string(),decimals:f.number()}),gP=f.object({verified:f.boolean(),collectionUrl:f.string(),marketplaceId:f.string(),marketplaceName:f.string(),marketplaceCollectionId:f.string()}),yP=f.object({marketplaceId:f.string(),paymentToken:fP,value:f.string()}),SP=f.object({id:f.string(),name:f.string(),volume:f.string().optional(),volumePercentChange:f.number(),marketplacePages:f.array(gP),floorPrices:f.array(yP),imageUrl:f.string()}),Rh=f.object({uuid:f.string(),data:f.array(SP)}),hP=["tokens","sites","collections","learn","suggested-users-to-follow"],Yo=f.enum(["shortcuts","carousel",...hP]),wP=f.object({type:f.literal(Yo.enum.shortcuts)}),bP=f.object({type:f.literal(Yo.enum.carousel)}),AP=f.object({type:f.literal(Yo.enum["suggested-users-to-follow"]),limit:f.number()}),Ti="all_networks",ms=f.union([ir,f.literal(Ti)]),vP=["asc","desc"],TP=f.enum(vP),xP=["rank","volume","price","price-change","market-cap"],Ah=f.enum(xP),EP=["1h","24h","7d","30d"],vh=f.enum(EP),IP=f.object({type:f.literal(Yo.enum.tokens),sortBy:f.array(Ah).refine(t=>new Set(t).size===t.length),sortByDefault:Ah,sortDirectionDefault:TP,network:f.array(ms).refine(t=>new Set(t).size===t.length),networkDefault:ms,timeFrame:f.array(vh).refine(t=>new Set(t).size===t.length),timeFrameDefault:vh,rankAlgo:f.string(),limit:f.number(),listLimit:f.number()}),PP=["top","rank"],Th=f.enum(PP),FP=["24h","7d","30d"],xh=f.enum(FP),CP=f.object({type:f.literal(Yo.enum.sites),sortBy:f.array(Th).refine(t=>new Set(t).size===t.length),sortByDefault:Th,network:f.array(ms).refine(t=>new Set(t).size===t.length),networkDefault:ms,timeFrame:f.array(xh).refine(t=>new Set(t).size===t.length),timeFrameDefault:xh,rankAlgo:f.string(),limit:f.number(),listLimit:f.number()}),kP=["top","rank"],Eh=f.enum(kP),RP=["24h","7d","30d"],Ih=f.enum(RP),DP=f.object({type:f.literal(Yo.enum.collections),sortBy:f.array(Eh).refine(t=>new Set(t).size===t.length),sortByDefault:Eh,network:f.array(ms).refine(t=>new Set(t).size===t.length),networkDefault:ms,timeFrame:f.array(Ih).refine(t=>new Set(t).size===t.length),timeFrameDefault:Ih,rankAlgo:f.string(),limit:f.number(),listLimit:f.number()}),_P=f.object({type:f.literal(Yo.enum.learn),limit:f.number()}),NP=f.discriminatedUnion("type",[wP,bP,AP,IP,CP,DP,_P]),dm=f.object({sections:f.array(NP).refine(t=>(0,Ph.default)(t,(0,Fh.default)(t,"type")))}),ZO=f.object({uuid:f.string(),data:f.array(ag)});var BP=dm.parse({sections:[{type:"shortcuts"},{type:"carousel"},{type:"tokens",sortBy:["rank","volume","price","price-change","market-cap"],sortByDefault:"rank",sortDirectionDefault:"asc",network:["solana:101","eip155:1","eip155:137","eip155:8453","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["1h","24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:100},{type:"suggested-users-to-follow",limit:3,listLimit:100},{type:"sites",sortBy:["rank","top"],sortByDefault:"rank",network:["solana:101","eip155:1","eip155:137","eip155:8453","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"collections",sortBy:["rank","top"],sortByDefault:"rank",network:["solana:101","eip155:1","eip155:137","bip122:000000000019d6689c085ae165831e93","all_networks"],networkDefault:"solana:101",timeFrame:["24h","7d","30d"],timeFrameDefault:"24h",rankAlgo:"default",limit:3,listLimit:50},{type:"learn",limit:3}]}),fm=()=>{let t=Qe.getMultivariateAssignment("explore-config"),e=ot;return(0,hc.useMemo)(()=>{let r;try{r=dm.parse(JSON.parse(t??""))}catch{r=BP}return e||(r={...r,sections:r.sections.filter(o=>o.type!=="suggested-users-to-follow")}),r},[t,e])},gm=()=>{let t=fm();return(0,hc.useMemo)(()=>{let e=[];for(let r of t.sections)(r.type==="collections"||r.type==="tokens"||r.type==="sites"||r.type==="learn"||r.type==="suggested-users-to-follow")&&e.push(r);return e},[t.sections])},ym=t=>{let e=fm();return(0,hc.useMemo)(()=>e.sections.find(o=>o.type===t)??null,[e.sections,t])};i();a();i();a();i();a();i();a();i();a();var QP=f.object({type:f.literal("fungible"),data:ny}),Dh=f.object({results:f.array(f.any()).transform(t=>t.reduce((e,r)=>{let o=QP.safeParse(r);return o.success&&e.push(o.data),e},[])),prevCursor:f.string().nullish().default(null),nextCursor:f.string().nullish().default(null),hasMore:f.boolean()});async function _h(t){let{query:e,networkIds:r,searchContext:o,supportedNetworkIds:n,pageSize:s=50}=t,c=await X.api().headers({"Content-Type":"application/json"}).get("/search/v1",{params:{query:e.trim(),chainIds:r.join(","),platform:$e,pageSize:s.toString(),searchTypes:"fungible",searchContext:o,...n&&{supportedNetworkIds:n.join(",")}}});if(!me(c))throw new Ne({key:"UnknownError"});let u=Dh.safeParse(c.data);if(u.success)return u.data;throw new Ne({key:"UnknownError"})}i();a();var Sm=t=>{let e=t.data,r=Xp(e)??void 0;return{type:e.type,data:{...e.data,tokenAddress:Xp(e)??void 0,key:r}}};i();a();var UP="search",Nh={searchResults:(t,e,r,o)=>[UP,{query:t,networkIds:e,supportedNetworkIds:o,chainAddresses:r}]};i();a();var hm=(s=>(s[s.Always=1/0]="Always",s[s.Short=J({minutes:5})]="Short",s[s.Medium=J({minutes:30})]="Medium",s[s.Long=J({hours:1})]="Long",s[s.Never=0]="Never",s))(hm||{}),wm=(n=>(n[n.Immediate=0]="Immediate",n[n.Short=J({minutes:5})]="Short",n[n.Medium=J({minutes:30})]="Medium",n[n.Long=J({hours:1})]="Long",n))(wm||{});var LP=async t=>(await _h(t)).results.map(r=>Sm(r)),Xo=({query:t,networkIds:e,enableQuery:r=!0,keepPreviousData:o=!1,searchContext:n,supportedNetworkIds:s,chainAddresses:c,pageSize:u})=>{let p=Nh.searchResults(t,e,c,s);return re({queryKey:p,gcTime:hm.Short,staleTime:wm.Short,enabled:r,placeholderData:o?pg:void 0,queryFn:()=>LP({query:t,networkIds:e,searchContext:n,supportedNetworkIds:s,pageSize:u})})};i();a();i();a();i();a();var Et=J({days:1}),mr=J({seconds:5}),Bh=J({seconds:30});i();a();i();a();var Ue=({name:t,response:e,current:r,target:o})=>{let n=`Failed to ${t}: 
`,s=[r!==void 0?`Current: ${r}`:null,o!==void 0?`Target: ${o}`:null].filter(Boolean);return s.length>0&&(n+=`${s.join(" | ")} 
`),n+=`${e.status} ${e.statusText} 
`,n+=`${JSON.stringify(e.data)}`,n},jt=({name:t,error:e,current:r,target:o})=>{let n=`Failed to parse ${t}: 
`,s=[r!==void 0?`Current: ${r}`:null,o!==void 0?`Target: ${o}`:null].filter(Boolean);return s.length>0&&(n+=`${s.join(" | ")} 
`),n+=`${JSON.stringify(e)}`,n};async function Qh(t){let e=await X.api().bearer(!0).headers({Accept:"application/activity+json"}).get(`/v1/actors/${t}`);if(!me(e)){let o=new Error(Ue({name:"getActor",response:e,target:t}));throw U.captureError(o,"profiles"),o}let r=Fr.safeParse(e.data);if(r.success)return r.data;{let o=new Error(jt({name:"getActor",error:r.error,target:t}));throw U.captureError(o,"profiles"),o}}i();a();var nt="social",st="@phantom/social",xe={actor(t){return[nt,`${st}:actor`,{profileId:t}]},actorAndFollowers(t){return[nt,`${st}:actor-and-followers`,{profileId:t}]},actorAndFollowing(t){return[nt,`${st}:actor-and-following`,{profileId:t}]},userProfileByUsernameOrUserProfileId(t){return[nt,`${st}:user-profile-by-username-or-user-profile-id`,{usernameOrUserProfileId:t}]},followUser(t,e){return[nt,`${st}:follow-user`,{currentId:t,targetId:e}]},feed(t,e){return[nt,`${st}:feed`,{profileId:t,viewFeedAsUsername:e}]},searchForActorBase(){return[nt,`${st}:search`]},searchForActor(t){return[nt,`${st}:search`,{query:t}]},followRequests(t){return[nt,`${st}:follow-requests`,{profileId:t}]},suggestedActors(t,e){return[nt,`${st}:suggested-follows`,{profileId:e,source:t}]},blocking(t){return[nt,`${st}:blocking`,{profileId:t}]},pendingFollowRequests(t,e){return[nt,`${st}:pending-follow-requests`,{profileId:t,targetId:e}]},reaction(t){return t?[nt,`${st}:reaction`,{targetId:t}]:[nt,`${st}:reaction`]},reactionDetails(t){return t.targetId?[nt,`${st}:reaction-details`,t]:[nt,`${st}:reaction-details`,{content:t.content}]},followingHolders(t,e){return[nt,`${st}:following-holders`,{profileId:t,caip19:e}]}};function bm(t){let e=async()=>{if(!t)throw new Error("No profile ID or access token");return Qh(t)};return ii({queryKey:xe.actor(t),queryFn:e,enabled:!!t,gcTime:Et,staleTime:Bh})}i();a();i();a();i();a();function fo(t){let e=t.match(/\/v1\/actors\/([^/]+)/)?.[1];return e?Ve.parse(e):void 0}i();a();function Fe(t){return fo(t)??Ve.parse(t)}var go=(t,e)=>{let r=Fe(e.id);r&&t.setQueryData(xe.actor(r),e)};function MP({usernameOrUserProfileId:t}){let e=t?.startsWith("@")?t.slice(1):t,r=Na(),o=xe.userProfileByUsernameOrUserProfileId(t);return re({enabled:!!e,queryKey:o,queryFn:async()=>{if(!e)throw new Error("No sanitized username or user profile id");let s=await r.getUserProfileByUsernameOrUserProfileId(e);if(!s)throw new Error("No user profile");return s},gcTime:Et,staleTime:mr})}function Am({query:t}){let e=ee(),{data:r}=Zn(),{data:o}=We(),n=r?.accessToken,s=t?.startsWith("@")?t.slice(1).trim():t.trim(),c=Na(),u=xe.searchForActor(s),p=async()=>{if(!s||!n||!o?.id)return{actors:[]};let{actors:g}=await c.searchForActor(s,n,o.id);for(let y of g)go(e,y);return g.sort((y,S)=>y.isFollowing?-1:S.isFollowing?1:0),{actors:g}},l=!!n;return{...re({enabled:l,queryKey:u,queryFn:p,gcTime:Et,staleTime:mr}),enabled:l}}i();a();i();a();i();a();i();a();var xi=(u=>(u.Buy="Buy",u.Sell="Sell",u.Reaction="Reaction",u.WhaleBuy="WhaleBuy",u.WhaleSell="WhaleSell",u.TrendingToken="TrendingToken",u.Follow="Follow",u))(xi||{}),OP=f.object({type:f.literal("followers")}),qP=f.object({type:f.literal("actor"),id:f.string()}),VP=f.union([OP,qP]),wc=f.object({actorId:f.string(),id:f.string(),published:f.coerce.string(),storyType:f.nativeEnum(xi),destinations:f.array(VP)}),Uh=wc.extend({chainId:ir,senderAddress:f.string(),senderTokenAccount:f.string(),signer:f.string(),toAddress:f.string(),toTokenAccount:f.string(),transactionId:f.string()}),Lh=Uh.extend({storyType:f.literal("Buy"),tokenBoughtAmountRaw:f.string(),tokenBoughtAmount:f.string(),tokenBoughtUsdValue:f.string().nullish(),tokenBoughtPrice:f.string().nullish(),tokenBoughtAddress:f.string()}),Mh=Uh.extend({storyType:f.literal("Sell"),tokenSoldAmountRaw:f.string(),tokenSoldAmount:f.string(),tokenSoldUsdValue:f.string().nullish(),tokenSoldPrice:f.string().nullish(),tokenSoldAddress:f.string()}),GP=["activity","token"],KP=f.enum(GP),$P=wc.extend({storyType:f.literal("Reaction"),targetId:f.string(),targetType:KP,type:f.literal("emoji"),content:f.string()}),HP=$P.transform((t,e)=>{let r=t.content;return Ii.includes(r)?{...t,content:r}:(e.addIssue({code:f.ZodIssueCode.custom,message:"Not a supported reaction"}),f.NEVER)}),jP=Lh.extend({storyType:f.literal("WhaleBuy")}),zP=Mh.extend({storyType:f.literal("WhaleSell")}),Ei=wc.extend({storyType:f.literal("TrendingToken"),index:f.number()}),bc=wc.extend({storyType:f.literal("Follow")}),WP=f.union([Lh,Mh,HP,jP,zP,Ei,bc]);var ZP=f.object({orderedItems:Fr.array().default([]),next:f.string().optional()}),YP=f.object({orderedItems:Fr.array().default([]),next:f.string().optional()}),XP=f.object({orderedItems:Fr.array().default([]),next:f.string().optional()});var Oh=f.object({orderedItems:Fr.array().default([]),next:f.string().optional()}),JP=f.object({orderedItems:Fr.array().default([]),next:f.string().optional()}),eF=f.object({id:f.string(),username:f.string(),icon:f.string().nullish()}),tF=f.object({followingHolders:eF.array().default([])}),rF=f.object({targetId:f.string(),actorId:f.string(),type:f.string(),content:f.string()}),oF=f.object({targetId:f.string(),content:f.string(),type:f.string(),count:f.number({coerce:!0})});function nF(t,e){return t==="emoji"&&Ii.includes(e)}var qh=f.object({reaction:rF.transform(t=>({...t,content:Ii.includes(t.content)?t.content:"\u{1F440}"})).optional(),counts:f.array(oF).transform(t=>t.filter(e=>nF(e.type,e.content))).optional()}),sF=f.object({actors:Fr.array().default([]),nextCursor:f.string().optional()});var Ii=["\u{1F680}","\u{1F49C}","\u{1F402}","\u{1F440}","\u{1F43B}","\u{1F4A9}","\u{1F480}","\u{1F602}","\u{1F438}"];var vm=t=>({storyType:"TrendingToken",actorId:`https://api.phantom.app/v1/trending-token/${t}/`,id:`https://api.phantom.app/v1/trending-token/${t}/`,published:new Date(Date.now()-1e3*60).toISOString(),destinations:[],index:t}),iF=Ei.parse(vm(0)),aF=Ei.parse(vm(1)),cF=Ei.parse(vm(2)),Vh=t=>({storyType:"Follow",actorId:`https://api.phantom.app/v1/follow/${t}/`,id:`https://api.phantom.app/v1/follow/${t}/`,published:new Date(Date.now()-1e3*60).toISOString(),destinations:[]}),uF=bc.parse(Vh(0)),pF=bc.parse(Vh(1));var uV=J({minutes:10}),pV=J({seconds:60});i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();var IG=J({minutes:5}),PG=J({days:1});i();a();i();a();i();a();i();a();var p9=J({minutes:5});i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();var Jo=io(oe,t=>new Tm(t)),Tm=class{#e;constructor(e){this.#e=e}profileFollowRequestAcceptedByUser({targetId:e,actorId:r}){let o=Fe(e),n=Fe(r);this.#e.capture("profileFollowRequestAcceptedByUser",{data:{targetId:e,targetProfileId:o,actorId:r,actorProfileId:n,type:"followRequestAccepted"}})}profileFollowRequestDeniedByUser({targetId:e,actorId:r}){let o=Fe(e),n=Fe(r);this.#e.capture("profileFollowRequestDeniedByUser",{data:{targetId:e,targetProfileId:o,actorId:r,actorProfileId:n,type:"followRequestDenied"}})}profileUnfollowedByUser({targetId:e,actorId:r}){let o=Fe(e),n=Fe(r);this.#e.capture("profileUnfollowedByUser",{data:{targetId:e,targetProfileId:o,actorId:r,actorProfileId:n,type:"unfollow"}})}profileFollowedByUser({targetId:e,actorId:r,isRequest:o}){let n=Fe(e),s=Fe(r);this.#e.capture("profileFollowedByUser",{data:{targetId:e,targetProfileId:n,actorId:r,actorProfileId:s,type:o?"followRequest":"follow"}})}profileReportedByUser({targetId:e,actorId:r,additionalData:o}){let n=Fe(e),s=Fe(r);this.#e.capture("profileReportedByUser",{data:{targetId:e,targetProfileId:n,actorId:r,actorProfileId:s,type:"report",...o}})}profileUnblockedByUser({targetId:e,actorId:r}){let o=Fe(e),n=Fe(r);this.#e.capture("profileUnblockedByUser",{data:{targetId:e,targetProfileId:o,actorId:r,actorProfileId:n,type:"unblock"}})}profileBlockedByUser({targetId:e,actorId:r}){let o=Fe(e),n=Fe(r);this.#e.capture("profileBlockedByUser",{data:{targetId:e,targetProfileId:o,actorId:r,actorProfileId:n,type:"block"}})}profileViewedByUser({targetId:e,actorId:r,isFollowing:o}){let n=Fe(e),s=Fe(r);this.#e.capture("profileViewedByUser",{data:{targetId:e,targetProfileId:n,actorId:r,actorProfileId:s,isFollowing:o,type:"view"}})}profileFollowersViewedByUser({targetId:e,actorId:r}){let o=Fe(e),n=Fe(r);this.#e.capture("profileFollowersViewedByUser",{data:{targetId:e,targetProfileId:o,actorId:r,actorProfileId:n,type:"viewFollowers"}})}profileFollowingViewedByUser({targetId:e,actorId:r}){let o=Fe(e),n=Fe(r);this.#e.capture("profileFollowingViewedByUser",{data:{targetId:e,targetProfileId:o,actorId:r,actorProfileId:n,type:"viewFollowing"}})}profileSharedByUser({targetId:e,actorId:r}){let o=Fe(e),n=Fe(r);this.#e.capture("profileSharedByUser",{data:{targetId:e,targetProfileId:o,actorId:r,actorProfileId:n,type:"share"}})}};i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();i();a();var WH=new Set([xe.feed(Ve.parse(""))[1]]);i();a();var Ac=t=>["Buy","WhaleBuy","Sell","WhaleSell","Reaction"].includes(t.storyType);i();a();i();a();i();a();i();a();var Xh=k(Yh(),1),Jh=Xh.default;var bF=Jh.bind({concatArrays:!0,ignoreUndefined:!0});function AF(t,e){let r=self.localStorage.getItem(t);if(r){let o=JSON.parse(r),n=JSON.parse(e),s=JSON.stringify(bF(o,n));self.localStorage.setItem(t,s)}else self.localStorage.setItem(t,e)}function ys(t,e){return new Promise((r,o)=>{try{let n=t();e?.(null,n),r(n)}catch(n){e?.(n),o(n)}})}function xc(t,e,r){return Promise.all(t).then(o=>{let n=r?.(o)??null;return e?.(null,n),Promise.resolve(n)},o=>(e?.(o),Promise.reject(o)))}var Fi={getItem:(t,e)=>ys(()=>self.localStorage.getItem(t),e),setItem:(t,e,r)=>ys(()=>self.localStorage.setItem(t,e),r),removeItem:(t,e)=>ys(()=>self.localStorage.removeItem(t),e),mergeItem:(t,e,r)=>ys(()=>AF(t,e),r),clear:t=>ys(()=>self.localStorage.clear(),t),getAllKeys:t=>ys(()=>{let e=self.localStorage.length,r=[];for(let o=0;o<e;o+=1){let n=self.localStorage.key(o)||"";r.push(n)}return r},t),flushGetRequests:()=>{},multiGet:(t,e)=>{let r=t.map(n=>Fi.getItem(n));return xc(r,e,n=>n.map((s,c)=>[t[c],s]))},multiSet:(t,e)=>{let r=t.map(o=>Fi.setItem(o[0],o[1]));return xc(r,e)},multiRemove:(t,e)=>{let r=t.map(o=>Fi.removeItem(o));return xc(r,e)},multiMerge:(t,e)=>{let r=t.map(o=>Fi.mergeItem(o[0],o[1]));return xc(r,e)}},Em=Fi;i();a();var ew=Em;i();a();var vF=Object.defineProperty,tw=Object.getOwnPropertySymbols,TF=Object.prototype.hasOwnProperty,xF=Object.prototype.propertyIsEnumerable,rw=(t,e,r)=>e in t?vF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Ss=(t,e)=>{for(var r in e||(e={}))TF.call(e,r)&&rw(t,r,e[r]);if(tw)for(var r of tw(e))xF.call(e,r)&&rw(t,r,e[r]);return t},Ec=t=>e=>{try{let r=t(e);return r instanceof Promise?r:{then(o){return Ec(o)(r)},catch(o){return this}}}catch(r){return{then(o){return this},catch(o){return Ec(o)(r)}}}},ow=(t,e)=>(r,o,n)=>{let s=Ss({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:b=>b,version:0,merge:(b,T)=>Ss(Ss({},T),b)},e);(s.blacklist||s.whitelist)&&console.warn(`The ${s.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let c=!1,u=new Set,p=new Set,l;try{l=s.getStorage()}catch{}if(l)l.removeItem||console.warn(`[zustand persist middleware] The given storage for item '${s.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return t((...b)=>{console.warn(`[zustand persist middleware] Unable to update item '${s.name}', the given storage is currently unavailable.`),r(...b)},o,n);let d=Ec(s.serialize),g=()=>{let b=s.partialize(Ss({},o()));s.whitelist&&Object.keys(b).forEach(P=>{var C;!((C=s.whitelist)!=null&&C.includes(P))&&delete b[P]}),s.blacklist&&s.blacklist.forEach(P=>delete b[P]);let T,v=d({state:b,version:s.version}).then(P=>l.setItem(s.name,P)).catch(P=>{T=P});if(T)throw T;return v},y=n.setState;n.setState=(b,T)=>{y(b,T),g()};let S=t((...b)=>{r(...b),g()},o,n),h,w=()=>{var b;if(!l)return;c=!1,u.forEach(v=>v(o()));let T=((b=s.onRehydrateStorage)==null?void 0:b.call(s,o()))||void 0;return Ec(l.getItem.bind(l))(s.name).then(v=>{if(v)return s.deserialize(v)}).then(v=>{if(v)if(typeof v.version=="number"&&v.version!==s.version){if(s.migrate)return s.migrate(v.state,v.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return v.state}).then(v=>{var P;return h=s.merge(v,(P=o())!=null?P:S),r(h,!0),g()}).then(()=>{T?.(h,void 0),c=!0,p.forEach(v=>v(h))}).catch(v=>{T?.(void 0,v)})};return n.persist={setOptions:b=>{s=Ss(Ss({},s),b),b.getStorage&&(l=b.getStorage())},clearStorage:()=>{var b;(b=l?.removeItem)==null||b.call(l,s.name)},rehydrate:()=>w(),hasHydrated:()=>c,onHydrate:b=>(u.add(b),()=>{u.delete(b)}),onFinishHydration:b=>(p.add(b),()=>{p.delete(b)})},w(),h||S};var EF=Re(ow((t,e)=>({username:void 0,setUsername:r=>t({username:r})}),{name:"view-feed-as",getStorage:()=>ew}));i();a();var nw={uiContext:void 0,fungibleDetails:void 0,story:void 0},IF=Re(t=>({...nw,setUiContext:e=>t({uiContext:e}),setFungibleDetails:e=>t({fungibleDetails:e}),setStory:e=>t({story:e}),reset:()=>t(nw)}));i();a();i();a();var Ic="en-US",PF=new Intl.NumberFormat(Ic,{maximumFractionDigits:0}),FF=new Intl.NumberFormat(Ic,{notation:"compact",compactDisplay:"short",maximumFractionDigits:1,minimumFractionDigits:1}),CF=new Intl.NumberFormat(Ic,{notation:"compact",compactDisplay:"short",maximumFractionDigits:0,minimumFractionDigits:0}),kF=new Intl.NumberFormat(Ic,{notation:"compact",compactDisplay:"short",maximumFractionDigits:1,minimumFractionDigits:1}),Pc=t=>{if(t<1e3)return PF.format(t);if(t<1e5){let r=Math.floor(t/100)*100;return FF.format(r).replace(".0K","K")}if(t<1e6){let r=Math.floor(t/1e3)*1e3;return CF.format(r)}let e=Math.floor(t/1e5)*1e5;return kF.format(e).replace(".0M","M")};i();a();i();a();i();a();var RF=t=>{let{data:e}=bm(t);return sw(e)},sw=t=>{let e={followers:t?.followers&&typeof t.followers=="object"&&t?.followers?.totalItems||0,following:t?.following&&typeof t.following=="object"&&t?.following?.totalItems||0};return{...e,formattedFollowers:Pc(e.followers||0),formattedFollowing:Pc(e.following||0)}};i();a();var Im=t=>{let e=t.split("/tokens/")[1]?.split("#")[0];if(!e)return"";let[r,o]=e.split("/");if(!r)return"";let[n]=r.split("-");return li.getCaip19FromUrlPath({chainName:n,address:o})};i();a();i();a();i();a();var Fc=t=>{let{storyType:e}=t;switch(e){case"Buy":case"WhaleBuy":{let{chainId:r,tokenBoughtAddress:o}=t;return li.getCaip19FromUrlPath({chainName:I.getChainID(r),address:o})}case"Sell":case"WhaleSell":{let{chainId:r,tokenSoldAddress:o}=t;return li.getCaip19FromUrlPath({chainName:I.getChainID(r),address:o})}case"Reaction":{let{targetId:r}=t;return Im(r)}}};i();a();var _F=io(oe,t=>new Pm(t)),Pm=class{#e;constructor(e){this.#e=e}feedStorySeenByUser(e){let{actorId:r,storyType:o,id:n}=e,s=Ac(e)?Fc(e):void 0;this.#e.capture("feedStorySeenByUser",{data:{storyId:n,storyType:o,actor:r,...s?{caip19:s}:{}}})}feedClickedByUser(e,r){let{actorId:o,storyType:n,id:s}=e,c=Ac(e)?Fc(e):void 0;this.#e.capture("feedStoryClickedByUser",{data:{...r,storyId:s,storyType:n,actor:o,...c?{caip19:c}:{}}})}reactionAddedByUser(e){this.#e.capture("reactionAddedByUser",{data:e})}reactionRemovedByUser(e){this.#e.capture("reactionRemovedByUser",{data:e})}};var Wm=k(Lw()),He=k(D());i();a();i();a();i();a();var Mw={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};i();a();var Ow={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!1};i();a();var qw={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};i();a();var Vw={tokenSearchEnabled:()=>Qe.isFeatureEnabled("enable-monad-explore-search"),trendingTokensEnabled:()=>!1};i();a();var Gw={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};i();a();var Kw={tokenSearchEnabled:()=>!0,trendingTokensEnabled:()=>!0};i();a();var $w={tokenSearchEnabled:()=>Qe.isFeatureEnabled("enable-sui-explore-search"),trendingTokensEnabled:()=>!1};var Ik=new Wn({solana:Kw,ethereum:qw,polygon:Gw,base:Mw,bitcoin:Ow,monad:Vw,sui:$w}),Gm=zn(Ik);i();a();var Hw={fields:["domain","name","category","tags"],storeFields:["domain","name","category","tags","imageUrl"],searchOptions:{boost:{name:2},prefix:!0,fuzzy:t=>t.length>3?.2:!1}};i();a();var Kc=t=>["explore-dapp",t];var Km=t=>t.addresses.map(e=>I.getMainnetNetworkID(e.networkID))??[];function jw(t){try{return Cr.get(t).nonNativeFungibleTokenType}catch{return"SolanaNative"}}i();a();i();a();var dr="@phantom/explore",Je={RecentlyViewedSearchItems:[dr,"RecentlyViewedSearchItems"],sitesV2({sortBy:t,timeFrame:e,networkIDs:r,limit:o,locale:n,rankAlgo:s}){return[dr,"sitesV2",Ee,n,{sortBy:t,timeFrame:e,networkIDs:r,rankAlgo:s,limit:o}]},recommendedSites(t,e){return[dr,"sites","recommended",Ee,e,t]},tokensV2({sortBy:t,sortDirection:e,timeFrame:r,networkIDs:o,limit:n,rankAlgo:s}){return[dr,"tokensV2",{sortBy:t,sortDirection:e,timeFrame:r,networkIDs:o,rankAlgo:s,limit:n}]},collectionsV2({sortBy:t,timeFrame:e,networkIDs:r,limit:o,locale:n,rankAlgo:s}){return[dr,"collectionsV2",Ee,n,{sortBy:t,timeFrame:e,networkIDs:r,rankAlgo:s,limit:o}]},featuredTransactions(t,e){return[dr,"transactions","featured",Ee,e,t]},learn(t,e){return[dr,"learn",Ee,e,t]}};var Pk=10,Ww="RecentlyViewedSearchItems";async function Fk(t){return await t.get(Ww)??[]}async function Zw(t,e){await t.set(Ww,e)}function $m(t){return re({queryKey:Je.RecentlyViewedSearchItems,queryFn:async()=>Fk(t),staleTime:0,enabled:!0})}function Ck(t){let e=ee();return ve({mutationFn:async o=>{let n=zw(o),c=(e.getQueryData(Je.RecentlyViewedSearchItems)??[]).filter(u=>zw(u)!==n);c.unshift(o),c=c.slice(0,Pk),await Zw(t,c),e.setQueryData(Je.RecentlyViewedSearchItems,c),await e.refetchQueries({queryKey:Je.RecentlyViewedSearchItems})}})}function kk(t){let e=ee();return ve({mutationFn:async()=>{await Zw(t,[]),e.setQueryData(Je.RecentlyViewedSearchItems,[]),await e.refetchQueries({queryKey:Je.RecentlyViewedSearchItems})}})}function zw(t){return t.type==="token"?Y($(t.data)):t.data.id}i();a();var Rk=t=>{let e={isRecommended:"true"};return t.networkIds&&(e.chainIds=t.networkIds.join(",")),`/dapps/v1?${new URLSearchParams(e).toString()}`},Dk=async t=>{let e=await X.api().get(Rk(t));if(e.status===500)throw new Error("Error fetching recommended dapps from registry");return(await e.data).data},Hm=t=>{let e=ee();return re({queryKey:["dapps","recommended",t],queryFn:async()=>{try{let o=await Dk(t);return Hn.batch(()=>{for(let n of o??[]){let s=Kc(n.domain),c=e.getQueryState(s);e.setQueryData(s,()=>n??c?.data??null)}}),o}catch(o){throw U.captureError(o,"dappRegistry"),o}},gcTime:J({days:1}),staleTime:J({days:1})})};i();a();i();a();var Yw=async({sortBy:t,sortDirection:e,timeFrame:r,networkIDs:o,limit:n,rankAlgo:s})=>{let c=new URLSearchParams({timeFrame:r,sortBy:t,sortDirection:e,limit:n.toString(),rankAlgo:s});o.forEach(l=>{c.append("chainIds[]",l)});let u=await X.api().get("/explore/v2/trending-tokens",{params:c});if(!me(u))throw new Error("Failed to fetch tokens");let p=kh.safeParse(u.data);if(!p.success)throw new Error("Failed to parse tokens");return p.data};i();a();var Ts=(t,e)=>{let r=Qa(),n=gm().find(c=>c.type===e),s=[];return n&&"network"in n?n.network.forEach(c=>{c!==Ti&&r.includes(c)&&s.push(c)}):s=r,t!==Ti&&!s.includes(t)?[]:t===Ti?s:[t]};var _k=J({minutes:1}),Nk=J({minutes:1}),Bk=100,jm=({sortBy:t,sortDirection:e,timeFrame:r,network:o,limit:n,rankAlgo:s,enableQuery:c=!0})=>{let{data:u}=he(),p=Ts(o,"tokens"),l=Bk,d=Ge(R.language)??"en";return re({queryKey:Je.tokensV2({sortBy:t,sortDirection:e,timeFrame:r,networkIDs:p,limit:l,rankAlgo:s}),enabled:!!u&&c,async queryFn(){if(!u)throw new Error("No account found");return Yw({sortBy:t,sortDirection:e,timeFrame:r,networkIDs:p,locale:d,limit:l,rankAlgo:s})},gcTime:Nk,staleTime:_k,retry:3,select:g=>n>=l?g:{...g,items:g.items.slice(0,n)}})};var Di=3,Uk=15,zm=50,Xw={VERIFIED:1,NOT_VERIFIED:2,POSSIBLE_SPAM:3,SPAM:4},Lk=(t,e=100)=>{let[r,o]=(0,He.useState)(!1);return(0,He.useEffect)(()=>{let n;return t?n=setTimeout(()=>o(!0),e):o(!1),()=>clearTimeout(n)},[t,e]),r},Mk=t=>{let e=jw(t.chainId),r=I.getChainDefinition(t.chainId),o={name:t.name,symbol:t.symbol,logoUri:t.logoUrl,chain:{id:t.chainId,symbol:r.tokenSymbol,name:r.name,imageUrl:r.iconUrl}};switch(e){case"SPL":return{type:e,data:{...o,mintAddress:t.address}};case"ERC20":return{type:e,data:{...o,contractAddress:t.address}};case"BRC20":return{type:e,data:{...o,firstCreatedInscriptionId:t.address}};default:return null}},Ok=t=>t.reduce((e,r)=>{let o=Mk(r);return o&&e.push(o),e},[]),qk=({searchQuery:t,networkIds:e,minSearchResults:r,excludePlaceholderTokens:o=!1,extraDapps:n=[]})=>{let[s,c]=(0,He.useState)(!1),[u,p]=(0,He.useState)(!1),[l,d]=(0,He.useState)(!1),g=(0,He.useMemo)(()=>e.filter(dt=>Gm.get(dt).tokenSearchEnabled()),[e]);(0,He.useEffect)(()=>{c(!1),p(!1),d(!1)},[t]);let{data:y=[],isPending:S}=Xo({query:t,networkIds:g,searchContext:"explore",enableQuery:!!t}),h=ym("tokens"),{data:w}=jm({sortBy:h?.sortByDefault??"rank",sortDirection:h?.sortDirectionDefault??"asc",timeFrame:h?.timeFrameDefault??"24h",network:h?.networkDefault??"solana:101",limit:10,rankAlgo:h?.rankAlgo??"default",enableQuery:!t&&!o}),b=(0,He.useMemo)(()=>y.sort((dt,ri)=>Xw[dt.data.spamStatus??"NOT_VERIFIED"]-Xw[ri.data.spamStatus??"NOT_VERIFIED"]),[y]),T=(0,He.useMemo)(()=>w?.items?Ok(w.items):[],[w?.items]),v=r??(t.length===0?Uk:Di),P=(0,He.useMemo)(()=>b.slice(0,u?zm:v),[u,b,v]),C=(0,He.useMemo)(()=>[...b.map(dt=>Y($(dt))),...T.map(dt=>Y($(dt)))],[b,T]),{data:B={},isPending:G}=cr({query:{data:C},enabled:C.length>0}),{data:L=[],isPending:z}=Hm({networkIds:g}),K=(0,He.useMemo)(()=>{let dt=[...L,...n],ri=(0,Wm.default)(dt,Ax=>Ca(Ax.domain));return Object.values(ri)},[L,n]),x=Ca(t),E=Sg(K,x,Hw),F=(0,Wm.default)(E,dt=>Ca(dt.domain)),Q=Object.values(F),O=Q.slice(0,s?zm:Di),{data:M,isPending:N,enabled:Z}=Am({query:t}),_=Z&&N,ye=!!t,we=z||S||_,Ke=ye&&!we,ke=ue(),{data:Gn}=$m(ke),{actorsAll:ze,actors:ge}=(0,He.useMemo)(()=>{let dt=M?.actors??[],ri=dt.slice(0,l?zm:Di);return{actorsAll:dt,actors:ri}},[l,M?.actors]),pt=(0,He.useMemo)(()=>({actors:ge,dapps:L,searchedDapps:O,renderShowMoreDappsButton:ye&&Q.length>Di,isLoading:we,tokens:P,trendingTokens:T,renderShowMoreTokensButton:ye&&b.length>v,renderShowMoreUsersButton:ye&&ze.length>Di,priceMap:B,isPriceMapLoading:G,showSearchResults:Ke,showMoreTokens:u,setShowMoreTokens:p,showMoreDapps:s,setShowMoreDapps:c,showMoreUsers:l,setShowMoreUsers:d,recentlyViewedSearchItems:Gn}),[ge,L,O,ye,Q.length,we,P,T,b.length,v,ze.length,B,G,Ke,u,s,l,Gn]),[rr,Mo]=(0,He.useState)(null),bx=Lk(we);return(0,He.useEffect)(()=>{pt.isLoading||Mo(t?pt:null)},[pt.isLoading,t]),{...pt.isLoading&&rr?rr:pt,showSpinner:bx&&ye}};i();a();i();a();var Vk=t=>`/dapps/v1?domains=${t.join(",")}`,Gk=async t=>{let e=await X.api().get(Vk(t));if(e.status===500)throw new Error("Error fetching recommended dapps from registry");return e.data.data},Kk=t=>{let e=ee(),r=t!=null&&Array.isArray(t)&&t.length>0&&t.filter(n=>n!=null&&n!="").length>0;return re({queryKey:["dapps",t],enabled:r,queryFn:async()=>{try{let n=await Gk(t);return Hn.batch(()=>{for(let s of n??[]){let c=Kc(s.domain),u=e.getQueryState(c);e.setQueryData(c,()=>s??u?.data??null)}}),n}catch(n){throw U.captureError(n,"dappRegistry"),n}},gcTime:J({days:1}),staleTime:J({days:1})})};i();a();var eb=k(D());i();a();var Jw=async(t,e)=>{let r=new URLSearchParams({appVersion:Ee,limit:"6",locale:e,platform:$e,timeframe:"24h"});t.forEach(s=>{r.append("chainIds[]",s)});let o=await X.api().get("/explore/v1/featured-dapps",{params:r});if(!me(o))throw new Error("Failed to fetch sites");return await o.data};var $k=J({minutes:10}),Hk=J({minutes:10}),jk=()=>{let{data:t}=he(),e=(0,eb.useMemo)(()=>t?Km(t):[],[t]),r=Ge(R.language)??"en",o=async()=>{if(!t)throw new Error("No account found");return Jw(e,r)};return re({queryKey:Je.recommendedSites(e,r),enabled:!!t,queryFn:o,gcTime:$k,staleTime:Hk})};i();a();var zk=k(D());i();a();var V8=J({minutes:10}),G8=J({minutes:10});i();a();i();a();var Wk={rank:"trending",top:"top"},tb=async({sortBy:t,timeFrame:e,networkIDs:r,limit:o,locale:n,rankAlgo:s})=>{let c=new URLSearchParams({appVersion:Ee,limit:o.toString(),locale:n,platform:$e,rankAlgo:s,rankBy:Wk[t],timeframe:e});r.forEach(l=>{c.append("chainIds[]",l)});let u=await X.api().get("/explore/v1/trending-dapps",{params:c});if(!me(u))throw new Error("Failed to fetch sites");let p=Ch.safeParse(u.data);if(!p.success)throw new Error("Failed to parse sites");return p.data};var Zk=J({minutes:10}),Yk=J({minutes:10}),Xk=({sortBy:t,timeFrame:e,network:r,limit:o,rankAlgo:n})=>{let{data:s}=he(),c=Ts(r,"sites"),u=Ge(R.language)??"en";return re({queryKey:Je.sitesV2({sortBy:t,timeFrame:e,networkIDs:c,locale:u,limit:o,rankAlgo:n}),enabled:!!s,async queryFn(){if(!s)throw new Error("No account found");return tb({sortBy:t,timeFrame:e,networkIDs:c,locale:u,limit:o,rankAlgo:n})},gcTime:Yk,staleTime:Zk,retry:3})};i();a();i();a();var Jk={rank:"trending",top:"volume"},eR=t=>t.floorPrices.length>0&&t.marketplacePages.length>0,rb=async({sortBy:t,timeFrame:e,networkIDs:r,limit:o,locale:n,rankAlgo:s})=>{let c=new URLSearchParams({appVersion:Ee,limit:o.toString(),locale:n,platform:$e,rankAlgo:s,rankBy:Jk[t],timeframe:e});r.forEach(l=>{c.append("chainIds[]",l.toString())});let u=await X.api().get("/explore/v1/trending-collections",{params:c});if(!me(u))throw new Error("Failed to fetch collections");let p=Rh.safeParse(u.data);if(!p.success)throw new Error("Failed to parse collections");return{...p.data,data:p.data.data.filter(eR)}};var tR=J({minutes:10}),rR=J({minutes:10}),oR=({sortBy:t,timeFrame:e,network:r,limit:o,rankAlgo:n})=>{let{data:s}=he(),c=Ts(r,"collections"),u=Ge(R.language)??"en";return re({queryKey:Je.collectionsV2({sortBy:t,timeFrame:e,networkIDs:c,locale:u,limit:o,rankAlgo:n}),enabled:!!s,async queryFn(){if(!s)throw new Error("No account found");return rb({sortBy:t,timeFrame:e,networkIDs:c,locale:u,limit:o,rankAlgo:n})},gcTime:rR,staleTime:tR,retry:3})};i();a();i();a();var ob=async(t,e)=>{let r=new URLSearchParams({appVersion:Ee,locale:e,platform:$e});t.forEach(s=>{r.append("chainIds[]",s)});let o=await X.api().get("/explore/v1/learn-grid",{params:r});if(!me(o))throw new Error("Failed to fetch learn grid");return o.data};var nR=J({minutes:10}),sR=J({minutes:10}),iR=()=>{let t=Qa(),e=Ge(R.language)??"en";return re({queryKey:Je.learn(t,e),enabled:t.length>0,async queryFn(){return ob(t,e)},gcTime:sR,staleTime:nR})};i();a();i();a();i();a();var Ym=k(D());i();a();var _i=k(D());i();a();i();a();var et=k(D());var dR=et.default.lazy(()=>import("./FiatRampFlow-NGUMRL72.js").then(t=>({default:t.FiatRampFlow}))),fR=et.default.lazy(()=>import("./FiatRampPaymentMethodsPage-H75BYCU7.js").then(t=>({default:t.FiatRampPaymentMethodsPage}))),ab=et.default.lazy(()=>import("./FiatRampProvidersPage-25IZ5NFZ.js").then(t=>({default:t.FiatRampProvidersPage}))),gR=et.default.lazy(()=>import("./FiatRampFlowPreselectedToken-5QHJAHS6.js").then(t=>({default:t.FiatRampFlowPreselectedToken}))),yR=et.default.lazy(()=>import("./FiatRampFlowPreselectedToken-5QHJAHS6.js").then(t=>({default:t.WrappedFiatRampFormPage}))),SR=et.default.lazy(()=>import("./FiatRampWaitingOnRamp-2PFLHY56.js").then(t=>({default:t.FiatRampWaitingOnRamp}))),hR=et.default.lazy(()=>import("./FiatRampRedirectToProvider-KG2QV2DY.js").then(t=>({default:t.FiatRampRedirectToProvider}))),cb=Ha({id:"fiat-ramp-detail",initialViewId:"fiat-ramp-detail-providers",views:[{id:"fiat-ramp-detail-providers",element:et.default.createElement(ab,null)},{id:"fiat-ramp-detail-payment-methods",element:et.default.createElement(fR,null)}],display:"modal",stacks:[]}),wR=Ha({id:"fiat-ramp-redirect-to-provider",initialViewId:"main",views:[{id:"main",element:et.default.createElement(et.default.Fragment,null)},{id:"fiat-ramp-redirect-to-provider",element:et.default.createElement(hR,null),params:{url:f.string().url(),provider:Jp.extend({tag:f.string().optional()}),sessionId:f.string(),caip19:f.string()}},{id:"fiat-ramp-waiting-on-ramp",element:et.default.createElement(SR,null),params:{sessionId:f.string(),caip19:f.string()}}],display:"modal",stacks:[]}),bR=Ha({id:"fiat-ramp",initialViewId:"fiat-ramp-fungible-selection",views:[{id:"fiat-ramp-fungible-selection",element:et.default.createElement(dR,null)},{id:"fiat-ramp-fungible-selected",element:et.default.createElement(gR,null),params:{buy:f.string(),amount:f.number().optional(),redirectURL:f.string().url().optional()}},{id:"fiat-ramp-form",element:et.default.createElement(yR,null)},{id:"fiat-ramp-providers",element:et.default.createElement(ab,null)}],display:"modal",stacks:[cb,wR]});i();a();i();a();i();a();i();a();var Hc=t=>{let e=[];for(let r in t.errors)Array.isArray(t.errors[r])&&e.push(t.errors[r].join(", "));return e.join(", ")};var pb=async({locale:t})=>{let e;try{let r=JSON.stringify({platform:$e,appVersion:Ee,locale:t}),o=await X.api().headers({"Content-Type":"application/json"}).post(({apiEnv:s})=>`/banners/force_upgrade/${s}/v1`,r);if(o.status===400){let s=await o.data,c=Hc(s);throw new Error(c)}else if(o.status<200||o.status>299)throw new Error(`status code: ${o.status}, body: ${o.statusText}`);let n=o.data;return n?{...n}:ub}catch(r){return e===400&&r instanceof Error&&U.captureError(r,"actionBanner"),ub}},ub={forceUpgradeStatus:"noop"};var lb=async({locale:t})=>({...await pb({locale:t})});i();a();var xs="@phantom/interstitials",bo=`${xs}:action-banners`,mb=`${xs}:force-upgrade`,tt={actionBanners:(t,e)=>[bo,{accountIdentifier:t,accessToken:e}],hasSeenInterstitial:t=>[`${xs}:has-seen-interstitial`,{feature:t}],interstitialViewHistory:t=>[`${xs}:interstitial-view-history`,{feature:t}],appLaunchTimes:()=>[`${xs}:app-launch-times`],lastOnboardedAt:()=>[`${xs}:last-onboarded-at`]};var AR=()=>re({queryKey:[mb],queryFn:async()=>{let e=Ge(R.language)??"en";return lb({locale:e})},enabled:!!Ee,staleTime:J({minutes:5})});i();a();i();a();i();a();i();a();var jc=(w=>(w.Buy="Buy",w.Collectibles="Collectibles",w.ConnectHardwareWallet="Connect Hardware Wallet",w.ConvertToJito="Convert to Jito",w.Explore="Explore",w.MintCollectible="Mint Collectible",w.SocialLogin="Social Login",w.SettingsClaimUsername="Settings: Claim Username",w.SettingsCurrency="Settings: Currency",w.SettingsImportSeedPhrase="Settings: Import Seed Phrase",w.SettingsNotificationPreferences="Settings: Notification Preferences",w.SettingsSecurityAndPrivacy="Settings: Security & Privacy",w.Swapper="Swapper",w.ExternalLink="External Link",w.Token="Token",w))(jc||{}),Ni=class extends Error{message="Failed to set dismissed action banners to storage"};var vR={Multichain:2,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,MonadWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,SeedlessPinVerification:1,AdditionalPermissions:1,TermsOfServiceUpdate:1},TR={Multichain:3,MultichainSwapper:1,InvalidChecksum:1,SuiWelcome:1,MonadWelcome:1,ClaimUsernameNudge:1,QuickClaimUsername:1,AdditionalPermissions:1,SeedlessPinVerification:1,TermsOfServiceUpdate:1},Xm=t=>ot?vR[t]:cg?TR[t]:-1;var Jm=1,Gr=".phantom-labs.settings.interstitials",Kr=class{static async getViewHistory(e,r){let o=await r.get(Gr);return o?o.interstitialsViewHistory[e]??[]:[]}static async hasSeen(e,r){let o=await r.get(Gr);if(!o)return!1;let n=Xm(e);return(o.interstitialsSeen[e]??0)>=n}static async setHasSeen(e,r){let o=await r.get(Gr),n=Xm(e);await r.set(Gr,{version:Jm,interstitialsSeen:{...!!o&&o.interstitialsSeen,[e]:n},interstitialsViewHistory:{...!!o&&o.interstitialsViewHistory,[e]:[...o?.interstitialsViewHistory?.[e]??[],Date.now()]}})}static async resetHasSeen(e,r){let o=await r.get(Gr);if(o)return r.set(Gr,{version:Jm,interstitialsSeen:{...o.interstitialsSeen,[e]:void 0},interstitialsViewHistory:{...o.interstitialsViewHistory,[e]:void 0}})}static async resetAllHasSeen(e){if(await e.get(Gr))return e.set(Gr,{version:Jm,interstitialsSeen:{},interstitialsViewHistory:{}})}};var ed=t=>{let e=ue(),r=tt.hasSeenInterstitial(t);return re({queryKey:r,queryFn:async()=>await Kr.hasSeen(t,e)})};i();a();i();a();var db=async t=>{await t.invalidateQueries({queryKey:[bo]})};Eg(db);var fb=async(t,e,r)=>{await t.setQueryData(tt.hasSeenInterstitial(e),r)};var rn=t=>{let e=ue(),r=ee();return ve({mutationFn:async()=>{await Kr.setHasSeen(t,e),await fb(r,t,!0)},onSuccess:()=>r.invalidateQueries({queryKey:tt.interstitialViewHistory(t)})})};i();a();var fr=k(D());i();a();var zc=k(D());i();a();i();a();i();a();var td=async t=>await t.get("dismissedActionBanners")??[],gb=async(t,e)=>{try{let r=await td(t);return r.includes(e)?void 0:t.set("dismissedActionBanners",[...r,e])}catch{throw new Ni}};var od=()=>{let t=ue(),{data:e}=re({queryKey:tt.appLaunchTimes(),queryFn:async()=>await t.get("appLaunchTimes")??[]});return e??[]};i();a();var nd=()=>{let t=ue(),{data:e}=re({queryKey:tt.lastOnboardedAt(),queryFn:async()=>await t.get("lastOnboardedAt")??-1});return e};var yb=()=>{let t=nd(),e=od();if(e.length<2)return!0;if(t!==void 0){let[r,o]=e;if(t<r&&t<o)return!1}return!0};function Qi(t,e,r){let{data:o,isSuccess:n}=ed(t),{data:s}=Se(e?[e]:[]),c=s?.length===1?s[0]:!0,u=yb(),p=(0,zc.useCallback)(()=>r(),[r]);return(0,zc.useMemo)(()=>c&&n&&!o&&!u&&p(),[c,o,u,p,n])}var sd={data:{feature:"sui"}},xR=({onPrimaryAction:t,onSecondaryAction:e,image:r,condition:o=()=>!0})=>{let{t:n}=qe(),{mutateAsync:s}=Ba(),[c]=Ua(["sui"]),{mutate:u}=rn("SuiWelcome"),p=Qi("SuiWelcome",void 0,()=>o()&&!c&&!$n()),l=(0,fr.useCallback)(async()=>{await s({chainIDs:["sui"]}),t(),u()},[s,t,u]),d=(0,fr.useCallback)(()=>{e(),u()},[e,u]),g=(0,fr.useMemo)(()=>({title:n("interstitialSuiWelcomeTitle"),items:[{key:"suiValueProp1",title:n("interstitialSuiWelcomeItemTitle_1"),icon:fr.default.createElement(uo,{icon:"Send",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_1")},{key:"suiValueProp2",title:n("interstitialSuiWelcomeItemTitle_2"),icon:fr.default.createElement(uo,{icon:"Compass",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_2")},{key:"suiValueProp3",title:n("interstitialSuiWelcomeItemTitle_3"),icon:fr.default.createElement(uo,{icon:"Smile",color:"bgWallet",backgroundColor:"accentPrimary",shape:"square"}),description:n("interstitialSuiWelcomeItemDescription_3")}],primaryButton:{children:n("interstitialSuiWelcomePrimaryButtonText"),onAction:l,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:sd}},secondaryButton:{children:n("commandNotNow"),onAction:d,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:sd}},onDismiss:u,image:r,displayEvent:{event:"welcomeInterstitialSeen",payload:sd}}),[n,l,d,r,u]);return(0,fr.useMemo)(()=>({interstitial:g,shouldShow:p}),[g,p])};i();a();var gr=k(D());var id={data:{feature:"monad"}},ER=({onPrimaryAction:t,onSecondaryAction:e,image:r,condition:o=()=>!0})=>{let{t:n}=qe(),{mutateAsync:s}=Ba(),[c]=Ua(["monad"]),{mutate:u}=rn("MonadWelcome"),p=Qi("MonadWelcome","enable-monad",()=>o()&&!c&&!$n()),l=(0,gr.useCallback)(async()=>{await s({chainIDs:["monad"]}),t(),u()},[s,t,u]),d=(0,gr.useCallback)(()=>{e(),u()},[e,u]),g=(0,gr.useMemo)(()=>({title:n("interstitialMonadWelcomeTitle"),items:[{key:"monadValueProp1",title:n("interstitialMonadWelcomeItemTitle_1"),icon:gr.default.createElement(uo,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialMonadWelcomeItemDescription_1")},{key:"monadValueProp2",title:n("interstitialMonadWelcomeItemTitle_2"),icon:gr.default.createElement(uo,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialMonadWelcomeItemDescription_2")},{key:"monadValueProp3",title:n("interstitialMonadWelcomeItemTitle_3"),icon:gr.default.createElement(uo,{icon:"InfoCircle",color:"accentPrimary",backgroundColor:"brandMidnight",shape:"square"}),description:n("interstitialMonadWelcomeItemDescription_3")}],primaryButton:{children:n("interstitialMonadWelcomePrimaryButtonText"),onAction:l,analyticsEvent:{event:"welcomeInterstitialPrimaryButtonClickedByUser",payload:id}},secondaryButton:{children:n("commandNotNow"),onAction:d,analyticsEvent:{event:"welcomeInterstitialSecondaryButtonClickedByUser",payload:id}},onDismiss:u,image:r,displayEvent:{event:"welcomeInterstitialSeen",payload:id}}),[n,l,d,r,u]);return(0,gr.useMemo)(()=>({interstitial:g,shouldShow:p}),[g,p])};i();a();i();a();i();a();i();a();var on=k(D());var ad=on.default.memo(t=>{let{children:e,i18nKey:r,...o}=t,{t:n}=qe(),s=(0,on.useMemo)(()=>{let u=(r?`${n(r,{...o,...o.values})}`:"").replace(/<\/?[^>]+(>|$)/g,"");return on.default.createElement(kr,null,u)},[r,o,n]);return on.default.createElement(fy,{fallback:s},on.default.createElement(Tg,{i18nKey:r,...o},e))});var ht=k(D());var IR="https://phantom.com/terms",PR="https://phantom.com/privacy",FR="https://phantom.com/terms-and-privacy-update",CR=({onConfirm:t,openUrl:e})=>{let{t:r}=qe(),o=oe(),{mutate:n}=rn("TermsOfServiceUpdate"),s=(0,ht.useCallback)(async()=>{n(),t()},[n,t]),c=(0,ht.useCallback)(p=>async()=>{await o.capture("termsOfServiceUpdateClick",{data:{uiContext:"interstitial"}}),await e(p)},[o,e]),u=(0,ht.useMemo)(()=>({title:r("interstitialTermsOfServiceUpdateTitle"),items:[],primaryButton:{children:r("commandContinue"),onAction:s,analyticsEvent:{event:"termsOfServiceUpdateAgreedByUser",payload:{data:{uiContext:"interstitial"}}}},image:"",displayEvent:{event:"termsOfServiceUpdateSeen",payload:{data:{uiContext:"interstitial"}}},description:ht.default.createElement(kR,{openUrl:c}),dismissGestureDisabled:!0}),[r,s,c]);return(0,ht.useMemo)(()=>({interstitial:u}),[u])},kR=({openUrl:t})=>ht.default.createElement($a,{marginTop:24},ht.default.createElement(kr,{font:"body",align:"center"},ht.default.createElement(ad,{i18nKey:"interstitialTermsOfServiceUpdateSubtitle"},"Please review our updated",ht.default.createElement(kr,{onPress:t(IR),color:"accentPrimary"},"Terms of Service"),"and",ht.default.createElement(kr,{onPress:t(PR),color:"accentPrimary"},"Privacy Policy"),". By continuing, you agree to the updated terms and policies.",ht.default.createElement(kr,{onPress:t(FR),color:"accentPrimary"},"Learn More"),".")));i();a();i();a();i();a();i();a();var hb=async({accountID:t,deviceId:e,locale:r,rootId:o,selectedAccountAddresses:n,accessToken:s})=>{let c;try{let u={accountID:t,deviceId:e,locale:r,platform:$e,rootId:o,selectedAccountAddresses:n,version:Ee},p=await X.api().headers({"Content-Type":"application/json"}).bearer(s).post(({apiEnv:d})=>`/banners/get_banners/${d}/v2`,u);if(p.status===400){let d=await p.data,g=Hc(d);throw new Error(g)}else if(p.status<200||p.status>299)throw new Error(`status code: ${p.status}, body: ${await p.statusText}`);let l=p.data;return l?{...l,banners:l.banners??[]}:Sb}catch(u){return c===400&&u instanceof Error&&U.captureError(u,"actionBanner"),Sb}},Sb={id:void 0,banners:[]};i();a();i();a();var cd=t=>t?Object.values(jc).includes(t):!1;i();a();var wb=t=>{switch(t){case"Bottom Sheet":return ot;case"Modal":return!0;default:return!1}};var bb=t=>{let{bannerType:e,destinationType:r}=t;switch(e){case"Deep Link":return cd(r);case"Bottom Sheet":case"Modal":return wb(e)&&cd(r);default:return!1}};var Ab=async({accountID:t,deviceId:e,dismissedBanners:r,locale:o,rootId:n,selectedAccountAddresses:s,accessToken:c})=>{let u=await hb({accountID:t,deviceId:e,locale:o,rootId:n,selectedAccountAddresses:s,accessToken:c});return{...u,banners:u.banners.filter(p=>bb(p)&&!r.includes(p.id))}};var RR=J({minutes:1}),DR=()=>{let t=oe(),e=ue(),{data:r,isLoading:o}=Zn(),{data:n}=he(),s=async()=>{let c=n?.type!=="readOnly"?n?.addresses.map(xg)??[]:[],u=n?.type==="seed"?n.seedIdentifier:null,p=await td(e),l=Ge(R.language)??"en",d=await t.getDeviceId();return Ab({accountID:n?.identifier??"",deviceId:d,dismissedBanners:p,locale:l,rootId:u,selectedAccountAddresses:c,accessToken:r?.accessToken})};return re({queryKey:tt.actionBanners(n?.identifier,r?.accessToken),queryFn:s,enabled:!o&&!!n?.identifier,staleTime:RR})};i();a();var _R=()=>{let t=ue(),e=ee();return ve({mutationFn:async({actionBannerId:o})=>{gb(t,o),e.setQueriesData({queryKey:[bo]},n=>{if(!n)return;let s=n.banners.filter(c=>c.id!==o);return{...n,banners:s}})}})};i();a();var pd=t=>{let e=ue(),r=tt.interstitialViewHistory(t);return re({queryKey:r,queryFn:async()=>await Kr.getViewHistory(t,e)})};i();a();var NR=()=>{let t=ue(),e=ee();return ve({mutationFn:async()=>{let r=Date.now(),n=[...(await t.get("appLaunchTimes")||[]).slice(-1),r];return t.set("appLaunchTimes",n)},onSuccess:()=>{e.invalidateQueries({queryKey:tt.appLaunchTimes()})}})};i();a();var BR=()=>{let t=ue(),e=ee();return ve({mutationFn:()=>{let r=Date.now();return t.set("lastOnboardedAt",r)},onSuccess:()=>{e.invalidateQueries({queryKey:tt.lastOnboardedAt()})}})};i();a();i();a();i();a();var It="Auto";var Ie={buyFungible:void 0,buyUsdValue:void 0,sellFungible:void 0,sellUsdValue:void 0,sellAmount:"",uiSellAmountCryptoInput:"",amountType:"sell",quoteResponse:void 0,selectedProviderIndex:0,selectedBaseProvider:It,gasEstimation:{isFetching:!1,estimate:void 0,estimateWithBuffer:void 0},hasNoRoutes:!1,isFetchingQuote:!1,error:null,searchQuery:"",numSearchResults:0,primaryCurrency:"crypto",uiSellAmountLocalFiatInput:"",uiBuyAmountCryptoInput:"",uiBuyAmountLocalFiatInput:"",canInputFiatSellAmount:!1,swapFilter:void 0},A=Re(t=>({...Ie,resetQuote:()=>t({quoteResponse:Ie.quoteResponse,isFetchingQuote:Ie.isFetchingQuote,hasNoRoutes:Ie.hasNoRoutes,selectedProviderIndex:Ie.selectedProviderIndex,error:Ie.error,uiSellAmountLocalFiatInput:Ie.uiSellAmountLocalFiatInput,selectedBaseProvider:Ie.selectedBaseProvider}),resetSwapper:()=>t({quoteResponse:Ie.quoteResponse,gasEstimation:Ie.gasEstimation,error:Ie.error,sellAmount:"",uiSellAmountCryptoInput:"",uiBuyAmountCryptoInput:Ie.uiBuyAmountCryptoInput,swapFilter:Ie.swapFilter,selectedBaseProvider:Ie.selectedBaseProvider,selectedProviderIndex:Ie.selectedProviderIndex}),setBuyFungible:e=>t({buyFungible:e}),setBuyUsdValue:e=>t({buyUsdValue:e}),setHasNoRoutes:e=>t({hasNoRoutes:e}),setIsFetchingQuote:e=>t({isFetchingQuote:e}),setQuoteResponse:e=>t({quoteResponse:e,hasNoRoutes:!1}),setSelectedProviderIndex:e=>t({selectedProviderIndex:e}),setSelectedBaseProvider:e=>t({selectedBaseProvider:e}),setGasEstimation:({estimate:e,estimateWithBuffer:r,isFetching:o})=>t(n=>({gasEstimation:{...n.gasEstimation,...e!==void 0&&{estimate:e},...r!==void 0&&{estimateWithBuffer:r},...o!==void 0&&{isFetching:o}}})),setSellAmount:e=>t({sellAmount:e}),setAmountType:e=>t({amountType:e}),setSellUsdValue:e=>t({sellUsdValue:e}),setSellFungible:e=>t({sellFungible:e}),setUiSellAmountCryptoInput:e=>t({uiSellAmountCryptoInput:e}),setError:e=>t({error:e}),setSearchQuery:e=>t({searchQuery:e}),setNumSearchResults:e=>t({numSearchResults:e}),setPrimaryCurrency:e=>t({primaryCurrency:e}),setUiSellAmountLocalFiatInput:e=>t({uiSellAmountLocalFiatInput:e}),setUiBuyAmountCryptoInput:e=>t({uiBuyAmountCryptoInput:e}),setUiBuyAmountLocalFiatInput:e=>t({uiBuyAmountLocalFiatInput:e}),setCanInputFiatSellAmount:e=>t({canInputFiatSellAmount:e}),setSwapFilter:e=>t({swapFilter:e}),switchTokensForSell:()=>{t(e=>{let r=e.sellFungible??e.buyFungible,o=e.buyFungible??e.sellFungible,n=e.uiBuyAmountCryptoInput,s=e.uiBuyAmountLocalFiatInput;return{sellFungible:o,buyFungible:r,uiSellAmountCryptoInput:n,uiSellAmountLocalFiatInput:s,uiBuyAmountCryptoInput:Ie.uiBuyAmountCryptoInput,uiBuyAmountLocalFiatInput:Ie.uiBuyAmountLocalFiatInput,sellAmount:n,swapFilter:void 0,selectedBaseProvider:e.selectedBaseProvider}})},switchTokensForBuy:()=>{t(e=>{let r=e.sellFungible??e.buyFungible,o=e.buyFungible??e.sellFungible,n=e.uiSellAmountCryptoInput,s=e.uiSellAmountLocalFiatInput;return{sellFungible:o,buyFungible:r,uiSellAmountCryptoInput:Ie.uiSellAmountCryptoInput,uiSellAmountLocalFiatInput:Ie.uiSellAmountLocalFiatInput,uiBuyAmountCryptoInput:n,uiBuyAmountLocalFiatInput:s,sellAmount:n,swapFilter:void 0,selectedBaseProvider:e.selectedBaseProvider}})},resetUiAmounts:()=>t({uiSellAmountCryptoInput:Ie.uiSellAmountCryptoInput,uiSellAmountLocalFiatInput:Ie.uiSellAmountLocalFiatInput,uiBuyAmountCryptoInput:Ie.uiBuyAmountCryptoInput,uiBuyAmountLocalFiatInput:Ie.uiBuyAmountLocalFiatInput,sellAmount:Ie.sellAmount,selectedBaseProvider:Ie.selectedBaseProvider}),setPairAndAmount:({sell:e,buy:r,swapAmount:o})=>t(n=>{let s="uiSellAmountCryptoInput";return o.perspective==="sell"?n.primaryCurrency==="crypto"?s="uiSellAmountCryptoInput":s="uiSellAmountLocalFiatInput":n.primaryCurrency==="crypto"?s="uiBuyAmountCryptoInput":s="uiBuyAmountLocalFiatInput",{...n,sellFungible:e,buyFungible:r,[s]:o.amount,sellAmount:o.amount}})}));i();a();var Tb=k(D());i();a();var Ui=k(D());var vb=()=>{let[t,e]=(0,Ui.useState)(!1),{data:[r]}=Se(["enable-quote-streaming"]),o=A(l=>l.selectedProviderIndex),n=A(l=>l.selectedBaseProvider),s=A(l=>l.quoteResponse),c=(0,Ui.useMemo)(()=>s?s.quotes:[],[s]),u=(0,Ui.useMemo)(()=>{if(r){if(!s||s.quotes.length===0)return 0;let l=QR(s,n);return l===-1?(e(n!==It),0):(e(!1),l)}return o},[r,s,n,o]),p=c.length>0?c[u]:void 0;return{selectedQuoteIndex:u,selectedBaseProvider:r?n:"",currentQuote:p,hasDefaultedToBestQuote:t}},QR=(t,e)=>t.quotes.findIndex(r=>r.baseProvider.id===e);function ne(){let t=A(l=>l.quoteResponse),e=A(l=>l.hasNoRoutes),r=A(l=>l.isFetchingQuote),o=(0,Tb.useMemo)(()=>t?t.quotes:[],[t]),n=o[0]?.buyAmount??"",{selectedQuoteIndex:s,selectedBaseProvider:c,currentQuote:u,hasDefaultedToBestQuote:p}=vb();return{bestBuyAmount:n,currentQuote:u,hasNoRoutes:e,quoteResponse:t,quotes:o,selectedProviderIndex:s,selectedBaseProvider:c,isFetchingQuote:r,hasDefaultedToBestQuote:p}}i();a();var qb=k(D());i();a();var Ob=k(D());i();a();var Mb=k(D());i();a();i();a();i();a();i();a();var ld=5,md=5,xb={id:I.solana.mainnetID,imageUrl:I.solana.iconUrl,name:I.solana.name,symbol:I.solana.tokenSymbol},Zc={type:"SolanaNative",data:{amount:"0",balance:new j(0),chain:xb,decimals:9,key:"SolanaNative",logoUri:"https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png",name:"Solana",symbol:"SOL",tokenAddress:void 0,walletAddress:"",spamStatus:"VERIFIED"}},dd={type:"SPL",data:{amount:"0",balance:new j(0),chain:xb,decimals:6,key:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",logoUri:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png",mintAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USD Coin",splTokenAccountPubkey:"EAF7dH8Jy43Xgp68PhyybKhfKxk46NFRkWN4PMCLqMfS",symbol:"USDC",tokenAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",walletAddress:"",programId:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",spamStatus:"VERIFIED"}},Eb={type:"SuiNative",data:{chain:{id:I.sui.mainnetID,name:I.sui.name,symbol:I.sui.tokenSymbol,imageUrl:I.sui.iconUrl},walletAddress:"",decimals:18,amount:"0",logoUri:"https://raw.githubusercontent.com/trustwallet/assets/master/blockchains/sui/info/logo.png",name:"Sui",symbol:"SUI",balance:new j(0),key:"SuiNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0,spamStatus:"VERIFIED"}},Ib={type:"SuiCoin",data:{chain:{id:I.sui.mainnetID,name:I.sui.name,symbol:I.sui.tokenSymbol,imageUrl:I.sui.iconUrl},walletAddress:"",contractAddress:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",decimals:6,amount:"0",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",balance:new j(0),key:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",tokenAddress:"0xdba34672e30cb065b1f93e3ab55318768fd6fef66c15942c9f7cb846e2f900e7::usdc::USDC",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411,spamStatus:"VERIFIED"}},Pb={type:"PolygonNative",data:{chain:{id:I.polygon.mainnetID,name:I.polygon.name,symbol:I.polygon.tokenSymbol,imageUrl:I.polygon.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://wallet-asset.matic.network/img/tokens/matic.svg",name:"Polygon",symbol:I.polygon.tokenSymbol,balance:new j(0),key:"PolygonNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},Fb={type:"BaseNative",data:{chain:{id:I.base.mainnetID,name:I.base.name,symbol:I.base.tokenSymbol,imageUrl:I.base.iconUrl},walletAddress:"",decimals:18,amount:"72172806352057410682",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Base",symbol:I.base.tokenSymbol,balance:new j(0),key:"BaseNative",usd:79.02922295550286,price:1.095,usd_24h_change:-.19903579005681138,tokenAddress:void 0,spamStatus:"VERIFIED"}},Cb={type:"ERC20",data:{amount:"0",balance:new j(0),decimals:6,key:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",walletAddress:"",chain:{id:I.polygon.mainnetID,imageUrl:I.polygon.iconUrl,name:I.polygon.name,symbol:I.polygon.tokenSymbol},contractAddress:"0x3c499c542cef5e3811e1192ce70d8cc03d5c3359",spamStatus:"VERIFIED"}},kb={type:"ERC20",data:{amount:"0",balance:new j(0),decimals:6,key:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",logoUri:"https://wallet-asset.matic.network/img/tokens/usdc.svg",name:"USD Coin",symbol:"USDC",tokenAddress:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",walletAddress:"",chain:{id:I.base.mainnetID,imageUrl:I.base.iconUrl,name:I.base.name,symbol:I.base.tokenSymbol},contractAddress:"0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",spamStatus:"VERIFIED"}},Rb={type:"EthereumNative",data:{chain:{id:I.ethereum.mainnetID,name:I.ethereum.name,symbol:I.ethereum.tokenSymbol,imageUrl:I.ethereum.iconUrl},walletAddress:"",decimals:18,amount:"45824381294194610",logoUri:"https://cdn.jsdelivr.net/gh/trustwallet/assets@master/blockchains/ethereum/assets/0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2/logo.png",name:"Ethereum",symbol:"ETH",balance:new j(0),key:"EthereumNative",usd:85.14215868842653,price:1858.01,usd_24h_change:.0009391170983548136,tokenAddress:void 0,spamStatus:"VERIFIED"}},Db={type:"ERC20",data:{chain:{id:I.ethereum.mainnetID,name:I.ethereum.name,symbol:I.ethereum.tokenSymbol,imageUrl:I.ethereum.iconUrl},walletAddress:"",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",decimals:6,amount:"1881092",logoUri:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png?1547042389",name:"USD Coin",symbol:"USDC",balance:new j(0),key:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",tokenAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",usd:1.8807026139560001,price:.999793,usd_24h_change:-.0005475429199477411,spamStatus:"VERIFIED"}},Li=dd,fd=Zc;var Yc="https://help.phantom.com/hc/en-us/articles/5985106844435",_b="https://help.phantom.com/hc/en-us/articles/29763090277139";var nn=18;var Es=500,Ao={amount:new j(0),amountUsd:null,pct:0};i();a();var Is={};var Nb={...Is,bridgeMinimumUsdAmounts:0,swapDefaultFee:new j(15e-5*10**18),bridgeDefaultFee:new j(.025*10**18),averageNetworkFee:new j(15e-5*10**18),nativeFungible:Fb,usdcFungible:kb};i();a();var Bb={...Is,bridgeMinimumUsdAmounts:20,swapDefaultFee:new j(2.5*10**16),bridgeDefaultFee:new j(3.75*10**16),averageNetworkFee:new j(0),nativeFungible:Rb,usdcFungible:Db};i();a();var Qb={...Is,bridgeMinimumUsdAmounts:2,swapDefaultFee:new j(6*10**16),bridgeDefaultFee:new j(6*10**16),averageNetworkFee:new j(.0015*10**18),nativeFungible:Pb,usdcFungible:Cb};i();a();var Ub={bridgeMinimumUsdAmounts:1,swapDefaultFee:new j(3*10**6),bridgeDefaultFee:new j(30*10**6),averageNetworkFee:new j(15e3),nativeFungible:Zc,usdcFungible:dd};i();a();var Lb={bridgeMinimumUsdAmounts:1,swapDefaultFee:new j(50*10**6),bridgeDefaultFee:new j(50*10**6),averageNetworkFee:new j(50*10**6),nativeFungible:Eb,usdcFungible:Ib};var nte=["solana","ethereum","polygon","base","sui"],UR=new Wn({solana:Ub,ethereum:Bb,polygon:Qb,base:Nb,sui:Lb}),Le=zn(UR);function vo(){let t=Qe.isFeatureEnabled("enable-sui-swapper");return(0,Mb.useMemo)(()=>Le.supportedChains.filter(e=>e==="sui"?t:!0),[t])}var To=()=>{let{data:t}=he(),e=vo().map(r=>I.getMainnetNetworkID(r));return(0,Ob.useMemo)(()=>LR(t,e),[t,e])},LR=(t,e)=>[...new Set((t?.addresses??[]).map(r=>r.networkID).filter(r=>e.includes(r)))];var gd=()=>{let t=To();return(0,qb.useCallback)(e=>!!e&&t.includes(e),[t])};i();a();var Gb=k(D());i();a();i();a();var yd=(n=>(n[n.Always=1/0]="Always",n[n.Short=J({days:1})]="Short",n[n.Medium=J({days:3})]="Medium",n[n.Long=J({days:7})]="Long",n))(yd||{}),Vb=(s=>(s[s.Immediate=0]="Immediate",s[s.Short=J({minutes:1})]="Short",s[s.Medium=J({minutes:2.5})]="Medium",s[s.Long=J({minutes:60})]="Long",s[s.Never=1/0]="Never",s))(Vb||{}),Mi=(o=>(o[o.Short=J({seconds:20})]="Short",o[o.Medium=J({minutes:2.5})]="Medium",o[o.Long=J({minutes:5})]="Long",o))(Mi||{});var MR=f.object({swapper:f.number(),review:f.number().nullish().default(null)}),Xc={swapper:Mi.Short,review:null},xo=()=>{let t=Qe.getMultivariateAssignment("swapper-poll-interval-json");if(!t)return Xc;try{let e=JSON.parse(t);return MR.parse(e)}catch{return Xc}};var zt=()=>{let t=Oi(n=>n.intervalMs),e=Oi(n=>n.state),r=Oi(n=>n.setState),o=(0,Gb.useCallback)(n=>{r("resumed",n??Kb())},[r]);return{state:e,pause:()=>r("paused"),resume:o,intervalMs:t}},$r=t=>{Oi.getState().setState("resumed",t??Kb())},sn=()=>{Oi.getState().setState("paused")},Kb=()=>xo().swapper,Oi=Re(t=>({state:"resumed",intervalMs:Xc.swapper,setState(e,r){t(r?{state:e,intervalMs:r}:{state:e})}}));i();a();var cA=k(D());i();a();i();a();i();a();i();a();var OR=t=>{let e=ue(),r=oe(),{data:o,isPending:n}=re({gcTime:0,queryKey:["originIsBlocklisted",t],queryFn:async()=>{let{result:s}=await Sl(e,r,t);return s}});return t===void 0?{isLoading:!1,originIsBlocklisted:!1}:{isLoading:n,originIsBlocklisted:o??!1}};i();a();var Sd=k(D());i();a();var an=class{#e;constructor(e){this.#e=e}onScannedMessageByUser=e=>{this.#e.capture("simulation",{data:{simulation:{...e,type:"message",status:"success"}}})};onFailedScannedMessageByUser=e=>{this.#e.capture("simulation",{data:{simulation:{...e,type:"message",status:"error"}}})};onScannedTransactionByUser=e=>{this.#e.capture("simulation",{data:{simulation:{...e,type:"transaction",status:"success"}}})};onFailedScannedTransactionByUser=e=>{this.#e.capture("simulation",{data:{simulation:{...e,type:"transaction",status:"error"}}})}};function qR(t,e){let{data:r}=he(),{params:o,networkID:n}=t,[s,c]=(0,Sd.useState)(null),u=["scan-message",{url:t.url,message:o.message}],p=r?.addresses.find(h=>h.networkID===n)?.address,l=Ge(R.language)??"en",d=oe(),g=new an(d),y=Hb(),S=re({queryKey:u,queryFn:async()=>{try{let h=await hl(l,await d.getDeviceId(),{...t,userAccount:p});return c(null),g.onScannedMessageByUser({networkId:n,warnings:h.warnings.map(w=>w.severity),shouldBlock:!!h.block,errorCode:h.error??""}),h}catch(h){c(h),g.onFailedScannedMessageByUser({networkId:n,url:t.url}),U.addBreadcrumb("simulation",`networkID: ${n}, url: ${t.url}, type: message`,"info"),U.captureError(S.error,"simulation")}},enabled:!!p&&!!t.url&&!!o.message&&!e?.disabled,refetchInterval:e?.disableRefetch?!1:y,staleTime:1e3*10,...pl()});return{isFetched:S.isFetched,isFetching:S.isFetching,data:S.data,isLoading:S.isPending&&!e?.disabled,isError:S.isError||!!s,error:S.error||s}}function qi(t,e){let{params:r}=t,[o,n]=(0,Sd.useState)(null),s=oe(),c=["scan-transaction",t.networkID,t.url,r?r.transactions??r.transaction:""],u=Hb(),p=!1;I.isEVMNetworkID(t.networkID)||I.isSolanaNetworkID(t.networkID)?p=!!r&&r.transactions.length>0&&!!t.userAccount:I.isBitcoinNetworkID(t.networkID)?p=!!r&&!!r.transaction&&!!r.userAddresses&&r.userAddresses.length>0:I.isSuiNetworkID(t.networkID)&&(p=!!r&&!!t.userAccount);let l=Ge(R.language)??"en",d=new an(s),g=re({queryKey:c,queryFn:async()=>{try{let y=await gi(l,await s.getDeviceId(),t);return d.onScannedTransactionByUser({networkId:t.networkID,warnings:y.warnings.map(S=>S.severity),shouldBlock:!!y.block,errorCode:y.error??""}),n(null),e?.onSettled?.(y,void 0),y}catch(y){d.onFailedScannedTransactionByUser({networkId:t.networkID,url:t.url}),U.addBreadcrumb("simulation",`networkID: ${t.networkID}, url: ${t.url}, type: transaction`,"info"),n(y),e?.onSettled?.(void 0,y),U.captureError(y,"simulation")}},enabled:p&&!e?.disabled,refetchInterval:e?.disableRefetch?!1:u,staleTime:1e3*10,...pl()});return{isFetched:g.isFetched,isFetching:g.isFetching,data:g.data,isLoading:g.isPending&&!e?.disabled,isError:g.isError||!!o,error:g.error||o}}var $b=5e3;function Hb(){let t=Qe.getMultivariateAssignment("transactions-simulation-interval-ms");if(!t)return $b;let e=parseInt(t,10);return Number.isNaN(e)?$b:e}var Wi=k(D());i();a();i();a();i();a();var Jc=f.object({name:f.string(),message:f.string()}),Wb=f.object({chainId:ir,name:f.string(),symbol:f.string(),decimals:f.number(),logoURI:f.optional(f.string()),includesBridge:f.optional(f.boolean())}),VR=Wb.extend({address:f.string(),resourceType:f.literal("address")}),GR=Wb.extend({slip44:f.string(),resourceType:f.literal("nativeToken")}),KR=f.union([VR,GR]),Zb=f.object({id:f.string(),name:f.string(),logoUri:f.string()}),$R=f.enum(["network","phantom","gasless"]),HR=f.object({name:f.string(),percentage:f.number(),amount:f.number(),type:$R}),jR=f.object({name:f.string(),proportion:f.string()}),Yb=f.object({sellAmount:f.string(),buyAmount:f.string(),analyticsContext:f.optional(f.string())}),hd=Yb.extend({priceImpact:f.number(),sources:f.array(jR),fees:f.array(HR),slippageTolerance:f.optional(f.number()),baseProvider:Zb}),wd=hd.extend({transactionData:f.array(f.string()),gaslessSignature:f.optional(f.string())}),bd=hd.extend({allowanceTarget:f.string(),exchangeAddress:f.string(),gas:f.number(),value:f.string(),transactionData:f.string()}),Ad=hd.extend({transactionData:f.array(f.string())}),jb=f.object({name:f.string(),amount:f.string(),token:Pr,percentage:f.string(),included:f.boolean(),amountUSD:f.optional(f.string())}),zR=f.object({name:f.string(),key:f.string(),logoURI:f.string()}),Xb=f.object({name:f.string(),symbol:f.string()}),WR=f.object({transactionData:f.string(),buyToken:Pr,sellToken:Pr,nonIncludedNonGasFees:f.string(),feeCosts:f.array(jb),chainId:ir,tool:zR,value:f.optional(f.string()),allowanceTarget:f.optional(f.string()),approvalMetadata:f.optional(Xb),approvalExactAmount:f.optional(f.string()),exchangeAddress:f.optional(f.string()),gasCosts:f.optional(f.array(f.number())),includedFeeCosts:f.optional(f.array(jb))}),vd=Yb.extend({baseProvider:Zb,executionDuration:f.number(),tags:f.array(f.string()),steps:f.array(WR)}),ZR=f.union([wd,bd,Ad,vd]),Vi=f.enum(["solana","eip155","sui","xchain"]),Gi=f.object({type:Vi,taker:Pr,buyToken:Pr,sellToken:Pr,slippageTolerance:f.number(),simulationTolerance:f.optional(f.number()),gasBuffer:f.optional(f.number()),quotes:f.array(ZR),tradeFee:f.optional(f.array(f.number())),estimateGasFee:f.optional(f.array(f.number())),includesAllProviders:f.optional(f.boolean())}),YR=f.enum(["swap-approval","swap","bridge-approval","bridge"]),XR=f.enum(["swap","bridge"]),JR=f.enum(["swap","bridge"]),Td=f.object({sellToken:Pr,buyToken:Pr,approvalMetadata:f.optional(Xb)}),eD=f.object({type:f.literal("solana"),transactions:f.array(f.string()),transactionTypes:f.array(XR),transactionPairs:f.optional(f.array(Td))}),tD=f.object({type:f.literal("evm"),transactions:f.array(Kn),transactionTypes:f.array(YR),transactionPairs:f.optional(f.array(Td))}),rD=f.object({type:f.literal("sui"),transactions:f.array(f.string()),transactionTypes:f.array(JR),transactionPairs:f.optional(f.array(Td))}),Ere=f.union([eD,tD,rD]);var xd=f.object({name:f.string(),amount:f.string()}).strict(),eu=f.object({name:f.string(),feeUsd:f.number().nullish(),amount:f.string(),time:f.object({text:f.string(),isFast:f.boolean()}),logoURI:f.string()}),Ire=f.union([xd,eu]);var zb=f.object({token:KR,owner:f.string()}),Jb=f.object({sell:zb,buy:zb});function de(t){return vd.safeParse(t).success}function Hr(t){return wd.safeParse(t).success}function Ft(t){return bd.safeParse(t).success}function jr(t){return Ad.safeParse(t).success}function yr(t){return Hr(t)||Ft(t)||jr(t)}i();a();var Wt="swapper";var eA=[Wt,"quotes"],Ae={quotesScope:()=>eA,quotes:({sellTokenCaip19:t,buyTokenCaip19:e,taker:r,amountValue:o,amountType:n,slippageTolerance:s,priorityFee:c,takerDestination:u,enableAutoSlippage:p})=>[...eA,{sellToken:t,buyToken:e,taker:r,takerDestination:u,amountValue:o,amountType:n,slippageTolerance:s,priorityFee:c,enableAutoSlippage:p}],transactions:t=>[Wt,"transactions",t],slippageTolerance:()=>[Wt,"slippageTolerance"],priorityFee:()=>[Wt,"priorityFee"],lastSubmittedPairs:()=>[Wt,"lastSubmittedPairs"],lastSelectedTokens:()=>[Wt,"lastSelectedTokens"],slippageSettings:()=>[Wt,"slippageSettings"],priorityFeeSettings:()=>[Wt,"priorityFeeSettings"],hasViewedAutoSlippageOptIn:()=>[Wt,"hasViewedAutoSlippageOptIn"],optimisticUpdates:()=>[Wt,"optimisticUpdates"],autoSlippageMigrationVersion:()=>[Wt,"autoSlippageMigrationVersion"]};var tA=async({callerAddress:t,contractAddress:e,networkId:r,sellAmount:o,allowanceTarget:n,approvalExactAmount:s,exchangeAddress:c,value:u,transactionData:p,type:l})=>{let d=[],g=[];if(e&&(await zg({callerAddress:t,spender:n,networkId:r,contractAddress:e})).lt(s??o.toString())){let h=await Wg({callerAddress:t,spender:n,networkId:r,contractAddress:e,exactAmount:s});d.push(h),g.push(`${l}-approval`)}let y=Kn.parse({type:"0x2",from:t,data:p,chainId:I.getEVMNetworkIDValue(r),to:c,...u==="0"?{}:{value:`0x${new j(u).toString(16)}`}});return d.push(y),g.push(l),{transactions:d,transactionTypes:g}},Ed=async({networkId:t,callerAddress:e,quote:r})=>{let{sellAmount:o,steps:n}=r,s=[],c=[],u=[];for(let p of n){let{allowanceTarget:l,exchangeAddress:d,value:g,transactionData:y,sellToken:S,buyToken:h,approvalMetadata:w}=p,b=S.resourceType==="address"?S.address:null,T=I.compareNetworkID(S.chainId,h.chainId)===0?"swap":"bridge";if(!l||!d||!y||!g)throw new Error("Missing bridge step data for EVM bridge quote.");let v=await tA({callerAddress:e,contractAddress:b,networkId:t,sellAmount:o,allowanceTarget:l,approvalExactAmount:p.approvalExactAmount,exchangeAddress:d,value:g,transactionData:y,type:T});s.push(...v.transactions),c.push(...v.transactionTypes),u.push({sellToken:S,buyToken:h,approvalMetadata:w}),v.transactionTypes.length==2&&v.transactionTypes.find(P=>P.includes("approval"))&&u.push({sellToken:S,buyToken:h,approvalMetadata:w})}return{type:"evm",transactions:s,transactionTypes:c,transactionPairs:u}},Id=async({quote:t,connection:e})=>{let r=[],o=[],n=[];for(let s of t.steps){let{transactionData:c,sellToken:u,buyToken:p}=s,l=I.compareNetworkID(u.chainId,p.chainId)===0?"swap":"bridge",d=await rA(c,e);r.push(Yp.serialize(d).transaction),o.push(l),n.push({sellToken:u,buyToken:p})}return{type:"solana",transactions:r,transactionTypes:o,transactionPairs:n}},Ki=async({networkId:t,callerAddress:e,quote:r,sellFungible:o})=>{let n=o.type==="ERC20"&&o?.data.tokenAddress?o.data.tokenAddress:null,{allowanceTarget:s,exchangeAddress:c,sellAmount:u,value:p}=r;return{type:"evm",...await tA({callerAddress:e,contractAddress:n,networkId:t,sellAmount:u,allowanceTarget:s,exchangeAddress:c,value:p,transactionData:r.transactionData,type:"swap"})}},rA=async(t,e)=>{let r=or(t,"bs58");return await Hg(r,{connection:e,transactionType:"Swap"})},$i=async({quote:t,connection:e})=>{let r=t.transactionData.map(c=>rA(c,e)),n=(await Promise.all(r)).map(c=>Yp.serialize(c).transaction);return{type:"solana",transactionTypes:n.map(()=>"swap"),transactions:n}},Hi=async({quote:t})=>({type:"sui",transactionTypes:Array(t.transactionData.length).fill("swap"),transactions:t.transactionData}),Sr=({callerAddress:t,sellFungible:e,quote:r})=>{let{connection:o}=ur(),n=Ae.transactions(r);return re({queryKey:n,enabled:!!r&&!!e,gcTime:0,staleTime:0,refetchInterval:Mi.Short,async queryFn(){try{if(!r)throw new Error("Missing quote");if(!e)throw new Error("Missing sell token");let s=e.data.chain.id;if(yr(r)){if(I.isEVMNetworkID(s)&&Ft(r))return await Ki({networkId:s,callerAddress:t,quote:r,sellFungible:e});if(I.isSolanaNetworkID(s)&&Hr(r))return $i({quote:r,connection:o});if(I.isSuiNetworkID(s)&&jr(r))return Hi({quote:r});throw new Error(`Single network swap quote not supported for network ID ${s}`)}if(de(r)){if(I.isEVMNetworkID(s))return await Ed({networkId:s,callerAddress:t,quote:r});if(I.isSolanaNetworkID(s))return await Id({quote:r,connection:o});throw new Error(`Bridge quote not supported for network ID ${s}`)}throw new Error("Swap quote type not supported")}catch(s){throw s instanceof Error&&U.captureError(s,"swapper"),s}}})};i();a();i();a();i();a();i();a();i();a();i();a();i();a();var Ps=t=>t.steps.map(e=>e.tool);var Me=t=>t?de(t)?Ps(t):t?.sources??[]:[];i();a();function _e(t){let e=t.reduce((r,o)=>r.add(o.name),new Set);return Array.from(e).join(" + ")}var nD=10,sD=Re(t=>({transitions:[],addTransition:(e,r)=>t(o=>{let n=iD(r,e);return n?{transitions:[n,...o.transitions].slice(0,nD)}:o})}));function ru(t,e){sD.getState().addTransition(t,e)}function iD(t,e){switch(e.type){case"idle":return;case"fetchingQuote":return;case"quote":return{sell:hr(e.response,e.sell,"sell"),buy:hr(e.response,e.buy,"buy"),sellAmount:e.quote.sellAmount,buyAmount:e.quote.buyAmount,provider:ji(e.quote),slippage:e.response.slippageTolerance,stateType:e.type,eventType:t.type,timestamp:Date.now()};case"simulationRequestErrored":return{sell:hr(e.response,e.sell,"sell"),buy:hr(e.response,e.buy,"buy"),sellAmount:e.quote.sellAmount,buyAmount:e.quote.buyAmount,provider:ji(e.quote),slippage:e.response.slippageTolerance,stateType:e.type,eventType:t.type,error:e.error,quoteTransactionData:tu(e.quote),timestamp:Date.now()};case"simulated":return;case"simulationFailed":return{sell:hr(e.response,e.sell,"sell"),buy:hr(e.response,e.buy,"buy"),sellAmount:e.quote.sellAmount,buyAmount:e.quote.buyAmount,provider:ji(e.quote),slippage:e.response.slippageTolerance,simulationError:e.simulationError,stateType:e.type,eventType:t.type,simulationWarning:e.scannedTransactionResult?.warnings,quoteTransactionData:tu(e.quote),simulationHumanReadableError:e.scannedTransactionResult?.simulationError?.humanReadableError,simulationRequestId:e.scannedTransactionResult?.advancedDetails?.requestId,timestamp:Date.now()};case"transactionSubmissionFailed":return{sell:hr(e.response,e.sell,"sell"),buy:hr(e.response,e.buy,"buy"),sellAmount:e.quote.sellAmount,buyAmount:e.quote.buyAmount,provider:ji(e.quote),slippage:e.response.slippageTolerance,error:e.error,stateType:e.type,eventType:t.type,quoteTransactionData:tu(e.quote),timestamp:Date.now()};case"transactionNotConfirmed":return{sell:hr(e.response,e.sell,"sell"),buy:hr(e.response,e.buy,"buy"),sellAmount:e.quote.sellAmount,buyAmount:e.quote.buyAmount,provider:ji(e.quote),slippage:e.response.slippageTolerance,stateType:e.type,eventType:t.type,quoteTransactionData:tu(e.quote),timestamp:Date.now(),error:e.error};default:return}}var ji=t=>{let e=Me(t);return _e(e)},hr=(t,e,r)=>{switch(r){case"sell":return{caip19:t.sellToken,symbol:e.data.symbol??void 0};case"buy":return{caip19:t.buyToken,symbol:e.data.symbol??void 0}}},tu=t=>{if(!de(t))return t.transactionData};var ou=class{onStateChange(e,r,o){ru(o,e)}};i();a();var nu=class{constructor(e){this.listeners=e}transition(e,r){try{let o=this.detectNextState(e,r);return this.listeners.forEach(n=>n.onStateChange(r,e,o)),o}catch{return e}}detectNextState(e,r){switch(r.type){case"quoteRequestStarted":return{type:"fetchingQuote",buy:r.buy,sell:r.sell,amount:r.amount};case"quoteResponseReceived":switch(e.type){case"fetchingQuote":case"quote":case"simulated":case"simulationRequestErrored":case"transactionSubmissionFailed":case"transactionNotConfirmed":let o=r.response.quotes[r.quoteIndex];if(!o)throw new Error("Quote index out of bounds");return{type:"quote",response:r.response,buy:e.buy,sell:e.sell,quote:o};default:throw new Error("Can't transition from this state")}case"quoteSelected":switch(e.type){case"quote":let o=e.response.quotes[r.quoteIndex];if(!o)throw new Error("Quote index out of bounds");return{type:"quote",quote:o,buy:e.buy,sell:e.sell,response:e.response};default:throw new Error("Can only transition to QuoteChanged from Quote")}case"simulationResponseReceived":switch(e.type){case"quote":return r.scannedTransactionResult.error?{type:"simulationFailed",quote:e.quote,buy:e.buy,sell:e.sell,response:e.response,scannedTransactionResult:r.scannedTransactionResult,simulationError:r.scannedTransactionResult.error}:{type:"simulated",quote:e.quote,buy:e.buy,sell:e.sell,response:e.response,scannedTransactionResult:r.scannedTransactionResult};default:throw new Error("Can only transition to Simulated from Simulating")}case"simulationRequestError":switch(e.type){case"quote":return{type:"simulationRequestErrored",buy:e.buy,sell:e.sell,quote:e.quote,response:e.response,error:r.error};default:throw new Error("Can only transition to SimulationRequestErrored from Simulating")}case"transactionSubmissionFailed":switch(e.type){case"simulated":case"simulationFailed":return{type:"transactionSubmissionFailed",quote:e.quote,buy:e.buy,sell:e.sell,response:e.response,scannedTransactionResult:e.scannedTransactionResult,error:r.error};default:throw new Error("Can only transition to SwapSubmitFailed from SubmittingSwap")}case"transactionConfirmationFailed":switch(e.type){case"simulated":return{type:"transactionNotConfirmed",quote:e.quote,buy:e.buy,sell:e.sell,txReceipt:r.txReceipt,response:e.response,scannedTransactionResult:e.scannedTransactionResult,error:r.error};default:throw new Error("Can only transition to TransactionNotConfirmed from ConfirmingTransaction")}}}};var aD=new nu(new Set([new ou])),oA=Re(t=>({state:{type:"idle"},transition:e=>{t(r=>{let o=r.state;return{state:aD.transition(o,e)}})}}));var zr=()=>{let t=oA(r=>r.state),e=oA(r=>r.transition);return{state:t,transition:e}};i();a();var cD="swap-priority-fee",uD=async(t,e,r)=>{let o=or(t,"bs58");return await Ea(o,r),{networkFeeEstimation:await Va(e,[o.message])}};function nA({swapTransactions:t,chainId:e,solanaConnection:r,enabled:o=!0}){return re({queryKey:[cD],queryFn:async()=>{if(!t)throw new Error("No swap transactions");if(t.type!=="solana")throw new Error("Trying to estimate network fee for non-solana txs");if(!e)throw new Error("Trying to execute swap with no chain id.");try{let n=t.transactions.map(u=>uD(u,e,r));return(await Promise.all(n)).map(u=>u.networkFeeEstimation.value)}catch{return[0]}},staleTime:0,enabled:o&&!!t&&t.transactions.length>0&&t.type==="solana"&&!!e})}i();a();var pD="swap-priority-fee";function sA({swapTransactions:t,chainId:e,estimatedFee:r,enabled:o=!0}){return re({queryKey:[pD,t],queryFn:async()=>{if(!t)throw new Error("No swap transactions");if(t.type!=="sui")throw new Error("Trying to estimate network fee for non-sui txs");if(!e)throw new Error("Trying to execute swap with no chain id.");if(r&&r.length===t.transactions.length)return r;try{return(await Promise.all(t.transactions.map(s=>Oa({networkID:e,transaction:Jn.deserializeTransactionString(s)})))).map(s=>s.gasBudget.toNumber())}catch{return[0]}},enabled:o&&!!t&&t.transactions.length>0&&t.type==="sui"&&!!e})}i();a();var lD=1.3,mD=t=>{switch(t){case se.Ethereum.Mainnet:case se.Ethereum.Sepolia:return 8e5;case se.Polygon.Mainnet:case se.Polygon.Amoy:return 5e5;case se.Base.Mainnet:case se.Base.Sepolia:return 5e5;default:return 0}},dD=t=>{switch(t){case se.Ethereum.Mainnet:case se.Ethereum.Sepolia:return 6e4;case se.Polygon.Mainnet:case se.Polygon.Amoy:return 6e4;case se.Base.Mainnet:case se.Base.Sepolia:return 6e4;default:return 0}},fD=(t,e)=>t.steps.flatMap(o=>o.gasCosts??[mD(e)]),gD=(t,e,r)=>{let o=Ft(e)?[e.gas]:fD(e,r);return t?t.transactionTypes.map(n=>n.includes("approval")?dD(r):o.shift()??0):o},Cs={estimateGas:({swapTransactions:t,evmGasEstimation:e,currentQuote:r,scanResult:o,networkID:n,includeGasBuffer:s,gasBuffer:c})=>{let{maxFeePerGas:u,maxPriorityFeePerGas:p}=e,l=gD(t,r,n),d=o?.advancedDetails?.gas;return o?.advancedDetails?.gasLimit>0&&(l=d),l.map(y=>({maxFeePerGas:u,maxPriorityFeePerGas:p,networkID:n,gasLimit:new q(y).multipliedBy(s?c??lD:1).integerValue(q.ROUND_CEIL)}))}};i();a();var iA={estimateGas:({solanaNetworkFees:t,networkID:e})=>t.map(r=>({networkID:e,value:r}))};i();a();var aA={estimateGas:({suiGasBudget:t,networkID:e})=>t.map(r=>({networkID:e,gasBudget:new q(r)}))};var yD=2e4,Fd=({includeGasBuffer:t=!1}={})=>{let{currentQuote:e,quoteResponse:r}=ne(),o=A(x=>x.sellFungible),n=o?.data.chain.id??se.Solana.Mainnet,{data:s}=Go(o?{address:o.data.walletAddress,networkID:o.data.chain.id}:void 0),c=s?.address??"",u=I.isEVMNetworkID(n),p=I.isSolanaNetworkID(n),l=I.isSuiNetworkID(n),d=A(x=>x.isFetchingQuote),{data:g,isFetching:y}=Sr({callerAddress:c,sellFungible:o,quote:e}),S={type:"transaction",userAccount:c,params:void 0,url:"https://phantom.com",networkID:n};g?.type==="evm"&&u&&(S.params={transactions:g.transactions});let{transition:h}=zr(),w=(0,Wi.useCallback)((x,E)=>{E&&h({type:"simulationRequestError",error:E}),x&&h({type:"simulationResponseReceived",scannedTransactionResult:x})},[h]),{data:b,isFetching:T}=qi(S,{disabled:p,onSettled:w}),{connection:v}=ur(),{data:P}=iy({networkID:u?n:se.Ethereum.Mainnet,transactionSpeed:"standard",gasLimit:new j(1),refetchInterval:yD,enabled:u}),{data:C,isLoading:B}=nA({swapTransactions:g,chainId:p?n:se.Solana.Mainnet,solanaConnection:v,enabled:p}),{data:G,isFetching:L}=sA({swapTransactions:g,chainId:l?n:se.Sui.Mainnet,estimatedFee:r?.estimateGasFee,enabled:l}),z=(0,Wi.useMemo)(()=>{if(!(d||!e)){if(u&&(Ft(e)||de(e))&&P&&g)return Cs.estimateGas({swapTransactions:g,evmGasEstimation:P,currentQuote:e,scanResult:b,includeGasBuffer:t,networkID:n,gasBuffer:r?.gasBuffer});if(p&&C!==void 0)return iA.estimateGas({solanaNetworkFees:C,networkID:n});if(l&&G!==void 0)return aA.estimateGas({suiGasBudget:G,networkID:n})}},[d,e,P,n,C,b,t,r?.gasBuffer,u,p,l,G,g]),K=!1;return p?K=B:l?K=y||T||L:u&&(K=y||T),(0,Wi.useMemo)(()=>({gasEstimation:z,isFetching:K,isError:P===void 0}),[z,K,P])};function SD(){let t=A(s=>s.setGasEstimation),{state:e}=zt(),{gasEstimation:r}=Fd(),{gasEstimation:o,isFetching:n}=Fd({includeGasBuffer:!0});(0,cA.useEffect)(()=>{if(e==="paused"){t({isFetching:!1});return}t({isFetching:n,estimate:r,estimateWithBuffer:o})},[e,t,r,o,n])}i();a();var dA=k(D());i();a();var hD="swap",uA=t=>new oy(t,hD),cn=io(oe,t=>uA(t));i();a();i();a();var pA=k(D());i();a();function lt({key:t,queryKey:e,defaultValue:r=null}){let o=ue();return re({enabled:!0,queryKey:e,gcTime:yd.Long,staleTime:1/0,async queryFn(){try{return await o.get(t)}catch(n){return n instanceof Error&&U.captureError(n,"swapper"),r}}})}function wt({key:t,queryKey:e}){let r=ue(),o=ee();return ve({async mutationFn(n){try{return await r.set(t,n)}catch(s){s instanceof Error&&U.captureError(s,"swapper");return}},async onMutate(n){await o.cancelQueries({queryKey:e});let s=o.getQueryData(e);return o.setQueryData(e,n),{previousValue:s}},onError(n,s,c){o.setQueryData(e,c?.previousValue)}})}var wD={type:"fixed"},bD={type:"auto"},Be=()=>{let{data:[t]}=Se(["enable-swapper-default-auto"]),{slippageSetting:e,isFetched:r,save:o}=AD();return{isFetched:r,selectedSetting:e??(t?bD:wD),setSlippageSetting:o}},AD=()=>{let{data:t,isFetched:e}=lt({key:"slippageSettings",queryKey:Ae.slippageSettings()}),{mutateAsync:r}=wt({key:"slippageSettings",queryKey:Ae.slippageSettings()}),o=(0,pA.useCallback)(async n=>{await r(n)},[r]);return{isFetched:e,slippageSetting:t,save:o}};function Eo(t,e,r){if(!r)return;if(e==="fixed")return r.slippageTolerance;let o=r.quotes[t];if(o)return de(o)?r.slippageTolerance:yr(o)?o.slippageTolerance:r.slippageTolerance}i();a();var su=(t,e,r)=>{if(r)return fe(t,e).times(q(r)).toNumber()},lA=(t,e)=>e&&t?e>t?e:t:e??t;function mA({buyAssetUsdValue:t,buyToken:e,sellAssetUsdValue:r,sellToken:o,buyAmount:n,sellAmount:s,phantomFeeUiAmount:c,priceImpact:u,provider:p,baseProvider:l,slippageTolerance:d,slippageType:g,sellSwapFilter:y,isRetry:S,analyticsContext:h}){if(e&&o){let w=su(n,e.data.decimals,t),b=su(s,o.data.decimals,r),T=lA(w,b);return{networkId:o.data.chain.id,chainId:I.getChainID(o.data.chain.id),toNetworkId:e.data.chain.id,toChainId:I.getChainID(e.data.chain.id),isBridge:o.data.chain.id!==e.data.chain.id,marketName:`${o.data.symbol}/${e.data.symbol}`,tradeDirection:"sell",swapSource:p,baseProvider:l,priceImpact:u,fromAssetSymbol:o.data.symbol??"",fromAssetAddress:o.data.tokenAddress,fromAssetAmount:fe(s,o.data.decimals),fromAssetUsdPrice:r,fromAssetUsdVolume:b,toAssetSymbol:e.data.symbol??"",toAssetAddress:e.data.tokenAddress,toAssetAmount:fe(n,e.data.decimals),toAssetUsdPrice:t,toAssetUsdVolume:w,totalUsdVolume:T,feeUsd:c,slippageTolerance:d,slippageType:g,sellSwapFilter:y,isRetry:S,analyticsContext:h}}return null}function Zi({buyAssetUsdValue:t,buyToken:e,sellAssetUsdValue:r,sellToken:o,quote:n,slippageTolerance:s,slippageType:c,sellSwapFilter:u,isRetry:p,analyticsContext:l,baseProvider:d}){if(e&&o){let{buyAmount:g,sellAmount:y}=n,S="priceImpact"in n?n.priceImpact:0,h="sources"in n?_e(n.sources):"",w=("fees"in n?n.fees.find(P=>P.type==="phantom")?.amount.toString():"")??"",b=su(g,e.data.decimals,t),T=su(y,o.data.decimals,r),v=lA(b,T);return{chainId:o.data.chain.id??e.data.chain.id,swap:{marketName:`${o.data.symbol}/${e.data.symbol}`,tradeDirection:"sell",swapSource:h,priceImpact:S,fromAssetSymbol:o.data.symbol??"",fromAssetAddress:o.data.tokenAddress??"",fromAssetAmount:fe(y,o.data.decimals),fromAssetUsdPrice:r??0,fromAssetUsdVolume:T??0,toAssetSymbol:e.data.symbol??"",toAssetAddress:e.data.tokenAddress??"",toAssetAmount:fe(g,e.data.decimals),toAssetUsdPrice:t,toAssetUsdVolume:b,totalUsdVolume:v??0,feeUsd:Number(w),slippageTolerance:s,slippageType:c,sellSwapFilter:u,isRetry:p,analyticsContext:l,baseProvider:d}}}return null}i();a();var iu=k(D());i();a();var Cd=t=>{let r={chainId:t.data.chain.id,name:t.data.name??"",symbol:t.data.symbol??"",decimals:t.data.decimals,logoURI:t.data.logoUri??""};return Ye(t.type)?{resourceType:"nativeToken",slip44:t.data.key,...r}:{resourceType:"address",address:t.data.key,...r}};i();a();function vD(t){let{mainnetID:e,iconUrl:r,name:o,tokenSymbol:n}=I[t];return{id:e,imageUrl:r,name:o,symbol:n}}var kd=t=>t.resourceType==="address"?t.address:t.slip44,Rd=(t,e)=>{let r={amount:"0",balance:new j(0),decimals:t.decimals,key:kd(t),logoUri:t.logoURI,mintAddress:kd(t),name:t.name,splTokenAccountPubkey:"",symbol:t.symbol,tokenAddress:kd(t),walletAddress:e,spamStatus:"NOT_VERIFIED"},o=vD(I.getChainID(t.chainId)),{nativeFungibleTokenType:n,nonNativeFungibleTokenType:s}=Cr.get(t.chainId),c=t.resourceType==="nativeToken"?n:s,u=TD(t);return{type:c,data:{chain:o,...r,...u}}};function TD(t){if(t.resourceType==="address"){if(I.isEVMNetworkID(t.chainId)||I.isSuiNetworkID(t.chainId))return{contractAddress:t.address};if(I.isSolanaNetworkID(t.chainId))return{mintAddress:t.address}}return{}}function xD(t){let e=Jb.safeParse(JSON.parse(t));if(!e.success)return null;let{sell:r,buy:o}=e.data,n=Rd(r.token,r.owner),s=Rd(o.token,o.owner);return!n||!s?null:{sellFungible:n,buyFungible:s}}function ED(t,e){let r=Cd(t),o=Cd(e);return!r||!o?"":JSON.stringify({sell:{token:r,owner:t.data.walletAddress},buy:{token:o,owner:e.data.walletAddress}})}var Ut=()=>{let{data:t,isFetching:e}=lt({key:"lastSubmittedPairs",queryKey:Ae.lastSubmittedPairs()}),r=(0,iu.useMemo)(()=>t?xD(t):null,[t]),{mutateAsync:o}=wt({key:"lastSubmittedPairs",queryKey:Ae.lastSubmittedPairs()}),n=(0,iu.useCallback)(async(s,c)=>{await o(ED(s,c))},[o]);return{pairs:r,isLoading:e,storePairs:n}};var Yi=({goToConfirmation:t})=>{let e=A(b=>b.sellUsdValue),r=A(b=>b.buyUsdValue),{currentQuote:o,quoteResponse:n,selectedProviderIndex:s,selectedBaseProvider:c}=ne(),u=A(b=>b.sellFungible),p=A(b=>b.buyFungible),l=A(b=>b.swapFilter),{selectedSetting:d}=Be(),{storePairs:g}=Ut(),y=oe(),S=cn(),{pause:h}=zt();return(0,dA.useCallback)(()=>{if(!o||!u||!p)return;let b=Eo(s,d.type,n);y.capture("swapperSwap");let T=Zi({buyToken:p,sellToken:u,sellAssetUsdValue:e,buyAssetUsdValue:r,quote:o,slippageTolerance:b,slippageType:d.type,sellSwapFilter:l,baseProvider:c});T&&(U.addBreadcrumb("swapper","approved","info",ao(T.swap)),S.approved(T)),h(),t(),I.compareNetworkID(u.data.chain.id,p.data.chain.id)===0&&g(u,p)},[o,u,p,s,d.type,n,y,e,r,h,t,S,g,l,c])};i();a();var Dd=k(D());i();a();var au=(t,e)=>{if(e===void 0)return;let r=$(t),o=Y(r);return e[o]};i();a();var fA=k(Ex()),cu=(t,e)=>{let r=(0,fA.default)(t),o=r.value();return Math.abs(o)>0&&Math.abs(o)<1e-5?`< ${o<0?"-":""}0.00001`:e>=12?r.format("0,0.[0]"):e>=9?r.format("0,0.[000]"):r.format("0,0.[00000]")};var uu={network:{id:I.solana.mainnetID,name:I.solana.name,symbol:I.solana.tokenSymbol,imageUrl:I.solana.iconUrl},tokenType:"SolanaNative",symbol:"",logoUri:"",tokenAddress:"",amount:"",amountUsd:0};function ID({goToConfirmation:t}){let e=A(d=>d.buyFungible),r=A(d=>d.sellFungible),o=A(d=>d.setBuyUsdValue),n=A(d=>d.setSellUsdValue),s=(0,Dd.useMemo)(()=>{let d=[];return e&&r&&(d.push($(e)),d.push($(r))),{query:{data:d}}},[e,r]),{data:c}=cr(s),{currentQuote:u,quoteResponse:p}=ne(),l=Yi({goToConfirmation:t});return(0,Dd.useMemo)(()=>{if(!p||!u||!e||!r)return{buyToken:uu,sellToken:uu,onSwap:l};let d=e?.data,g=r?.data;if(!d||!g)return{buyToken:uu,sellToken:uu,onSwap:l};let y="",S=null,h="",w=null,{sellAmount:b,buyAmount:T}=u,v=fe(T,d.decimals),P=fe(b,g.decimals),C=j(P),B=String(v).split(".")[0].length,G=P.toString().split(".")[0].length,L=d.symbol?.length,z=g.symbol?.length,K=B&&L?B+L:0,x=G&&z?G+z:0;h=`${cu(C,x)} ${g.symbol}`,y=`${cu(v,K)} ${d.symbol}`;let E=au(e,c),F=au(r,c);return E?.usd&&(S=v.multipliedBy(E.usd).toNumber(),o(E.usd)),F?.usd&&(w=C.multipliedBy(F.usd).toNumber(),n(F.usd)),{buyToken:{network:d.chain,tokenType:e.type,symbol:d.symbol,logoUri:d.logoUri,tokenAddress:d.tokenAddress,amount:y,amountUsd:S},sellToken:{network:g.chain,tokenType:r.type,symbol:g.symbol,logoUri:g.logoUri,tokenAddress:g.tokenAddress,amount:h,amountUsd:w},onSwap:l}},[p,u,e,r,c,l,o,n])}i();a();var Lt=k(D());i();a();i();a();function gA(t,e){if(!t||e.length===0)return null;let r=new Set(e),o=1/0,n=null;for(let s of t){let c=new q(s.data.amount??0).gt(0);if(!r.has(s.data.chain.id)||!c)continue;let u=e.indexOf(s.data.chain.id);if(u<o&&(o=u,n=s.data.chain.id,u===0))break}return n}var _d=(t,e,r)=>{let o=e.length?gA(t,e):null;return!o||!r.includes(o)?fd:Le.get(o).nativeFungible},Nd=t=>t?Le.get(t).usdcFungible:Li,Xi=(t,e)=>{let r=Ko(e);return t.find(o=>{if(Ye(r)&&r===o.type)return!0;if(e.resourceType==="address"){let n=py(o);return Vo(e)?$p(e.address,n):e.address===n}})},pu=(t,e,r)=>{let o=Xi(r,t);if(!o){if(Ye(Ko(t)))o=Le.get(t.chainId).nativeFungible;else if(e&&e.chainId===t.chainId){let n=Ye(Ko(e)),{usdcFungible:s,nativeFungible:c}=Le.get(e.chainId);o=n?s:c}}return o},Bd=(t,e=!1)=>{let{usdcFungible:r,nativeFungible:o}=Le.get(t.chainId),n=Y(t),s=Y($(r));return Ye(Ko(t))?r:$p(n,s)?o:e?r:o};i();a();var yA=k(D());i();a();var Qd=k(D());i();a();function pn(t,e){return t.data.key===e.data.key}function ln({enablePrices:t,enableSorting:e}){let{fungibles:r,isLoadingTokens:o,tokensError:n,refetch:s}=Bt({enablePrices:t,enableSorting:e}),c=gd(),u=A(d=>d.sellFungible),p=r.filter(d=>c(d.data.chain.id)&&d.type!=="CompressedSPL"),l=(0,Qd.useMemo)(()=>{if(u){let d=p.findIndex(y=>pn(y,u)),g=p[d];g&&g.data.amount!==u.data.amount&&(p[d]=u)}return p.filter(d=>d.data.amount!=="0")},[p,u]);return(0,Qd.useMemo)(()=>({assets:l,isLoading:o,error:n,refetchTokens:s}),[l,o,n,s])}var SA=t=>{let e=Xn(),{pairs:r}=Ut(),{assets:o}=ln({enablePrices:!1,enableSorting:!1});return(0,yA.useMemo)(()=>{let n=Nd(t?.data.chain.id),u=((r?e.includes(r.buyFungible.data.chain.id):!1)?r?.buyFungible:void 0)??n;return u?Xi(o,$(u))??u:void 0},[t,r,e,o])};i();a();var hA=k(D());var lu=()=>{let t=Xn(),e=To(),{pairs:r}=Ut(),{assets:o}=ln({enablePrices:!1,enableSorting:!1}),{fungibles:n}=Bt();return(0,hA.useMemo)(()=>{let s=_d(n,t,e),c=r?$(r?.sellFungible):void 0,u=r?$(r?.buyFungible):void 0;return((c?t.includes(c.chainId):!1)&&c&&u?pu(c,u,o):void 0)??s},[t,r,o,e,n])};var wA=t=>{if(t)try{return qo(t)}catch{return}},bA=t=>$o(t)??[];function PD({paramsSellFungible:t,paramsSellAmount:e,paramsBuyFungible:r,navRef:o}){let{data:[n]}=Se(["enable-swapper-default-usdc"]),{isLoading:s}=Ut(),c=(0,Lt.useMemo)(()=>wA(t),[t]),u=(0,Lt.useMemo)(()=>wA(r),[r]),p=e,[l,d]=(0,Lt.useState)(!1),[g,y]=(0,Lt.useState)(!1),{data:S}=he(),{assets:h,isLoading:w}=ln({enablePrices:!1,enableSorting:!1}),{data:b,isPending:T}=Xo({query:u?.resourceType==="address"?u.address:u?.slip44??"",enableQuery:!!u,networkIds:[u?.chainId??I.solana.mainnetID],searchContext:"swapper"}),v=(0,Lt.useMemo)(()=>{let N=[];return c&&N.push(...bA(c)),u&&N.push(...bA(u)),N},[c,u]),{fungibles:P,isLoadingTokens:C,isRefetchingTokens:B,tokensError:G}=Bt({keys:v,enablePrices:!1,enableSorting:!1}),L=lu(),z=A(N=>N.sellFungible),K=SA(z),x=A(N=>N.setBuyFungible),E=A(N=>N.setSellFungible),F=A(N=>N.setUiSellAmountCryptoInput),Q=A(N=>N.setSellAmount),O=A(N=>N.setSwapFilter);return(0,Lt.useEffect)(()=>{E(void 0),d(!1),x(void 0),y(!1)},[c,u,E,x,S?.identifier,s,o]),(0,Lt.useEffect)(()=>{if(l)return;let N;if(c){if(w)return;N=pu(c,u,h)}else!c&&u?N=Bd(u):N=L;d(!0),E(N)},[c,u,L,h,E,w,l]),(0,Lt.useEffect)(()=>{if(g)return;let N;if(u){if(T)return;if(N=Xi(b??[],u),!N){let{usdcFungible:Z,nativeFungible:_}=Le.get(u.chainId);N=Ye(Ko(u))?_:Z}}else!u&&c?N=Bd(c,n):N=K;if(!C&&!B&&!G&&P&&N){let Z=Y($(N)),_=P.find(ye=>Y($(ye))===Z);_&&(N=_)}y(!0),x(N)},[u,c,b,T,x,g,K,P,C,B,G,n]),(0,Lt.useEffect)(()=>{p?(Q(p),F(p)):(Q(""),F("")),O(void 0)},[p,o,F,Q,O]),{isLoading:(!!c||!!u)&&(!g||!l)||s}}i();a();var br=k(D()),IA=k(Ji());i();a();var vA=({sellToken:t,buyToken:e,taker:r,takerDestination:o,amount:n,slippageTolerance:s,pollInterval:c,pollerState:u,enableAutoSlippage:p,priorityFee:l,getSwapQuotesStrategy:d})=>{let g=oe(),y=t?$(t):void 0,S=e?$(e):void 0,h=t?ly(t,n.value).toString():n.value,w=!!n.value&&!!e&&!!t&&!!r&&u==="resumed";w||d.stopFetching();let b=Ae.quotes({sellTokenCaip19:y,buyTokenCaip19:S,taker:r,amountValue:h,amountType:n.type,takerDestination:o,slippageTolerance:s,enableAutoSlippage:p,priorityFee:l}),T=d.getFetchInterval(c);return re({queryKey:b,enabled:w,gcTime:0,staleTime:0,refetchInterval:T,async queryFn({signal:v}){if(!n||!S||!y||!e||!t||!r)throw new Error("missing necessary args");let P=await d.fetch({sellTokenCaip19:y,buyTokenCaip19:S,taker:r,takerDestination:o,sellAmount:h,exactOut:n.type==="buy",slippageTolerance:s,signal:v,enableAutoSlippage:p,priorityFee:l,sell:t,buy:e,amount:{value:h,type:n.type}},b);return g.capture("swapperQuotesResult",{data:{numQuotes:P.quotes.length,sellToken:t,fromNetworkId:y.chainId,toNetworkId:S.chainId}}),P}})};i();a();var TA=k(D());var xA=()=>{let t=A(n=>n.sellAmount),e=A(n=>n.sellFungible),r=A(n=>n.buyFungible),o=A(n=>n.setSelectedBaseProvider);(0,TA.useEffect)(()=>{o(It)},[t,e,r,o])};i();a();var Oe=(t,e)=>!!t&&!!e&&I.compareNetworkID(t,e)!==0;i();a();var ks=()=>{let t=A(g=>g.sellFungible),e=A(g=>g.buyFungible),r=A(g=>g.sellAmount),o=t?$(t):null,{data:n}=St({query:o?{data:o}:void 0}),s=t?.data.chain.id,c=e?.data.chain.id,u=n?.usd;if(!s||!c||!r||!u||I.compareNetworkID(s,c)===0)return!0;let p=Ze(Number(r),u),l=Le.get(s).bridgeMinimumUsdAmounts,d=Le.get(c).bridgeMinimumUsdAmounts;return l<=p&&d<=p};i();a();var wr=()=>lt({key:"priorityFee",queryKey:Ae.priorityFee()}),EA=()=>wt({key:"priorityFee",queryKey:Ae.priorityFee()});i();a();var Io=()=>lt({key:"slippageTolerance",queryKey:Ae.slippageTolerance()}),mu=()=>wt({key:"slippageTolerance",queryKey:Ae.slippageTolerance()});function CD({skipInitialBuyFungible:t,getSwapQuotesStrategy:e}){let r=A(_=>_.sellAmount),o=A(_=>_.amountType),s=A(_=>_.buyFungible)??(t?void 0:Li),c=A(_=>_.sellFungible),{data:u}=wr(),{state:p,intervalMs:l}=zt(),d=A(_=>_.resetQuote),g=A(_=>_.setHasNoRoutes),y=A(_=>_.setError),S=A(_=>_.setIsFetchingQuote),h=A(_=>_.setQuoteResponse),w=A(_=>_.setSelectedProviderIndex),{data:[b]}=Se(["enable-auto-slippage"]),{data:T}=Io(),{mutateAsync:v}=mu(),{selectedSetting:P}=Be(),C=b&&P.type==="auto",B=ks(),G=(0,IA.default)(B),L=(0,br.useMemo)(()=>{let _=o==="sell"?{amount:r,fungible:c}:{amount:r,fungible:s};return new j(_.amount).isGreaterThan(0)&&_.fungible?hg(_.amount,_.fungible.data.decimals).toString():(d(),"")},[o,s,d,r,c]),z=Oe(c?.data?.chain.id,s?.data.chain.id),{data:K}=Go(c?.data?.chain.id),{data:x}=Go(s?.data.chain.id),E=(0,br.useMemo)(()=>{if(K)return{chainId:K.networkID,address:K.address,resourceType:"address"}},[K]),F=(0,br.useMemo)(()=>{if(z)return{chainId:x?.networkID,address:x?.address,resourceType:"address"}},[z,x?.address,x?.networkID]),{data:Q,error:O,isLoading:M}=vA({sellToken:c,buyToken:s,taker:E,takerDestination:F,amount:{value:B?L:"",type:o},slippageTolerance:C?void 0:T??void 0,enableAutoSlippage:C,priorityFee:u??void 0,pollInterval:l,pollerState:p,getSwapQuotesStrategy:e}),N=(0,br.useCallback)(_=>{y(null),w(0),S(!1),g(!1),h(_);let ye=Eo(0,P.type,_);ye&&T!==ye&&v(ye)},[y,g,S,h,w,v,T,P.type]),Z=(0,br.useCallback)(_=>{d(),S(!1),g(!0),y(_)},[d,y,g,S]);(0,br.useEffect)(()=>{p!=="paused"&&(M?S(!0):Q?N(Q):O&&Z(O))},[O,Q,M,N,Z,S,p,B]),(0,br.useEffect)(()=>{B?G===!1&&B&&(y(null),g(!1)):(y(new Ne({key:"InsufficientSellAmount"})),g(!0))},[B,G,y,g]),xA()}i();a();var fu=k(D());i();a();i();a();var Mt=t=>{let e=Math.floor(t/3600),r=Math.floor((t-e*3600)/60),o=t%60;if(e>0)return R.t("swapProviderEstimatedTimeHM",{hours:e,minutes:r});if(r>0){let n=o>0?r+1:r;return R.t("swapProviderEstimatedTimeM",{minutes:n})}return R.t("swapProviderEstimatedTimeS",{seconds:o})};i();a();var du=t=>t.steps.reduce((e,r)=>e.plus(new j(r.nonIncludedNonGasFees)),new j(0)),ea=t=>t.steps.flatMap(o=>o.feeCosts).reduce((o,n)=>o.plus(n.amountUSD??0),new j(0));i();a();function Zt(t,e,r){if(e.lte(0))return null;let o=Y({chainId:t,resourceType:"nativeToken",slip44:I.getSlip44(t)}),n=I.getTokenDecimals(t),s=I.getTokenSymbol(t);if(!o||!n||!s)return null;let c=e.div(oi(n)),u=r[o];return u?.usd?c.times(u.usd).toNumber():null}var kD=5*60,PA=t=>{if(de(t))return _e(Ps(t));let{sources:e}=t;return _e(e)},FA=({quotes:t,buyTokenNetworkId:e,buyTokenDecimals:r,buyTokenSymbol:o})=>t.map(n=>{let{buyAmount:s}=n,c=Cr.get(e).formDisplayPrecision;return{name:PA(n),amount:`${Tt(fe(s,r),c)} ${o}`}}),CA=({quotes:t,buyTokenNetworkId:e,buyTokenDecimals:r,buyTokenSymbol:o,networkIDForFees:n,networkFee:s,priceMap:c})=>t.filter(de).map(u=>{let{buyAmount:p,executionDuration:l,steps:d}=u,y=du(u).plus(s),S=d.find(w=>!!w.tool.logoURI),h=Cr.get(e).formDisplayPrecision;return{name:PA(u),feeUsd:n&&c?Zt(n,y,c):null,amount:`${Tt(fe(p,r),h)} ${o}`,time:{text:Mt(l),isFast:l<=kD},logoURI:S?.tool.logoURI??""}});i();a();var RD={aggregate(t){return t.reduce((e,r)=>({...e,gasLimit:e.gasLimit.plus(r.gasLimit)}),{networkID:I.ethereum.mainnetID,gasLimit:new j(0),maxFeePerGas:t[0].maxFeePerGas,maxPriorityFeePerGas:t[0].maxPriorityFeePerGas})}},DD={aggregate(t){return t.reduce((e,r)=>({...e,value:e.value+r.value}),{networkID:I.solana.mainnetID,value:0})}},_D={aggregate(t){return t.reduce((e,r)=>({...e,gasBudget:e.gasBudget.plus(r.gasBudget)}),{networkID:I.sui.mainnetID,gasBudget:new j(0)})}},ta=t=>{if(!(!t||t.length===0)){if(Ma(t[0]))return RD.aggregate(t);if(qg(t[0]))return DD.aggregate(t);if(Vg(t[0]))return _D.aggregate(t)}};function ND({selectQuote:t}){let{quoteResponse:e,isFetchingQuote:r,quotes:o,selectedProviderIndex:n}=ne(),s=A(P=>P.setSelectedProviderIndex),c=A(P=>P.gasEstimation.estimateWithBuffer),u=A(P=>P.sellFungible),p=A(P=>P.buyFungible),l=u?.data.chain.id,{data:d}=ci(l,ta(c)),y=vo().map(P=>Nt(P)),{data:S={}}=cr({query:{data:y}}),h=e?.type==="xchain",w=(0,fu.useMemo)(()=>p?h?CA({quotes:o,buyTokenNetworkId:p.data.chain.id,buyTokenDecimals:p.data.decimals,buyTokenSymbol:p.data.symbol,networkIDForFees:l,networkFee:d?.gasEstimationAmount??new j(0),priceMap:S}):FA({quotes:o,buyTokenNetworkId:p.data.chain.id,buyTokenDecimals:p.data.decimals,buyTokenSymbol:p.data.symbol}):[],[p,h,o,l,d?.gasEstimationAmount,S]),b=oe(),{transition:T}=zr(),v=(0,fu.useCallback)(P=>{let C=w[P];b.capture("swapperProviderSelected",{data:{provider:C.name}}),s(P),t(o,P),T({type:"quoteSelected",quoteIndex:P})},[s,w,b,T,o,t]);return{rows:w,selectedProviderIndex:n,isLoadingProviders:r,setSelectedProviderIndex:v}}i();a();var kA=k(D());var Wr=()=>{let{resume:t}=zt(),e=A(r=>r.resetSwapper);return(0,kA.useCallback)(()=>{t(),e()},[e,t])};i();a();var Fn=k(D());i();a();var be;(function(t){t.assertEqual=n=>n;function e(n){}t.assertIs=e;function r(n){throw new Error}t.assertNever=r,t.arrayToEnum=n=>{let s={};for(let c of n)s[c]=c;return s},t.getValidEnumValues=n=>{let s=t.objectKeys(n).filter(u=>typeof n[n[u]]!="number"),c={};for(let u of s)c[u]=n[u];return t.objectValues(c)},t.objectValues=n=>t.objectKeys(n).map(function(s){return n[s]}),t.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let s=[];for(let c in n)Object.prototype.hasOwnProperty.call(n,c)&&s.push(c);return s},t.find=(n,s)=>{for(let c of n)if(s(c))return c},t.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function o(n,s=" | "){return n.map(c=>typeof c=="string"?`'${c}'`:c).join(s)}t.joinValues=o,t.jsonStringifyReplacer=(n,s)=>typeof s=="bigint"?s.toString():s})(be||(be={}));var Md;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Md||(Md={}));var W=be.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yr=t=>{switch(typeof t){case"undefined":return W.undefined;case"string":return W.string;case"number":return isNaN(t)?W.nan:W.number;case"boolean":return W.boolean;case"function":return W.function;case"bigint":return W.bigint;case"symbol":return W.symbol;case"object":return Array.isArray(t)?W.array:t===null?W.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?W.promise:typeof Map<"u"&&t instanceof Map?W.map:typeof Set<"u"&&t instanceof Set?W.set:typeof Date<"u"&&t instanceof Date?W.date:W.object;default:return W.unknown}},V=be.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),BD=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),Ct=class t extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=o=>{this.issues=[...this.issues,o]},this.addIssues=(o=[])=>{this.issues=[...this.issues,...o]};let r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){let r=e||function(s){return s.message},o={_errors:[]},n=s=>{for(let c of s.issues)if(c.code==="invalid_union")c.unionErrors.map(n);else if(c.code==="invalid_return_type")n(c.returnTypeError);else if(c.code==="invalid_arguments")n(c.argumentsError);else if(c.path.length===0)o._errors.push(r(c));else{let u=o,p=0;for(;p<c.path.length;){let l=c.path[p];p===c.path.length-1?(u[l]=u[l]||{_errors:[]},u[l]._errors.push(r(c))):u[l]=u[l]||{_errors:[]},u=u[l],p++}}};return n(this),o}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,be.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){let r={},o=[];for(let n of this.issues)n.path.length>0?(r[n.path[0]]=r[n.path[0]]||[],r[n.path[0]].push(e(n))):o.push(e(n));return{formErrors:o,fieldErrors:r}}get formErrors(){return this.flatten()}};Ct.create=t=>new Ct(t);var _s=(t,e)=>{let r;switch(t.code){case V.invalid_type:t.received===W.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case V.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,be.jsonStringifyReplacer)}`;break;case V.unrecognized_keys:r=`Unrecognized key(s) in object: ${be.joinValues(t.keys,", ")}`;break;case V.invalid_union:r="Invalid input";break;case V.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${be.joinValues(t.options)}`;break;case V.invalid_enum_value:r=`Invalid enum value. Expected ${be.joinValues(t.options)}, received '${t.received}'`;break;case V.invalid_arguments:r="Invalid function arguments";break;case V.invalid_return_type:r="Invalid function return type";break;case V.invalid_date:r="Invalid date";break;case V.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:be.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case V.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case V.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case V.custom:r="Invalid input";break;case V.invalid_intersection_types:r="Intersection results could not be merged";break;case V.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case V.not_finite:r="Number must be finite";break;default:r=e.defaultError,be.assertNever(t)}return{message:r}},NA=_s;function QD(t){NA=t}function gu(){return NA}var yu=t=>{let{data:e,path:r,errorMaps:o,issueData:n}=t,s=[...r,...n.path||[]],c={...n,path:s};if(n.message!==void 0)return{...n,path:s,message:n.message};let u="",p=o.filter(l=>!!l).slice().reverse();for(let l of p)u=l(c,{data:e,defaultError:u}).message;return{...n,path:s,message:u}},UD=[];function H(t,e){let r=gu(),o=yu({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===_s?void 0:_s].filter(n=>!!n)});t.common.issues.push(o)}var ct=class t{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){let o=[];for(let n of r){if(n.status==="aborted")return ae;n.status==="dirty"&&e.dirty(),o.push(n.value)}return{status:e.value,value:o}}static async mergeObjectAsync(e,r){let o=[];for(let n of r){let s=await n.key,c=await n.value;o.push({key:s,value:c})}return t.mergeObjectSync(e,o)}static mergeObjectSync(e,r){let o={};for(let n of r){let{key:s,value:c}=n;if(s.status==="aborted"||c.status==="aborted")return ae;s.status==="dirty"&&e.dirty(),c.status==="dirty"&&e.dirty(),s.value!=="__proto__"&&(typeof c.value<"u"||n.alwaysSet)&&(o[s.value]=c.value)}return{status:e.value,value:o}}},ae=Object.freeze({status:"aborted"}),Ds=t=>({status:"dirty",value:t}),mt=t=>({status:"valid",value:t}),Od=t=>t.status==="aborted",qd=t=>t.status==="dirty",mn=t=>t.status==="valid",na=t=>typeof Promise<"u"&&t instanceof Promise;function Su(t,e,r,o){if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?o:r==="a"?o.call(t):o?o.value:e.get(t)}function BA(t,e,r,o,n){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?n.call(t,r):n?n.value=r:e.set(t,r),r}var te;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(te||(te={}));var ra,oa,qt=class{constructor(e,r,o,n){this._cachedPath=[],this.parent=e,this.data=r,this._path=o,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},RA=(t,e)=>{if(mn(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let r=new Ct(t.common.issues);return this._error=r,this._error}}};function pe(t){if(!t)return{};let{errorMap:e,invalid_type_error:r,required_error:o,description:n}=t;if(e&&(r||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(c,u)=>{var p,l;let{message:d}=t;return c.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:(p=d??o)!==null&&p!==void 0?p:u.defaultError}:c.code!=="invalid_type"?{message:u.defaultError}:{message:(l=d??r)!==null&&l!==void 0?l:u.defaultError}},description:n}}var le=class{get description(){return this._def.description}_getType(e){return Yr(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Yr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ct,ctx:{common:e.parent.common,data:e.data,parsedType:Yr(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let r=this._parse(e);if(na(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){let r=this._parse(e);return Promise.resolve(r)}parse(e,r){let o=this.safeParse(e,r);if(o.success)return o.data;throw o.error}safeParse(e,r){var o;let n={common:{issues:[],async:(o=r?.async)!==null&&o!==void 0?o:!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yr(e)},s=this._parseSync({data:e,path:n.path,parent:n});return RA(n,s)}"~validate"(e){var r,o;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yr(e)};if(!this["~standard"].async)try{let s=this._parseSync({data:e,path:[],parent:n});return mn(s)?{value:s.value}:{issues:n.common.issues}}catch(s){!((o=(r=s?.message)===null||r===void 0?void 0:r.toLowerCase())===null||o===void 0)&&o.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(s=>mn(s)?{value:s.value}:{issues:n.common.issues})}async parseAsync(e,r){let o=await this.safeParseAsync(e,r);if(o.success)return o.data;throw o.error}async safeParseAsync(e,r){let o={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yr(e)},n=this._parse({data:e,path:o.path,parent:o}),s=await(na(n)?n:Promise.resolve(n));return RA(o,s)}refine(e,r){let o=n=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(n):r;return this._refinement((n,s)=>{let c=e(n),u=()=>s.addIssue({code:V.custom,...o(n)});return typeof Promise<"u"&&c instanceof Promise?c.then(p=>p?!0:(u(),!1)):c?!0:(u(),!1)})}refinement(e,r){return this._refinement((o,n)=>e(o)?!0:(n.addIssue(typeof r=="function"?r(o,n):r),!1))}_refinement(e){return new kt({schema:this,typeName:ie.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Ot.create(this,this._def)}nullable(){return vr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jr.create(this)}promise(){return Co.create(this,this._def)}or(e){return wn.create([this,e],this._def)}and(e){return bn.create(this,e,this._def)}transform(e){return new kt({...pe(this._def),schema:this,typeName:ie.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let r=typeof e=="function"?e:()=>e;return new En({...pe(this._def),innerType:this,defaultValue:r,typeName:ie.ZodDefault})}brand(){return new sa({typeName:ie.ZodBranded,type:this,...pe(this._def)})}catch(e){let r=typeof e=="function"?e:()=>e;return new In({...pe(this._def),innerType:this,catchValue:r,typeName:ie.ZodCatch})}describe(e){let r=this.constructor;return new r({...this._def,description:e})}pipe(e){return ia.create(this,e)}readonly(){return Pn.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},LD=/^c[^\s-]{8,}$/i,MD=/^[0-9a-z]+$/,OD=/^[0-9A-HJKMNP-TV-Z]{26}$/i,qD=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,VD=/^[a-z0-9_-]{21}$/i,GD=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,KD=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$D=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,HD="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Ld,jD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,zD=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,WD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ZD=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,YD=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,XD=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,QA="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",JD=new RegExp(`^${QA}$`);function UA(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function e_(t){return new RegExp(`^${UA(t)}$`)}function LA(t){let e=`${QA}T${UA(t)}`,r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function t_(t,e){return!!((e==="v4"||!e)&&jD.test(t)||(e==="v6"||!e)&&WD.test(t))}function r_(t,e){if(!GD.test(t))return!1;try{let[r]=t.split("."),o=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),n=JSON.parse(atob(o));return!(typeof n!="object"||n===null||!n.typ||!n.alg||e&&n.alg!==e)}catch{return!1}}function o_(t,e){return!!((e==="v4"||!e)&&zD.test(t)||(e==="v6"||!e)&&ZD.test(t))}var Po=class t extends le{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==W.string){let s=this._getOrReturnCtx(e);return H(s,{code:V.invalid_type,expected:W.string,received:s.parsedType}),ae}let o=new ct,n;for(let s of this._def.checks)if(s.kind==="min")e.data.length<s.value&&(n=this._getOrReturnCtx(e,n),H(n,{code:V.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="max")e.data.length>s.value&&(n=this._getOrReturnCtx(e,n),H(n,{code:V.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),o.dirty());else if(s.kind==="length"){let c=e.data.length>s.value,u=e.data.length<s.value;(c||u)&&(n=this._getOrReturnCtx(e,n),c?H(n,{code:V.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):u&&H(n,{code:V.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),o.dirty())}else if(s.kind==="email")$D.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"email",code:V.invalid_string,message:s.message}),o.dirty());else if(s.kind==="emoji")Ld||(Ld=new RegExp(HD,"u")),Ld.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"emoji",code:V.invalid_string,message:s.message}),o.dirty());else if(s.kind==="uuid")qD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"uuid",code:V.invalid_string,message:s.message}),o.dirty());else if(s.kind==="nanoid")VD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"nanoid",code:V.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid")LD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"cuid",code:V.invalid_string,message:s.message}),o.dirty());else if(s.kind==="cuid2")MD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"cuid2",code:V.invalid_string,message:s.message}),o.dirty());else if(s.kind==="ulid")OD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"ulid",code:V.invalid_string,message:s.message}),o.dirty());else if(s.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),H(n,{validation:"url",code:V.invalid_string,message:s.message}),o.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"regex",code:V.invalid_string,message:s.message}),o.dirty())):s.kind==="trim"?e.data=e.data.trim():s.kind==="includes"?e.data.includes(s.value,s.position)||(n=this._getOrReturnCtx(e,n),H(n,{code:V.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),o.dirty()):s.kind==="toLowerCase"?e.data=e.data.toLowerCase():s.kind==="toUpperCase"?e.data=e.data.toUpperCase():s.kind==="startsWith"?e.data.startsWith(s.value)||(n=this._getOrReturnCtx(e,n),H(n,{code:V.invalid_string,validation:{startsWith:s.value},message:s.message}),o.dirty()):s.kind==="endsWith"?e.data.endsWith(s.value)||(n=this._getOrReturnCtx(e,n),H(n,{code:V.invalid_string,validation:{endsWith:s.value},message:s.message}),o.dirty()):s.kind==="datetime"?LA(s).test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{code:V.invalid_string,validation:"datetime",message:s.message}),o.dirty()):s.kind==="date"?JD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{code:V.invalid_string,validation:"date",message:s.message}),o.dirty()):s.kind==="time"?e_(s).test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{code:V.invalid_string,validation:"time",message:s.message}),o.dirty()):s.kind==="duration"?KD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"duration",code:V.invalid_string,message:s.message}),o.dirty()):s.kind==="ip"?t_(e.data,s.version)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"ip",code:V.invalid_string,message:s.message}),o.dirty()):s.kind==="jwt"?r_(e.data,s.alg)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"jwt",code:V.invalid_string,message:s.message}),o.dirty()):s.kind==="cidr"?o_(e.data,s.version)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"cidr",code:V.invalid_string,message:s.message}),o.dirty()):s.kind==="base64"?YD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"base64",code:V.invalid_string,message:s.message}),o.dirty()):s.kind==="base64url"?XD.test(e.data)||(n=this._getOrReturnCtx(e,n),H(n,{validation:"base64url",code:V.invalid_string,message:s.message}),o.dirty()):be.assertNever(s);return{status:o.value,value:e.data}}_regex(e,r,o){return this.refinement(n=>e.test(n),{validation:r,code:V.invalid_string,...te.errToObj(o)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...te.errToObj(e)})}url(e){return this._addCheck({kind:"url",...te.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...te.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...te.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...te.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...te.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...te.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...te.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...te.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...te.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...te.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...te.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...te.errToObj(e)})}datetime(e){var r,o;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(r=e?.offset)!==null&&r!==void 0?r:!1,local:(o=e?.local)!==null&&o!==void 0?o:!1,...te.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...te.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...te.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...te.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...te.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...te.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...te.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...te.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...te.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...te.errToObj(r)})}nonempty(e){return this.min(1,te.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};Po.create=t=>{var e;return new Po({checks:[],typeName:ie.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...pe(t)})};function n_(t,e){let r=(t.toString().split(".")[1]||"").length,o=(e.toString().split(".")[1]||"").length,n=r>o?r:o,s=parseInt(t.toFixed(n).replace(".","")),c=parseInt(e.toFixed(n).replace(".",""));return s%c/Math.pow(10,n)}var dn=class t extends le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==W.number){let s=this._getOrReturnCtx(e);return H(s,{code:V.invalid_type,expected:W.number,received:s.parsedType}),ae}let o,n=new ct;for(let s of this._def.checks)s.kind==="int"?be.isInteger(e.data)||(o=this._getOrReturnCtx(e,o),H(o,{code:V.invalid_type,expected:"integer",received:"float",message:s.message}),n.dirty()):s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(o=this._getOrReturnCtx(e,o),H(o,{code:V.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(o=this._getOrReturnCtx(e,o),H(o,{code:V.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),n.dirty()):s.kind==="multipleOf"?n_(e.data,s.value)!==0&&(o=this._getOrReturnCtx(e,o),H(o,{code:V.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):s.kind==="finite"?Number.isFinite(e.data)||(o=this._getOrReturnCtx(e,o),H(o,{code:V.not_finite,message:s.message}),n.dirty()):be.assertNever(s);return{status:n.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,te.toString(r))}gt(e,r){return this.setLimit("min",e,!1,te.toString(r))}lte(e,r){return this.setLimit("max",e,!0,te.toString(r))}lt(e,r){return this.setLimit("max",e,!1,te.toString(r))}setLimit(e,r,o,n){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:te.toString(n)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:te.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:te.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:te.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:te.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:te.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:te.toString(e)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&be.isInteger(e.value))}get isFinite(){let e=null,r=null;for(let o of this._def.checks){if(o.kind==="finite"||o.kind==="int"||o.kind==="multipleOf")return!0;o.kind==="min"?(r===null||o.value>r)&&(r=o.value):o.kind==="max"&&(e===null||o.value<e)&&(e=o.value)}return Number.isFinite(r)&&Number.isFinite(e)}};dn.create=t=>new dn({checks:[],typeName:ie.ZodNumber,coerce:t?.coerce||!1,...pe(t)});var fn=class t extends le{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==W.bigint)return this._getInvalidInput(e);let o,n=new ct;for(let s of this._def.checks)s.kind==="min"?(s.inclusive?e.data<s.value:e.data<=s.value)&&(o=this._getOrReturnCtx(e,o),H(o,{code:V.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="max"?(s.inclusive?e.data>s.value:e.data>=s.value)&&(o=this._getOrReturnCtx(e,o),H(o,{code:V.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),n.dirty()):s.kind==="multipleOf"?e.data%s.value!==BigInt(0)&&(o=this._getOrReturnCtx(e,o),H(o,{code:V.not_multiple_of,multipleOf:s.value,message:s.message}),n.dirty()):be.assertNever(s);return{status:n.value,value:e.data}}_getInvalidInput(e){let r=this._getOrReturnCtx(e);return H(r,{code:V.invalid_type,expected:W.bigint,received:r.parsedType}),ae}gte(e,r){return this.setLimit("min",e,!0,te.toString(r))}gt(e,r){return this.setLimit("min",e,!1,te.toString(r))}lte(e,r){return this.setLimit("max",e,!0,te.toString(r))}lt(e,r){return this.setLimit("max",e,!1,te.toString(r))}setLimit(e,r,o,n){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:o,message:te.toString(n)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:te.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:te.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:te.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:te.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:te.toString(r)})}get minValue(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}};fn.create=t=>{var e;return new fn({checks:[],typeName:ie.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...pe(t)})};var gn=class extends le{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==W.boolean){let o=this._getOrReturnCtx(e);return H(o,{code:V.invalid_type,expected:W.boolean,received:o.parsedType}),ae}return mt(e.data)}};gn.create=t=>new gn({typeName:ie.ZodBoolean,coerce:t?.coerce||!1,...pe(t)});var yn=class t extends le{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==W.date){let s=this._getOrReturnCtx(e);return H(s,{code:V.invalid_type,expected:W.date,received:s.parsedType}),ae}if(isNaN(e.data.getTime())){let s=this._getOrReturnCtx(e);return H(s,{code:V.invalid_date}),ae}let o=new ct,n;for(let s of this._def.checks)s.kind==="min"?e.data.getTime()<s.value&&(n=this._getOrReturnCtx(e,n),H(n,{code:V.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),o.dirty()):s.kind==="max"?e.data.getTime()>s.value&&(n=this._getOrReturnCtx(e,n),H(n,{code:V.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),o.dirty()):be.assertNever(s);return{status:o.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:te.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:te.toString(r)})}get minDate(){let e=null;for(let r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}};yn.create=t=>new yn({checks:[],coerce:t?.coerce||!1,typeName:ie.ZodDate,...pe(t)});var Ns=class extends le{_parse(e){if(this._getType(e)!==W.symbol){let o=this._getOrReturnCtx(e);return H(o,{code:V.invalid_type,expected:W.symbol,received:o.parsedType}),ae}return mt(e.data)}};Ns.create=t=>new Ns({typeName:ie.ZodSymbol,...pe(t)});var Sn=class extends le{_parse(e){if(this._getType(e)!==W.undefined){let o=this._getOrReturnCtx(e);return H(o,{code:V.invalid_type,expected:W.undefined,received:o.parsedType}),ae}return mt(e.data)}};Sn.create=t=>new Sn({typeName:ie.ZodUndefined,...pe(t)});var hn=class extends le{_parse(e){if(this._getType(e)!==W.null){let o=this._getOrReturnCtx(e);return H(o,{code:V.invalid_type,expected:W.null,received:o.parsedType}),ae}return mt(e.data)}};hn.create=t=>new hn({typeName:ie.ZodNull,...pe(t)});var Fo=class extends le{constructor(){super(...arguments),this._any=!0}_parse(e){return mt(e.data)}};Fo.create=t=>new Fo({typeName:ie.ZodAny,...pe(t)});var Xr=class extends le{constructor(){super(...arguments),this._unknown=!0}_parse(e){return mt(e.data)}};Xr.create=t=>new Xr({typeName:ie.ZodUnknown,...pe(t)});var Yt=class extends le{_parse(e){let r=this._getOrReturnCtx(e);return H(r,{code:V.invalid_type,expected:W.never,received:r.parsedType}),ae}};Yt.create=t=>new Yt({typeName:ie.ZodNever,...pe(t)});var Bs=class extends le{_parse(e){if(this._getType(e)!==W.undefined){let o=this._getOrReturnCtx(e);return H(o,{code:V.invalid_type,expected:W.void,received:o.parsedType}),ae}return mt(e.data)}};Bs.create=t=>new Bs({typeName:ie.ZodVoid,...pe(t)});var Jr=class t extends le{_parse(e){let{ctx:r,status:o}=this._processInputParams(e),n=this._def;if(r.parsedType!==W.array)return H(r,{code:V.invalid_type,expected:W.array,received:r.parsedType}),ae;if(n.exactLength!==null){let c=r.data.length>n.exactLength.value,u=r.data.length<n.exactLength.value;(c||u)&&(H(r,{code:c?V.too_big:V.too_small,minimum:u?n.exactLength.value:void 0,maximum:c?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),o.dirty())}if(n.minLength!==null&&r.data.length<n.minLength.value&&(H(r,{code:V.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),o.dirty()),n.maxLength!==null&&r.data.length>n.maxLength.value&&(H(r,{code:V.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),o.dirty()),r.common.async)return Promise.all([...r.data].map((c,u)=>n.type._parseAsync(new qt(r,c,r.path,u)))).then(c=>ct.mergeArray(o,c));let s=[...r.data].map((c,u)=>n.type._parseSync(new qt(r,c,r.path,u)));return ct.mergeArray(o,s)}get element(){return this._def.type}min(e,r){return new t({...this._def,minLength:{value:e,message:te.toString(r)}})}max(e,r){return new t({...this._def,maxLength:{value:e,message:te.toString(r)}})}length(e,r){return new t({...this._def,exactLength:{value:e,message:te.toString(r)}})}nonempty(e){return this.min(1,e)}};Jr.create=(t,e)=>new Jr({type:t,minLength:null,maxLength:null,exactLength:null,typeName:ie.ZodArray,...pe(e)});function Rs(t){if(t instanceof At){let e={};for(let r in t.shape){let o=t.shape[r];e[r]=Ot.create(Rs(o))}return new At({...t._def,shape:()=>e})}else return t instanceof Jr?new Jr({...t._def,type:Rs(t.element)}):t instanceof Ot?Ot.create(Rs(t.unwrap())):t instanceof vr?vr.create(Rs(t.unwrap())):t instanceof Ar?Ar.create(t.items.map(e=>Rs(e))):t}var At=class t extends le{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),r=be.objectKeys(e);return this._cached={shape:e,keys:r}}_parse(e){if(this._getType(e)!==W.object){let l=this._getOrReturnCtx(e);return H(l,{code:V.invalid_type,expected:W.object,received:l.parsedType}),ae}let{status:o,ctx:n}=this._processInputParams(e),{shape:s,keys:c}=this._getCached(),u=[];if(!(this._def.catchall instanceof Yt&&this._def.unknownKeys==="strip"))for(let l in n.data)c.includes(l)||u.push(l);let p=[];for(let l of c){let d=s[l],g=n.data[l];p.push({key:{status:"valid",value:l},value:d._parse(new qt(n,g,n.path,l)),alwaysSet:l in n.data})}if(this._def.catchall instanceof Yt){let l=this._def.unknownKeys;if(l==="passthrough")for(let d of u)p.push({key:{status:"valid",value:d},value:{status:"valid",value:n.data[d]}});else if(l==="strict")u.length>0&&(H(n,{code:V.unrecognized_keys,keys:u}),o.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let l=this._def.catchall;for(let d of u){let g=n.data[d];p.push({key:{status:"valid",value:d},value:l._parse(new qt(n,g,n.path,d)),alwaysSet:d in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let l=[];for(let d of p){let g=await d.key,y=await d.value;l.push({key:g,value:y,alwaysSet:d.alwaysSet})}return l}).then(l=>ct.mergeObjectSync(o,l)):ct.mergeObjectSync(o,p)}get shape(){return this._def.shape()}strict(e){return te.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,o)=>{var n,s,c,u;let p=(c=(s=(n=this._def).errorMap)===null||s===void 0?void 0:s.call(n,r,o).message)!==null&&c!==void 0?c:o.defaultError;return r.code==="unrecognized_keys"?{message:(u=te.errToObj(e).message)!==null&&u!==void 0?u:p}:{message:p}}}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ie.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let r={};return be.objectKeys(e).forEach(o=>{e[o]&&this.shape[o]&&(r[o]=this.shape[o])}),new t({...this._def,shape:()=>r})}omit(e){let r={};return be.objectKeys(this.shape).forEach(o=>{e[o]||(r[o]=this.shape[o])}),new t({...this._def,shape:()=>r})}deepPartial(){return Rs(this)}partial(e){let r={};return be.objectKeys(this.shape).forEach(o=>{let n=this.shape[o];e&&!e[o]?r[o]=n:r[o]=n.optional()}),new t({...this._def,shape:()=>r})}required(e){let r={};return be.objectKeys(this.shape).forEach(o=>{if(e&&!e[o])r[o]=this.shape[o];else{let s=this.shape[o];for(;s instanceof Ot;)s=s._def.innerType;r[o]=s}}),new t({...this._def,shape:()=>r})}keyof(){return MA(be.objectKeys(this.shape))}};At.create=(t,e)=>new At({shape:()=>t,unknownKeys:"strip",catchall:Yt.create(),typeName:ie.ZodObject,...pe(e)});At.strictCreate=(t,e)=>new At({shape:()=>t,unknownKeys:"strict",catchall:Yt.create(),typeName:ie.ZodObject,...pe(e)});At.lazycreate=(t,e)=>new At({shape:t,unknownKeys:"strip",catchall:Yt.create(),typeName:ie.ZodObject,...pe(e)});var wn=class extends le{_parse(e){let{ctx:r}=this._processInputParams(e),o=this._def.options;function n(s){for(let u of s)if(u.result.status==="valid")return u.result;for(let u of s)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;let c=s.map(u=>new Ct(u.ctx.common.issues));return H(r,{code:V.invalid_union,unionErrors:c}),ae}if(r.common.async)return Promise.all(o.map(async s=>{let c={...r,common:{...r.common,issues:[]},parent:null};return{result:await s._parseAsync({data:r.data,path:r.path,parent:c}),ctx:c}})).then(n);{let s,c=[];for(let p of o){let l={...r,common:{...r.common,issues:[]},parent:null},d=p._parseSync({data:r.data,path:r.path,parent:l});if(d.status==="valid")return d;d.status==="dirty"&&!s&&(s={result:d,ctx:l}),l.common.issues.length&&c.push(l.common.issues)}if(s)return r.common.issues.push(...s.ctx.common.issues),s.result;let u=c.map(p=>new Ct(p));return H(r,{code:V.invalid_union,unionErrors:u}),ae}}get options(){return this._def.options}};wn.create=(t,e)=>new wn({options:t,typeName:ie.ZodUnion,...pe(e)});var Zr=t=>t instanceof An?Zr(t.schema):t instanceof kt?Zr(t.innerType()):t instanceof vn?[t.value]:t instanceof Tn?t.options:t instanceof xn?be.objectValues(t.enum):t instanceof En?Zr(t._def.innerType):t instanceof Sn?[void 0]:t instanceof hn?[null]:t instanceof Ot?[void 0,...Zr(t.unwrap())]:t instanceof vr?[null,...Zr(t.unwrap())]:t instanceof sa||t instanceof Pn?Zr(t.unwrap()):t instanceof In?Zr(t._def.innerType):[],hu=class t extends le{_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.object)return H(r,{code:V.invalid_type,expected:W.object,received:r.parsedType}),ae;let o=this.discriminator,n=r.data[o],s=this.optionsMap.get(n);return s?r.common.async?s._parseAsync({data:r.data,path:r.path,parent:r}):s._parseSync({data:r.data,path:r.path,parent:r}):(H(r,{code:V.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[o]}),ae)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,o){let n=new Map;for(let s of r){let c=Zr(s.shape[e]);if(!c.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let u of c){if(n.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);n.set(u,s)}}return new t({typeName:ie.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:n,...pe(o)})}};function Vd(t,e){let r=Yr(t),o=Yr(e);if(t===e)return{valid:!0,data:t};if(r===W.object&&o===W.object){let n=be.objectKeys(e),s=be.objectKeys(t).filter(u=>n.indexOf(u)!==-1),c={...t,...e};for(let u of s){let p=Vd(t[u],e[u]);if(!p.valid)return{valid:!1};c[u]=p.data}return{valid:!0,data:c}}else if(r===W.array&&o===W.array){if(t.length!==e.length)return{valid:!1};let n=[];for(let s=0;s<t.length;s++){let c=t[s],u=e[s],p=Vd(c,u);if(!p.valid)return{valid:!1};n.push(p.data)}return{valid:!0,data:n}}else return r===W.date&&o===W.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}var bn=class extends le{_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=(s,c)=>{if(Od(s)||Od(c))return ae;let u=Vd(s.value,c.value);return u.valid?((qd(s)||qd(c))&&r.dirty(),{status:r.value,value:u.data}):(H(o,{code:V.invalid_intersection_types}),ae)};return o.common.async?Promise.all([this._def.left._parseAsync({data:o.data,path:o.path,parent:o}),this._def.right._parseAsync({data:o.data,path:o.path,parent:o})]).then(([s,c])=>n(s,c)):n(this._def.left._parseSync({data:o.data,path:o.path,parent:o}),this._def.right._parseSync({data:o.data,path:o.path,parent:o}))}};bn.create=(t,e,r)=>new bn({left:t,right:e,typeName:ie.ZodIntersection,...pe(r)});var Ar=class t extends le{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==W.array)return H(o,{code:V.invalid_type,expected:W.array,received:o.parsedType}),ae;if(o.data.length<this._def.items.length)return H(o,{code:V.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ae;!this._def.rest&&o.data.length>this._def.items.length&&(H(o,{code:V.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());let s=[...o.data].map((c,u)=>{let p=this._def.items[u]||this._def.rest;return p?p._parse(new qt(o,c,o.path,u)):null}).filter(c=>!!c);return o.common.async?Promise.all(s).then(c=>ct.mergeArray(r,c)):ct.mergeArray(r,s)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};Ar.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ar({items:t,typeName:ie.ZodTuple,rest:null,...pe(e)})};var wu=class t extends le{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==W.object)return H(o,{code:V.invalid_type,expected:W.object,received:o.parsedType}),ae;let n=[],s=this._def.keyType,c=this._def.valueType;for(let u in o.data)n.push({key:s._parse(new qt(o,u,o.path,u)),value:c._parse(new qt(o,o.data[u],o.path,u)),alwaysSet:u in o.data});return o.common.async?ct.mergeObjectAsync(r,n):ct.mergeObjectSync(r,n)}get element(){return this._def.valueType}static create(e,r,o){return r instanceof le?new t({keyType:e,valueType:r,typeName:ie.ZodRecord,...pe(o)}):new t({keyType:Po.create(),valueType:e,typeName:ie.ZodRecord,...pe(r)})}},Qs=class extends le{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==W.map)return H(o,{code:V.invalid_type,expected:W.map,received:o.parsedType}),ae;let n=this._def.keyType,s=this._def.valueType,c=[...o.data.entries()].map(([u,p],l)=>({key:n._parse(new qt(o,u,o.path,[l,"key"])),value:s._parse(new qt(o,p,o.path,[l,"value"]))}));if(o.common.async){let u=new Map;return Promise.resolve().then(async()=>{for(let p of c){let l=await p.key,d=await p.value;if(l.status==="aborted"||d.status==="aborted")return ae;(l.status==="dirty"||d.status==="dirty")&&r.dirty(),u.set(l.value,d.value)}return{status:r.value,value:u}})}else{let u=new Map;for(let p of c){let l=p.key,d=p.value;if(l.status==="aborted"||d.status==="aborted")return ae;(l.status==="dirty"||d.status==="dirty")&&r.dirty(),u.set(l.value,d.value)}return{status:r.value,value:u}}}};Qs.create=(t,e,r)=>new Qs({valueType:e,keyType:t,typeName:ie.ZodMap,...pe(r)});var Us=class t extends le{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.parsedType!==W.set)return H(o,{code:V.invalid_type,expected:W.set,received:o.parsedType}),ae;let n=this._def;n.minSize!==null&&o.data.size<n.minSize.value&&(H(o,{code:V.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),r.dirty()),n.maxSize!==null&&o.data.size>n.maxSize.value&&(H(o,{code:V.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),r.dirty());let s=this._def.valueType;function c(p){let l=new Set;for(let d of p){if(d.status==="aborted")return ae;d.status==="dirty"&&r.dirty(),l.add(d.value)}return{status:r.value,value:l}}let u=[...o.data.values()].map((p,l)=>s._parse(new qt(o,p,o.path,l)));return o.common.async?Promise.all(u).then(p=>c(p)):c(u)}min(e,r){return new t({...this._def,minSize:{value:e,message:te.toString(r)}})}max(e,r){return new t({...this._def,maxSize:{value:e,message:te.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}};Us.create=(t,e)=>new Us({valueType:t,minSize:null,maxSize:null,typeName:ie.ZodSet,...pe(e)});var bu=class t extends le{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.function)return H(r,{code:V.invalid_type,expected:W.function,received:r.parsedType}),ae;function o(u,p){return yu({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,gu(),_s].filter(l=>!!l),issueData:{code:V.invalid_arguments,argumentsError:p}})}function n(u,p){return yu({data:u,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,gu(),_s].filter(l=>!!l),issueData:{code:V.invalid_return_type,returnTypeError:p}})}let s={errorMap:r.common.contextualErrorMap},c=r.data;if(this._def.returns instanceof Co){let u=this;return mt(async function(...p){let l=new Ct([]),d=await u._def.args.parseAsync(p,s).catch(S=>{throw l.addIssue(o(p,S)),l}),g=await Reflect.apply(c,this,d);return await u._def.returns._def.type.parseAsync(g,s).catch(S=>{throw l.addIssue(n(g,S)),l})})}else{let u=this;return mt(function(...p){let l=u._def.args.safeParse(p,s);if(!l.success)throw new Ct([o(p,l.error)]);let d=Reflect.apply(c,this,l.data),g=u._def.returns.safeParse(d,s);if(!g.success)throw new Ct([n(d,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:Ar.create(e).rest(Xr.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,r,o){return new t({args:e||Ar.create([]).rest(Xr.create()),returns:r||Xr.create(),typeName:ie.ZodFunction,...pe(o)})}},An=class extends le{get schema(){return this._def.getter()}_parse(e){let{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}};An.create=(t,e)=>new An({getter:t,typeName:ie.ZodLazy,...pe(e)});var vn=class extends le{_parse(e){if(e.data!==this._def.value){let r=this._getOrReturnCtx(e);return H(r,{received:r.data,code:V.invalid_literal,expected:this._def.value}),ae}return{status:"valid",value:e.data}}get value(){return this._def.value}};vn.create=(t,e)=>new vn({value:t,typeName:ie.ZodLiteral,...pe(e)});function MA(t,e){return new Tn({values:t,typeName:ie.ZodEnum,...pe(e)})}var Tn=class t extends le{constructor(){super(...arguments),ra.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let r=this._getOrReturnCtx(e),o=this._def.values;return H(r,{expected:be.joinValues(o),received:r.parsedType,code:V.invalid_type}),ae}if(Su(this,ra,"f")||BA(this,ra,new Set(this._def.values),"f"),!Su(this,ra,"f").has(e.data)){let r=this._getOrReturnCtx(e),o=this._def.values;return H(r,{received:r.data,code:V.invalid_enum_value,options:o}),ae}return mt(e.data)}get options(){return this._def.values}get enum(){let e={};for(let r of this._def.values)e[r]=r;return e}get Values(){let e={};for(let r of this._def.values)e[r]=r;return e}get Enum(){let e={};for(let r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return t.create(e,{...this._def,...r})}exclude(e,r=this._def){return t.create(this.options.filter(o=>!e.includes(o)),{...this._def,...r})}};ra=new WeakMap;Tn.create=MA;var xn=class extends le{constructor(){super(...arguments),oa.set(this,void 0)}_parse(e){let r=be.getValidEnumValues(this._def.values),o=this._getOrReturnCtx(e);if(o.parsedType!==W.string&&o.parsedType!==W.number){let n=be.objectValues(r);return H(o,{expected:be.joinValues(n),received:o.parsedType,code:V.invalid_type}),ae}if(Su(this,oa,"f")||BA(this,oa,new Set(be.getValidEnumValues(this._def.values)),"f"),!Su(this,oa,"f").has(e.data)){let n=be.objectValues(r);return H(o,{received:o.data,code:V.invalid_enum_value,options:n}),ae}return mt(e.data)}get enum(){return this._def.values}};oa=new WeakMap;xn.create=(t,e)=>new xn({values:t,typeName:ie.ZodNativeEnum,...pe(e)});var Co=class extends le{unwrap(){return this._def.type}_parse(e){let{ctx:r}=this._processInputParams(e);if(r.parsedType!==W.promise&&r.common.async===!1)return H(r,{code:V.invalid_type,expected:W.promise,received:r.parsedType}),ae;let o=r.parsedType===W.promise?r.data:Promise.resolve(r.data);return mt(o.then(n=>this._def.type.parseAsync(n,{path:r.path,errorMap:r.common.contextualErrorMap})))}};Co.create=(t,e)=>new Co({type:t,typeName:ie.ZodPromise,...pe(e)});var kt=class extends le{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ie.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:r,ctx:o}=this._processInputParams(e),n=this._def.effect||null,s={addIssue:c=>{H(o,c),c.fatal?r.abort():r.dirty()},get path(){return o.path}};if(s.addIssue=s.addIssue.bind(s),n.type==="preprocess"){let c=n.transform(o.data,s);if(o.common.async)return Promise.resolve(c).then(async u=>{if(r.value==="aborted")return ae;let p=await this._def.schema._parseAsync({data:u,path:o.path,parent:o});return p.status==="aborted"?ae:p.status==="dirty"||r.value==="dirty"?Ds(p.value):p});{if(r.value==="aborted")return ae;let u=this._def.schema._parseSync({data:c,path:o.path,parent:o});return u.status==="aborted"?ae:u.status==="dirty"||r.value==="dirty"?Ds(u.value):u}}if(n.type==="refinement"){let c=u=>{let p=n.refinement(u,s);if(o.common.async)return Promise.resolve(p);if(p instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(o.common.async===!1){let u=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});return u.status==="aborted"?ae:(u.status==="dirty"&&r.dirty(),c(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(u=>u.status==="aborted"?ae:(u.status==="dirty"&&r.dirty(),c(u.value).then(()=>({status:r.value,value:u.value}))))}if(n.type==="transform")if(o.common.async===!1){let c=this._def.schema._parseSync({data:o.data,path:o.path,parent:o});if(!mn(c))return c;let u=n.transform(c.value,s);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:o.data,path:o.path,parent:o}).then(c=>mn(c)?Promise.resolve(n.transform(c.value,s)).then(u=>({status:r.value,value:u})):c);be.assertNever(n)}};kt.create=(t,e,r)=>new kt({schema:t,typeName:ie.ZodEffects,effect:e,...pe(r)});kt.createWithPreprocess=(t,e,r)=>new kt({schema:e,effect:{type:"preprocess",transform:t},typeName:ie.ZodEffects,...pe(r)});var Ot=class extends le{_parse(e){return this._getType(e)===W.undefined?mt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Ot.create=(t,e)=>new Ot({innerType:t,typeName:ie.ZodOptional,...pe(e)});var vr=class extends le{_parse(e){return this._getType(e)===W.null?mt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};vr.create=(t,e)=>new vr({innerType:t,typeName:ie.ZodNullable,...pe(e)});var En=class extends le{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return r.parsedType===W.undefined&&(o=this._def.defaultValue()),this._def.innerType._parse({data:o,path:r.path,parent:r})}removeDefault(){return this._def.innerType}};En.create=(t,e)=>new En({innerType:t,typeName:ie.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...pe(e)});var In=class extends le{_parse(e){let{ctx:r}=this._processInputParams(e),o={...r,common:{...r.common,issues:[]}},n=this._def.innerType._parse({data:o.data,path:o.path,parent:{...o}});return na(n)?n.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Ct(o.common.issues)},input:o.data})})):{status:"valid",value:n.status==="valid"?n.value:this._def.catchValue({get error(){return new Ct(o.common.issues)},input:o.data})}}removeCatch(){return this._def.innerType}};In.create=(t,e)=>new In({innerType:t,typeName:ie.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...pe(e)});var Ls=class extends le{_parse(e){if(this._getType(e)!==W.nan){let o=this._getOrReturnCtx(e);return H(o,{code:V.invalid_type,expected:W.nan,received:o.parsedType}),ae}return{status:"valid",value:e.data}}};Ls.create=t=>new Ls({typeName:ie.ZodNaN,...pe(t)});var s_=Symbol("zod_brand"),sa=class extends le{_parse(e){let{ctx:r}=this._processInputParams(e),o=r.data;return this._def.type._parse({data:o,path:r.path,parent:r})}unwrap(){return this._def.type}},ia=class t extends le{_parse(e){let{status:r,ctx:o}=this._processInputParams(e);if(o.common.async)return(async()=>{let s=await this._def.in._parseAsync({data:o.data,path:o.path,parent:o});return s.status==="aborted"?ae:s.status==="dirty"?(r.dirty(),Ds(s.value)):this._def.out._parseAsync({data:s.value,path:o.path,parent:o})})();{let n=this._def.in._parseSync({data:o.data,path:o.path,parent:o});return n.status==="aborted"?ae:n.status==="dirty"?(r.dirty(),{status:"dirty",value:n.value}):this._def.out._parseSync({data:n.value,path:o.path,parent:o})}}static create(e,r){return new t({in:e,out:r,typeName:ie.ZodPipeline})}},Pn=class extends le{_parse(e){let r=this._def.innerType._parse(e),o=n=>(mn(n)&&(n.value=Object.freeze(n.value)),n);return na(r)?r.then(n=>o(n)):o(r)}unwrap(){return this._def.innerType}};Pn.create=(t,e)=>new Pn({innerType:t,typeName:ie.ZodReadonly,...pe(e)});function DA(t,e){let r=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof r=="string"?{message:r}:r}function OA(t,e={},r){return t?Fo.create().superRefine((o,n)=>{var s,c;let u=t(o);if(u instanceof Promise)return u.then(p=>{var l,d;if(!p){let g=DA(e,o),y=(d=(l=g.fatal)!==null&&l!==void 0?l:r)!==null&&d!==void 0?d:!0;n.addIssue({code:"custom",...g,fatal:y})}});if(!u){let p=DA(e,o),l=(c=(s=p.fatal)!==null&&s!==void 0?s:r)!==null&&c!==void 0?c:!0;n.addIssue({code:"custom",...p,fatal:l})}}):Fo.create()}var i_={object:At.lazycreate},ie;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(ie||(ie={}));var a_=(t,e={message:`Input not instance of ${t.name}`})=>OA(r=>r instanceof t,e),qA=Po.create,VA=dn.create,c_=Ls.create,u_=fn.create,GA=gn.create,p_=yn.create,l_=Ns.create,m_=Sn.create,d_=hn.create,f_=Fo.create,g_=Xr.create,y_=Yt.create,S_=Bs.create,h_=Jr.create,w_=At.create,b_=At.strictCreate,A_=wn.create,v_=hu.create,T_=bn.create,x_=Ar.create,E_=wu.create,I_=Qs.create,P_=Us.create,F_=bu.create,C_=An.create,k_=vn.create,R_=Tn.create,D_=xn.create,__=Co.create,_A=kt.create,N_=Ot.create,B_=vr.create,Q_=kt.createWithPreprocess,U_=ia.create,L_=()=>qA().optional(),M_=()=>VA().optional(),O_=()=>GA().optional(),q_={string:t=>Po.create({...t,coerce:!0}),number:t=>dn.create({...t,coerce:!0}),boolean:t=>gn.create({...t,coerce:!0}),bigint:t=>fn.create({...t,coerce:!0}),date:t=>yn.create({...t,coerce:!0})},V_=ae,ut=Object.freeze({__proto__:null,defaultErrorMap:_s,setErrorMap:QD,getErrorMap:gu,makeIssue:yu,EMPTY_PATH:UD,addIssueToContext:H,ParseStatus:ct,INVALID:ae,DIRTY:Ds,OK:mt,isAborted:Od,isDirty:qd,isValid:mn,isAsync:na,get util(){return be},get objectUtil(){return Md},ZodParsedType:W,getParsedType:Yr,ZodType:le,datetimeRegex:LA,ZodString:Po,ZodNumber:dn,ZodBigInt:fn,ZodBoolean:gn,ZodDate:yn,ZodSymbol:Ns,ZodUndefined:Sn,ZodNull:hn,ZodAny:Fo,ZodUnknown:Xr,ZodNever:Yt,ZodVoid:Bs,ZodArray:Jr,ZodObject:At,ZodUnion:wn,ZodDiscriminatedUnion:hu,ZodIntersection:bn,ZodTuple:Ar,ZodRecord:wu,ZodMap:Qs,ZodSet:Us,ZodFunction:bu,ZodLazy:An,ZodLiteral:vn,ZodEnum:Tn,ZodNativeEnum:xn,ZodPromise:Co,ZodEffects:kt,ZodTransformer:kt,ZodOptional:Ot,ZodNullable:vr,ZodDefault:En,ZodCatch:In,ZodNaN:Ls,BRAND:s_,ZodBranded:sa,ZodPipeline:ia,ZodReadonly:Pn,custom:OA,Schema:le,ZodSchema:le,late:i_,get ZodFirstPartyTypeKind(){return ie},coerce:q_,any:f_,array:h_,bigint:u_,boolean:GA,date:p_,discriminatedUnion:v_,effect:_A,enum:R_,function:F_,instanceof:a_,intersection:T_,lazy:C_,literal:k_,map:I_,nan:c_,nativeEnum:D_,never:y_,null:d_,nullable:B_,number:VA,object:w_,oboolean:O_,onumber:M_,optional:N_,ostring:L_,pipeline:U_,preprocess:Q_,promise:__,record:E_,set:P_,strictObject:b_,string:qA,symbol:l_,transformer:_A,tuple:x_,undefined:m_,union:A_,unknown:g_,void:S_,NEVER:V_,ZodIssueCode:V,quotelessJson:BD,ZodError:Ct});i();a();i();a();var G_=ut.enum(["pumpFun","moonshot"]),K_=ut.object({type:G_,programId:ut.string(),name:ut.string(),iconUrl:ut.string()}),$_=ut.object({programs:ut.array(K_)}),KA=t=>{try{return $_.parse(t)}catch{return}};var H_={type:"pumpFun",programId:"6EF8rrecthR5Dkzon8Nwu78hRvfCKubJ14M5uBEwF6P",name:"Pump.fun",iconUrl:"https://dhc7eusqrdwa0.cloudfront.net/assets/pumpfun.svg"},Gd=[],eo=()=>{try{let t=Qe.getMultivariateAssignment("enabled-ugc-programs");if(!t)return Qe.isFeatureEnabled("enabled-ugc-programs")?[H_]:Gd;let e=JSON.parse(t);return KA(e)?.programs??Gd}catch{return Gd}};var j_=ut.object({programId:ut.string(),complete:ut.boolean(),progress:ut.string()}),z_=ut.object({bondingCurves:ut.record(ut.string(),j_)});function W_(t){let e=$A(t),o=ee().getQueryData(e.queryKey),{data:n,isFetching:s,isError:c}=re({...e,initialData:o,staleTime:0}),u=(0,Fn.useMemo)(()=>eo(),[]);return(0,Fn.useMemo)(()=>{let p=o===n;if(s&&!p)return{type:"Loading"};if(c)return{type:"Error"};let l=z_.safeParse(n);if(!l.success)return{type:"Error"};let d=l.data.bondingCurves[t];if(!d)return{type:"NoBondingCurve"};let g=u.find(S=>S.programId===d.programId);if(!g)return{type:"NoBondingCurve"};let y=X_(d.progress);return y?d.complete?{type:"Graduated",ugcProgram:g}:{type:p&&s?"BondingCurveRefreshing":"BondingCurve",progressPercentage:y,ugcProgram:g}:{type:"Error"}},[o,t,n,c,s,u])}var Z_=t=>{let e=ee(),r=$A(t);return(0,Fn.useCallback)(async()=>{await e.refetchQueries({queryKey:r.queryKey,type:"active"})},[e,r.queryKey])},$A=t=>{let e=(0,Fn.useMemo)(()=>eo(),[]),r=(0,Fn.useMemo)(()=>e.map(n=>n.programId),[e]);return{queryKey:["bonding-curve",t,r],queryFn:()=>Y_(t,r)}},Y_=async(t,e)=>(await X.api().post("/ugc/v1/bonding-curve",{tokens:[t],programIds:e})).data,X_=t=>{let e=Number(t);if(!isNaN(e))return Math.round(e*100)};i();a();var J_="https://help.phantom.com/hc/en-us/articles/33745013398675";i();a();i();a();var vu=k(D());i();a();var jA=k(D());i();a();var HA=k(D());var Au=()=>{let t=ee();return{cancelQuotes:(0,HA.useCallback)(async()=>{await t.cancelQueries({queryKey:Ae.quotesScope()}),await fg(1)},[t])}};i();a();function Cn(t){return{chain:"solana",type:"fungible",address:t.type==="SPL"?t.data.mintAddress:void 0,symbol:t.data.symbol??""}}function Kd(){let t=oe(),e=A(n=>n.setBuyFungible),r=A(n=>n.buyFungible),{cancelQuotes:o}=Au();return(0,jA.useCallback)(async n=>{if(r&&pn(n,r))return;await o();let s=Cn(n);t.capture("swapperUpdateToAsset",{data:s}),e(n)},[t,r,o,e])}i();a();var zA=t=>{$d.getState().setAsset(t)},$d=Re(t=>({asset:void 0,setAsset(e){t({asset:e})}}));var eN=({onClose:t})=>{let e=Kd(),r=$d(s=>s.asset),o=(0,vu.useMemo)(()=>eo().find(c=>c.programId===r?.data?.ugcTokenMeta?.programId),[r]),n=(0,vu.useCallback)(async()=>{r&&(await e(r),t())},[e,r,t]);return{asset:r,program:o,handleConfirmPress:n}};i();a();var tN=()=>{let{review:t}=xo();t?$r(t):sn()};i();a();i();a();var Hd=()=>{let t=ee(),e=A();return{clearQuotes:async()=>{e.resetQuote(),await t.invalidateQueries({queryKey:Ae.quotesScope()})}}};i();a();i();a();var rN=({networkID:t,unsignedTransaction:e,pendingActivityRows:r,accountIdentifier:o,accountSigner:n,storage:s,includeCallPayload:c})=>({accountSigner:n,accountIdentifier:o,networkID:t,unsignedTransaction:e,...c&&{callPayload:{from:e.from,to:e.to,data:e.data,value:e.value}},pendingTransactionInput:{ownerAddress:e.from,networkID:t,data:{nonce:"",unsignedTransaction:e,hash:""},type:"swap",display:{summary:r}},storage:s}),Tu=async({transactions:t,transactionTypes:e,networkID:r,gasEstimation:o,pendingApprovalActivityRows:n,pendingSwapActivityRows:s,accountIdentifier:c,accountSigner:u,storage:p})=>{let l=!0,d="";for(let[g,y]of t.entries()){let S=o[g],h={gas:`0x${S.gasLimit.toString(16)}`,maxFeePerGas:`0x${S.maxFeePerGas.toString(16)}`,maxPriorityFeePerGas:`0x${S.maxPriorityFeePerGas.toString(16)}`},w=Kn.parse({...y,...h}),T=e[g].includes("approval")?n:s,v=rN({networkID:r,accountIdentifier:c,pendingActivityRows:T.shift(),accountSigner:u,storage:p,unsignedTransaction:w,includeCallPayload:l});try{d="",d=await Zg(v)}catch(P){return{signature:d,error:P instanceof Error?P:new Error("Failed to process EVM swap transaction")}}l&&(l=!1)}return{signature:d}};i();a();var oN=({networkID:t,transaction:e,feePayer:r,connection:o,pendingActivityRows:n,accountIdentifier:s,accountSigner:c,storage:u})=>({accountSigner:c,accountIdentifier:s,transaction:e,feePayer:r,connection:o,opts:{skipPreflight:!0},pendingTransactionInput:{ownerAddress:r.toBase58(),networkID:t,data:{signature:""},type:"swap",display:{summary:n}},storage:u}),xu=async({callerAddress:t,connection:e,networkID:r,transactions:o,pendingSwapActivityRows:n,accountIdentifier:s,accountSigner:c,storage:u})=>{let p=new Kt.PublicKey(t),l="";for(let[d,g]of o.entries()){let y=or(g,"bs58"),S=oN({networkID:r,transaction:y,feePayer:p,connection:e,pendingActivityRows:n[d],accountIdentifier:s,accountSigner:c,storage:u});try{l="",l=await Jg(S),d!==o.length-1&&await Ga({connection:e,signature:l})}catch(h){return{signature:l??"",error:h instanceof Error?h:new Error("Failed to process solana swap transaction")}}}return{signature:l??""}};i();a();var nN=({networkID:t,transaction:e,feePayer:r,pendingActivityRows:o,accountIdentifier:n,accountSigner:s,storage:c})=>({accountSigner:s,accountIdentifier:n,transaction:e,pendingTransactionInput:{ownerAddress:r,networkID:t,data:{digest:""},type:"swap",display:{summary:o}},storage:c}),Eu=async({callerAddress:t,networkID:e,transactions:r,pendingSwapActivityRows:o,accountIdentifier:n,accountSigner:s,storage:c})=>{let u="";for(let[p,l]of r.entries()){let d=nN({networkID:e,transaction:Jn.deserializeTransactionString(l),feePayer:t,pendingActivityRows:o[p],accountIdentifier:n,accountSigner:s,storage:c});try{u=(await Yg(d)).digest,p!==r.length-1&&await qa(e,u)}catch(g){return{signature:u??"",error:g instanceof Error?g:new Error("Failed to process sui swap transaction")}}}return{signature:u??""}};var zd=({accountIdentifier:t,networkID:e})=>{let r=ue(),o=Yn();return ve({mutationFn:async s=>{let{swapTransactions:c,type:u}=s;if(c.type==="evm"&&u==="eip155"){let{gasEstimation:p,pendingApprovalActivityRows:l,pendingSwapActivityRows:d}=s,{signature:g,error:y}=await U.startSpan({name:"Process EVM Swap Txns"},()=>Tu({transactions:c.transactions,transactionTypes:c.transactionTypes,networkID:e,gasEstimation:p,pendingSwapActivityRows:d,pendingApprovalActivityRows:l,accountIdentifier:t,accountSigner:o,storage:r}));return{networkID:e,chainType:u,id:g,error:y}}else if(c.type==="solana"&&u==="solana"){let{callerAddress:p,connection:l,pendingSwapActivityRows:d}=s;if(!l)throw new Error("missing connection");let{signature:g,error:y}=await U.startSpan({name:"Process Solana Swap Txns"},()=>xu({callerAddress:p,connection:l,networkID:e,transactions:c.transactions,pendingSwapActivityRows:d,accountIdentifier:t,accountSigner:o,storage:r}));return{networkID:e,chainType:u,id:g,error:y}}else if(c.type==="sui"&&u==="sui"){let{callerAddress:p,pendingSwapActivityRows:l}=s,{signature:d,error:g}=await U.startSpan({name:"Process Sui Swap Txns"},()=>Eu({callerAddress:p,networkID:e,transactions:c.transactions,pendingSwapActivityRows:l,accountIdentifier:t,accountSigner:o,storage:r}));return{networkID:e,chainType:u,id:d,error:g}}throw new Error("unsupported")}})};i();a();i();a();var Ms=k(D());i();a();var WA=k(D());function ZA(){let t=A(n=>n.setUiBuyAmountCryptoInput),e=A(n=>n.setUiBuyAmountLocalFiatInput),r=A(n=>n.primaryCurrency),{fromUsd:o}=De();return(0,WA.useCallback)(({amount:n,decimals:s,usdPrice:c})=>{if(r==="crypto")if(n===void 0)t("");else{let u=fe(n,s).toString(),p=_t(u);t(p)}else if(r==="fiat"&&c)if(n===void 0)e("");else{let u=fe(n,s).toString(),p=Ze(Number(u),c),l=o(p);e(l.toString())}},[o,r,e,t])}i();a();var YA=k(D());function XA(){let t=A(u=>u.setAmountType),e=A(u=>u.setSellAmount),r=A(u=>u.sellAmount),o=A(u=>u.setUiBuyAmountCryptoInput),n=oe(),[s,c]=jn(r,e,Es);return(0,YA.useCallback)(async({fungibleValue:u,shouldUpdateQuote:p,decimals:l})=>{let d=sr(u.substring(0,nn)),g=_t(d,l);t("buy"),o(g),await n.capture("swapperChangeReceiveCryptoAmount",{data:{amount:g}}),p&&c(g)},[n,t,o,c])}i();a();var JA=k(D());function Pu(t){return(0,JA.useMemo)(()=>t===void 0?void 0:$(t),[t])}i();a();var kn=k(D());var ev=()=>{let t=oe(),e=A(v=>v.primaryCurrency),r=A(v=>v.sellFungible),o=A(v=>v.buyFungible),n=A(v=>v.uiSellAmountLocalFiatInput),s=A(v=>v.uiBuyAmountLocalFiatInput),c=A(v=>v.amountType),u=A(v=>v.setUiSellAmountCryptoInput),p=A(v=>v.setUiBuyAmountCryptoInput),l=A(v=>v.switchTokensForBuy),d=A(v=>v.switchTokensForSell),{data:g}=St({query:r?{data:$(r)}:void 0}),{data:y}=St({query:o?{data:$(o)}:void 0}),{toUsd:S}=De(),h=(0,kn.useMemo)(()=>({localFiatValue:n,decimals:r?.data.decimals??0,usdPrice:g?.usd}),[r?.data.decimals,n,g?.usd]),w=(0,kn.useMemo)(()=>({localFiatValue:s,decimals:o?.data.decimals??0,usdPrice:y?.usd}),[o?.data.decimals,y?.usd,s]),b=(0,kn.useCallback)(({localFiatValue:v,decimals:P,usdPrice:C})=>{let B=v?"":Tt(0,P);if(C&&v){let G=S(v);B=Ht(Number(G),C,P).toString()}return B},[S]),T=(0,kn.useCallback)(()=>{t.capture("swapperSwitchTokensClicked",{data:{sell:r?Y($(r)):"",buy:o?Y($(o)):""}})},[t,r,o]);return(0,kn.useCallback)(()=>{if(e==="fiat"){let v=b(h);u(v);let P=b(w);p(P)}c==="sell"?d():l(),T()},[c,w,e,h,p,u,l,d,b,T])};var iN={chainId:se.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"};function Wd(){let t=A(B=>B.buyFungible),e=Pu(t),r=A(B=>B.sellFungible),o=A(B=>B.primaryCurrency),n=A(B=>B.uiBuyAmountCryptoInput),s=A(B=>B.uiBuyAmountLocalFiatInput),c=A(B=>B.amountType),u=A(B=>B.setAmountType),p=A(B=>B.setSellAmount),l=A(B=>B.uiSellAmountCryptoInput),d=A(B=>B.uiSellAmountLocalFiatInput),g=t?.data.decimals??0,{currentQuote:y}=ne(),S=t?$(t):iN,{data:h}=St({query:{data:S}}),w=ev(),b=ZA(),T=XA(),{toUsd:v}=De();(0,Ms.useEffect)(()=>{c==="sell"&&e&&b({amount:y?.buyAmount,decimals:g,usdPrice:h?.usd})},[c,e,y?.buyAmount,g,h?.usd,b]),(0,Ms.useEffect)(()=>{if(Oe(r?.data.chain.id,t?.data.chain.id)&&c==="buy"){if(u("sell"),o==="crypto")p(l);else if(h?.usd){let B=v(d),G=Ht(B,h.usd,g);p(G.toString())}}},[c,t,g,h,o,r,u,p,v,l,d]);let P=(0,Ms.useCallback)(B=>{T({fungibleValue:B,decimals:g,shouldUpdateQuote:!0})},[g,T]),C=(0,Ms.useCallback)(()=>{w()},[w]);return{cryptoAmountInputValue:n,handleCryptoAmountInputChange:P,localFiatAmountInputValue:s,handleSwitchTokensClick:C}}i();a();var Jt=k(D());i();a();var aN=3,cN=new j(356190),uN=t=>Le.get(t).averageNetworkFee.times(aN);function aa({sellFungible:t,totalFees:e,transactionSpeedsToUnitCost:r,minRequiredBalance:o,customPriorityFee:n,isBridge:s=!1}){let{decimals:c,amount:u,balance:p,chain:l}=t.data,d=u?new j(u):p?new j(p).multipliedBy(oi(c)):new j(0),g=Ye(t.type),{source:y,destination:S}=o,w=pN({isNativeToken:g,network:l,totalFees:e,isBridge:s,transactionSpeedsToUnitCost:r,customPriorityFee:n}).plus(S),b=g?lN(d,w,y):d.toString();return wg(b,c)}function pN({isNativeToken:t,network:e,totalFees:r,isBridge:o,transactionSpeedsToUnitCost:n,customPriorityFee:s}){if(!t)return r;let c=Le.get(e.id),u=o?c.bridgeDefaultFee:c.swapDefaultFee,p=n?.standard;return Gg(p)&&(u=cN.multipliedBy(p.maxFeePerGas.plus(p.maxPriorityFeePerGas))),I.isSolanaNetworkID(e.id)&&s&&(u=u.plus(s)),u.plus(uN(e.id))}function lN(t,e,r){let o=r.plus(e);return t.gt(o)?t.minus(o).toString():t.toString()}i();a();var tv=k(D());function rv(){let t=A(l=>l.primaryCurrency),e=A(l=>l.setUiSellAmountLocalFiatInput),r=A(l=>l.setUiBuyAmountLocalFiatInput),o=A(l=>l.setAmountType),n=A(l=>l.setPrimaryCurrency),s=A(l=>l.setUiSellAmountCryptoInput),c=A(l=>l.setSellAmount),u=A(l=>l.setUiBuyAmountCryptoInput),{fromUsd:p}=De();return(0,tv.useCallback)(({buyAmountFromQuote:l,buyFungibleDecimals:d,buyFungibleUsdPrice:g,sellAmountFromQuote:y,sellFungibleUsdPrice:S})=>{if(t==="crypto"){if(o("sell"),S&&y){let h=Ze(Number(y),S),w=p(h);e(w.toString()),c(y.toString())}if(g&&l){let h=fe(l,d).toString(),w=Ze(Number(h),g),b=p(w);r(b.toString())}n("fiat")}if(t==="fiat"){if(y&&s(y),g&&l){let h=fe(l,d).toString();u(h)}n("crypto")}},[p,t,c,o,u,r,n,s,e])}i();a();var ov=k(D());function nv(){let t=A(n=>n.primaryCurrency),e=A(n=>n.setUiSellAmountCryptoInput),r=A(n=>n.setUiSellAmountLocalFiatInput),{fromUsd:o}=De();return(0,ov.useCallback)(({amount:n,decimals:s,usdPrice:c})=>{if(t==="crypto")if(n===void 0)e("0");else{let u=fe(n,s).toString();e(u)}else if(t==="fiat"&&c)if(n===void 0)r("0");else{let u=fe(n,s).toString(),p=Ze(Number(u),c),l=o(p);r(l.toString())}},[o,t,e,r])}i();a();var sv=k(D());function iv(){let t=A(c=>c.setAmountType),e=A(c=>c.setUiSellAmountCryptoInput),r=A(c=>c.setSellAmount),o=A(c=>c.sellAmount),[n,s]=jn(o,r,Es);return(0,sv.useCallback)(({fungibleValue:c,decimals:u,shouldUpdateQuote:p,shouldTrimLength:l=!0})=>{let d=sr(l?c.substring(0,nn):c),g=_t(d,u);t("sell"),e(g),p&&s(g)},[t,e,s])}i();a();var av=k(D());function cv(){let t=A(u=>u.setAmountType),e=A(u=>u.setSellAmount),r=A(u=>u.sellAmount),o=A(u=>u.setUiSellAmountLocalFiatInput),{toUsd:n}=De(),[s,c]=jn(r,e,Es);return(0,av.useCallback)(({localFiatValue:u,shouldUpdateQuote:p,decimals:l,priceData:d})=>{let g=sr(u.substring(0,nn)),y=_t(g,2);if(t("sell"),o(y),p&&d?.usd){let S=n(u),h=Ht(S,d.usd,l);c(h.toString())}},[t,o,c,n])}i();a();var vv=k(D());i();a();var uv=k(D());var mN={"Allbridge's fee":"destinationNetwork","Allbridge Liquidity Fee":"liquidityProvider"},pv=()=>{let{currentQuote:t}=ne(),{destinationNetworkFee:e,liquidityFee:r}=(0,uv.useMemo)(()=>{function o(s){return s?{amount:new q(s.amount??0),amountUsd:s.amountUSD?parseFloat(s.amountUSD):null,pct:parseFloat(s.percentage??"0")}:Ao}let n=new Map([]);return t&&de(t)&&(n=t.steps.flatMap(s=>s.includedFeeCosts).reduce((s,c)=>{if(!c)return s;let u=mN[c.name];return u&&s.set(u,c),s},n)),{destinationNetworkFee:o(n.get("destinationNetwork")),liquidityFee:o(n.get("liquidityProvider"))}},[t]);return{destinationNetworkFee:e,liquidityFee:r}};i();a();var lv=k(D());var dN={calculate({currentQuote:t,gasEstimationPriceData:e}){return{amount:(t&&e?.gasEstimationAmount)??new q(0),amountUsd:(t&&e?.gasEstimationPriceUSDNumber)??null,pct:0}}},fN={calculate({currentQuote:t,gasEstimationPriceData:e,priceMap:r,networkID:o}){let n=(t?.fees??[]).find(u=>u.type==="network"&&u.name!=="Token account deposits"),s=(t&&e?.gasEstimationAmount)??new q(0),c=(t&&e?.gasEstimationPriceUSDNumber)??null;if(n&&n.amount&&(s=s.plus(new q(n.amount)),c)){let u=Zt(o,new q(n.amount),r);u&&(c+=u)}return{amount:s,amountUsd:c,pct:0}}},gN={calculate({currentQuote:t,gasEstimationPriceData:e,maxGasEstimationPriceData:r}){return{amount:(t&&e?.gasEstimationAmount)??new q(0),amountUsd:(t&&e?.gasEstimationPriceUSDNumber)??null,maxAmount:(t&&r?.gasEstimationAmount)??new q(0),maxAmountUsd:(t&&r?.gasEstimationPriceUSDNumber)??null,pct:0}}},mv=({priceMap:t})=>{let{currentQuote:e}=ne(),r=A(l=>l.sellFungible),o=A(l=>l.gasEstimation),n=r?.data.chain.id??se.Solana.Mainnet,{data:s,isLoading:c}=ci(n,ta(o.estimate)),{data:u}=ci(n,ta(o.estimateWithBuffer));return{networkFee:(0,lv.useMemo)(()=>I.isEVMNetworkID(n)?gN.calculate({currentQuote:e,gasEstimationPriceData:s,maxGasEstimationPriceData:u}):I.isSolanaNetworkID(n)?fN.calculate({currentQuote:e,gasEstimationPriceData:s,networkID:n,priceMap:t}):dN.calculate({currentQuote:e,gasEstimationPriceData:s}),[e,s,u,n,t]),isFetchingGasEstimationPrice:c}};i();a();var dv=k(D());var yN={calculate(){return Ao}},SN={calculate({currentQuote:t,networkID:e,priceMap:r}){let o=du(t);return{amount:o,amountUsd:Zt(e,o,r),pct:0}}},fv=({priceMap:t})=>{let{currentQuote:e}=ne(),o=A(s=>s.sellFungible)?.data.chain.id??se.Solana.Mainnet;return{nonIncludedFees:(0,dv.useMemo)(()=>e&&de(e)?SN.calculate({currentQuote:e,networkID:o,priceMap:t}):yN.calculate(),[o,e,t])}};i();a();var gv=k(D());var hN={calculate(t){let e=(t?.fees??[]).find(r=>r.type==="phantom");return{amount:new q(e?.amount??0),amountUsd:null,pct:e?.percentage??0}}},wN={calculate(t){let e=t.steps.flatMap(r=>r.feeCosts).find(r=>r.name==="phantom");return{amount:new q(e?.amount??0),amountUsd:null,pct:parseFloat(e?.percentage??"0")}}},yv=()=>{let{currentQuote:t}=ne();return{phantomFee:(0,gv.useMemo)(()=>Zd(t),[t])}};function Zd(t){return yr(t)?hN.calculate(t):de(t)?wN.calculate(t):Ao}i();a();var Sv=k(D());var bN={calculate({currentQuote:t,networkID:e,priceMap:r}){let o=(t?.fees??[]).find(n=>n.name==="Token account deposits");return{amount:new q(o?.amount??0),amountUsd:o?.amount?Zt(e,new q(o.amount),r):null,pct:o?.percentage??0}}},AN={calculate(){return Ao}},hv=({priceMap:t})=>{let{currentQuote:e}=ne(),o=A(s=>s.sellFungible)?.data.chain.id??se.Solana.Mainnet;return{tokenAccountFee:(0,Sv.useMemo)(()=>yr(e)?bN.calculate({currentQuote:e,networkID:o,priceMap:t}):AN.calculate(),[e,o,t])}};i();a();var wv=k(D());var bv={calculate:({tokenAccountFee:t,networkFee:e,nonIncludedFees:r,networkID:o,priceMap:n})=>{let s=t.amount.plus(e.amount).plus(r.amount);return{amount:s,amountUsd:Zt(o,s,n),pct:0}}},vN={calculate:({tokenAccountFee:t,networkFee:e,nonIncludedFees:r,networkID:o,priceMap:n})=>{let s=bv.calculate({tokenAccountFee:t,networkFee:e,nonIncludedFees:r,networkID:o,priceMap:n}),c=t.amount.plus(e.maxAmount??0).plus(r.amount);return{...s,maxAmount:c,maxAmountUsd:Zt(o,c,n)}}},Av=({tokenAccountFee:t,networkFee:e,nonIncludedFees:r,priceMap:o})=>{let s=A(u=>u.sellFungible)?.data.chain.id??se.Solana.Mainnet;return{totalFees:(0,wv.useMemo)(()=>I.isEVMNetworkID(s)?vN.calculate({tokenAccountFee:t,networkFee:e,nonIncludedFees:r,networkID:s,priceMap:o}):bv.calculate({tokenAccountFee:t,networkFee:e,nonIncludedFees:r,networkID:s,priceMap:o}),[e,s,r,o,t])}};var Xt=()=>{let t=A(y=>y.gasEstimation.isFetching),e=vo(),{data:r={}}=cr({query:{data:e.map(y=>Nt(y))}}),{networkFee:o,isFetchingGasEstimationPrice:n}=mv({priceMap:r}),s=t||n,{phantomFee:c}=yv(),{tokenAccountFee:u}=hv({priceMap:r}),{nonIncludedFees:p}=fv({priceMap:r}),{totalFees:l}=Av({tokenAccountFee:u,networkFee:o,nonIncludedFees:p,priceMap:r}),{destinationNetworkFee:d,liquidityFee:g}=pv();return(0,vv.useMemo)(()=>({phantomFee:c,networkFee:o,tokenAccountFee:u,totalFees:l,nonIncludedFees:p,destinationNetworkFee:d,liquidityFee:g,isFetchingFees:s}),[c,o,u,l,p,d,g,s])};i();a();var TN=20;function Fu(t,e){let r=Ae.optimisticUpdates(),o=t.getQueryData(r)??[];t.setQueryData(r,[...o.filter(n=>n.id!==e.id),e])}function Tv(t,e){let r=Ae.optimisticUpdates(),o=t.getQueryState(r);if(o){let n=e??Date.now(),s=o.dataUpdatedAt,c=J({seconds:TN});return n-s>c?(t.removeQueries({queryKey:r}),[]):o?.data??[]}else return[]}function Os(t){return`${t.type}-${t.data.key}`}i();a();var Yd=k(D());var xN=.05,EN=({sellNetworkId:t,buyNetworkId:e,destinationMinRequiredBalance:r,priceMap:o})=>{if(!t||!e||!o)return new q(0);let n=Y(Nt(I.getChainID(t))),s=Y(Nt(I.getChainID(e))),c=o[n]?.usd,u=o[s]?.usd;if(!c||!u)return new q(0);let p=fe(r.toNumber(),I.getTokenDecimals(e)),l=Ze(p.toNumber(),u),d=Ht(l,c,I.getTokenDecimals(t));return new q(d).times(1+xN)},Rn=({sellFungible:t,buyFungible:e})=>{let r=t?.data.chain.id,o=e?.data.chain.id,n=o??r,s=Oe(r,o),{fungible:c}=pr({key:e?.data.key}),{data:u}=he(),p=(0,Yd.useMemo)(()=>u?.addresses.find(S=>S.networkID===n),[u,n]),d=vo().map(S=>Nt(S)),{data:g}=cr({query:{data:d},queryOptions:{refetchInterval:!1}}),{data:y=0}=pi(p);return(0,Yd.useMemo)(()=>{if(c)return new q(0);let S=new q(y);return s?EN({sellNetworkId:r,buyNetworkId:o,destinationMinRequiredBalance:S,priceMap:g}):S},[c,y,s,r,o,g])};i();a();var Xd=k(D()),Dn=t=>{let e=t?.data.chain.id,{data:r}=he(),o=(0,Xd.useMemo)(()=>r?.addresses.find(s=>s.networkID===e),[r,e]),{data:n=0}=pi(o);return(0,Xd.useMemo)(()=>new q(n),[n])};function Jd(){let t=ee(),e=lu(),r=A(ge=>ge.sellFungible)??e,o=A(ge=>ge.buyFungible),n=A(ge=>ge.primaryCurrency),s=A(ge=>ge.isFetchingQuote),c=A(ge=>ge.sellAmount),u=A(ge=>ge.uiSellAmountCryptoInput),p=A(ge=>ge.setSellFungible),l=A(ge=>ge.uiSellAmountLocalFiatInput),d=A(ge=>ge.amountType),g=A(ge=>ge.setSwapFilter),{data:y}=wr(),S=Pu(r),h=r?.data.key,{fungible:w}=pr({key:h}),b=r?.data.chain.id,T=o?.data.chain.id,{totalFees:v}=Xt(),{data:P}=ai({networkID:b}),C=Oe(b,T),B=Dn(r),G=Rn({sellFungible:r,buyFungible:o}),L=r?.data.amount,z=r?r.data.decimals:0,K=(0,Jt.useMemo)(()=>aa({sellFungible:r,totalFees:v.amount,transactionSpeedsToUnitCost:I.isEVMNetworkID(r.data.chain.id)?P:void 0,isBridge:C,minRequiredBalance:{source:B,destination:G},customPriorityFee:new q(y??0).multipliedBy(10**jp.tokenDecimals)}),[r,v.amount,P,C,G,B,y]),x=(0,Jt.useMemo)(()=>d==="buy"?new q(u).isLessThanOrEqualTo(new q(K)):c===""?!0:new q(c).isLessThanOrEqualTo(new q(K)),[d,K,c,u]),{currentQuote:E}=ne(),{data:F}=St({query:{data:$(r)}}),Q=F?.usd,{data:O}=St({query:o?{data:$(o)}:void 0}),M=rv(),N=iv(),Z=cv(),_=nv(),ye=(0,Jt.useCallback)(()=>{let ge=E?.sellAmount?fe(E?.sellAmount,z).toString():c,pt=E?.buyAmount,rr=o?.data.decimals??0,Mo=O?.usd;M({buyAmountFromQuote:pt,buyFungibleDecimals:rr,buyFungibleUsdPrice:Mo,sellAmountFromQuote:ge,sellFungibleUsdPrice:Q})},[E?.sellAmount,E?.buyAmount,z,c,o?.data.decimals,O?.usd,M,Q]),we=(0,Jt.useCallback)(ge=>{N({fungibleValue:ge,decimals:z,shouldUpdateQuote:!0})},[z,N]),Ke=(0,Jt.useCallback)(ge=>{Z({priceData:F,localFiatValue:ge,decimals:z,shouldUpdateQuote:!0})},[z,F,Z]),{fromUsd:ke}=De(),Gn=(0,Jt.useCallback)(ge=>{g(ge);let pt=q(K).multipliedBy(ge);if(n==="crypto")N({fungibleValue:pt.toString(),decimals:z,shouldUpdateQuote:!0,shouldTrimLength:!1});else if(Q){let rr=Ze(Number(pt),Q),Mo=ke(rr).toString();Z({priceData:F,localFiatValue:Mo,decimals:z,shouldUpdateQuote:!0})}},[g,K,n,Q,N,z,Z,F,ke]);(0,Jt.useEffect)(()=>{let ge=Tv(t);if(w){let pt={...w},rr=ge.find(Mo=>Mo.id===Os(w));rr&&w.data.amount!==rr.amount&&(pt.data={...pt.data,amount:rr.amount}),pt.data.amount!==L&&p(pt)}},[w,L,p,t]),(0,Jt.useEffect)(()=>{d==="buy"&&S&&_({amount:E?.sellAmount,decimals:z,usdPrice:Q})},[d,E?.sellAmount,z,F?.usd,S,Q,_]);let ze=ks();return{maxSellAmount:K,sellFungible:r,notEnoughAssets:!x,uiSellAmountCryptoInput:u,uiSellAmountLocalFiatInput:l,hasMinimumSellAmount:ze,isFetchingQuote:s,handleToggleCurrencyClick:ye,handleFiatAmountInputChange:Ke,handleCryptoAmountInputChange:we,handleSwapFilterClick:Gn}}i();a();i();a();i();a();i();a();function ef(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function IN(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function xv(t,...e){if(!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new TypeError(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function PN(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ef(t.outputLen),ef(t.blockLen)}function FN(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function CN(t,e){xv(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var kN={number:ef,bool:IN,bytes:xv,hash:PN,exists:FN,output:CN},Cu=kN;i();a();i();a();var RN={node:void 0,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Ru=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),er=(t,e)=>t<<32-e|t>>>e,DN=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!DN)throw new Error("Non little-endian hardware is not supported");var _N=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ev(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let r=0;r<t.length;r++)e+=_N[t[r]];return e}function tf(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function rf(t){if(typeof t=="string"&&(t=tf(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}var ku=class{clone(){return this._cloneInto()}};function of(t){let e=o=>t().update(rf(o)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}function NN(t,e,r,o){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,o);let n=BigInt(32),s=BigInt(4294967295),c=Number(r>>n&s),u=Number(r&s),p=o?4:0,l=o?0:4;t.setUint32(e+p,c,o),t.setUint32(e+l,u,o)}var Du=class extends ku{constructor(e,r,o,n){super(),this.blockLen=e,this.outputLen=r,this.padOffset=o,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ru(this.buffer)}update(e){Cu.exists(this);let{view:r,buffer:o,blockLen:n}=this;e=rf(e);let s=e.length;for(let c=0;c<s;){let u=Math.min(n-this.pos,s-c);if(u===n){let p=Ru(e);for(;n<=s-c;c+=n)this.process(p,c);continue}o.set(e.subarray(c,c+u),this.pos),this.pos+=u,c+=u,this.pos===n&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Cu.exists(this),Cu.output(e,this),this.finished=!0;let{buffer:r,view:o,blockLen:n,isLE:s}=this,{pos:c}=this;r[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>n-c&&(this.process(o,0),c=0);for(let g=c;g<n;g++)r[g]=0;NN(o,n-8,BigInt(this.length*8),s),this.process(o,0);let u=Ru(e),p=this.outputLen;if(p%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let l=p/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let g=0;g<l;g++)u.setUint32(4*g,d[g],s)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let o=e.slice(0,r);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:o,length:n,finished:s,destroyed:c,pos:u}=this;return e.length=n,e.pos=u,e.finished=s,e.destroyed=c,n%r&&e.buffer.set(o),e}};var BN=(t,e,r)=>t&e^~t&r,QN=(t,e,r)=>t&e^t&r^e&r,UN=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ko=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ro=new Uint32Array(64),_u=class extends Du{constructor(){super(64,32,8,!1),this.A=ko[0]|0,this.B=ko[1]|0,this.C=ko[2]|0,this.D=ko[3]|0,this.E=ko[4]|0,this.F=ko[5]|0,this.G=ko[6]|0,this.H=ko[7]|0}get(){let{A:e,B:r,C:o,D:n,E:s,F:c,G:u,H:p}=this;return[e,r,o,n,s,c,u,p]}set(e,r,o,n,s,c,u,p){this.A=e|0,this.B=r|0,this.C=o|0,this.D=n|0,this.E=s|0,this.F=c|0,this.G=u|0,this.H=p|0}process(e,r){for(let g=0;g<16;g++,r+=4)Ro[g]=e.getUint32(r,!1);for(let g=16;g<64;g++){let y=Ro[g-15],S=Ro[g-2],h=er(y,7)^er(y,18)^y>>>3,w=er(S,17)^er(S,19)^S>>>10;Ro[g]=w+Ro[g-7]+h+Ro[g-16]|0}let{A:o,B:n,C:s,D:c,E:u,F:p,G:l,H:d}=this;for(let g=0;g<64;g++){let y=er(u,6)^er(u,11)^er(u,25),S=d+y+BN(u,p,l)+UN[g]+Ro[g]|0,w=(er(o,2)^er(o,13)^er(o,22))+QN(o,n,s)|0;d=l,l=p,p=u,u=c+S|0,c=s,s=n,n=o,o=S+w|0}o=o+this.A|0,n=n+this.B|0,s=s+this.C|0,c=c+this.D|0,u=u+this.E|0,p=p+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(o,n,s,c,u,p,l,d)}roundClean(){Ro.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},nf=class extends _u{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Iv=of(()=>new _u),oge=of(()=>new nf);var Vt=k(D());i();a();var LN=50,Pv=({includeOwnedAssets:t,sellAsset:e,ownedAssets:r,searchAssets:o})=>{if(!t||!e)return o;let n=g=>Y($(g)),s=n(e),c=e.data.chain.id,u=r.filter(g=>n(g)!==s&&I.compareNetworkID(c,g.data.chain.id)===0&&g.type!=="CompressedSPL").slice(0,LN-1),p=u.map(g=>[n(g),g]),l=new Map(p),d=o.filter(g=>!l.has(n(g)));return[...u,...d]};function MN({enableQuery:t=!0,chainFilter:e}={}){let{sellFungible:r,searchQuery:o,setSearchQuery:n,setNumSearchResults:s}=A(),c=yg(o,150),{fungibles:u,isLoadingTokens:p,isRefetchingTokens:l,tokensError:d}=Bt(),g=To(),[y,S]=(0,Vt.useState)(""),{data:h}=he(),w=(0,Vt.useMemo)(()=>h?.addresses??[],[h]),{data:b,isSuccess:T,isFetching:v,error:P}=Xo({query:c,networkIds:e?[e]:[r?.data.chain.id??I.solana.mainnetID],enableQuery:t,keepPreviousData:!0,searchContext:"swapper",supportedNetworkIds:g,chainAddresses:w}),C=!T&&v,B=(0,Vt.useMemo)(()=>u.filter(E=>E.type!=="CompressedSPL").map(E=>[Y($(E)),E]),[u]),G=(0,Vt.useMemo)(()=>{let E=tf(B.map(([Q])=>Q).join("~")),F=Iv(E);return Ev(F)},[B]),L=(0,Vt.useMemo)(()=>new Map(B),[G]),z=(0,Vt.useMemo)(()=>{if(!b||b.length===0)return[];S(gt());let E=b.reduce((F,Q)=>{let O="";if(Ye(Q.type)){if(r&&Ye(r.type)&&Q.data.chain.id===r.data.chain.id)return F;O=Y(Nt(I.getChainID(Q.data.chain.id)))}else{if(r&&Q.data.tokenAddress===r.data.tokenAddress&&!e)return F;O=Y($(Q))}let M,N=L.get(O);return N&&N.data.balance?M=N:M=Q,M&&F.push(M),F},[]);return s(E.length),E},[L,b,r,s,e]),K=oe();(0,Vt.useEffect)(()=>{T&&z.length===0&&K.capture("swapperNullSearchResult",{data:{searchQuery:c}})},[T,z,c,K]);let x=(0,Vt.useMemo)(()=>Pv({includeOwnedAssets:!c,sellAsset:r,ownedAssets:u,searchAssets:z}),[c,u,z,r]);return(0,Vt.useMemo)(()=>({assets:x,initialFilterKey:r?.data.chain.id,isLoading:p||C,isFetching:p||C||l,error:d??P,searchRef:y,setSearchQuery:n}),[x,p,C,l,d,P,r,y,n])}i();a();var rt=k(D()),Cv=k(Ji());i();a();var Nu="https://help.phantom.com/hc/en-us/articles/27085326202515";var qs=[.3,.5,1],ON=qs.map(t=>`${t}%`),kv=[...ON,"custom"],Vs=[.5,1,2],qN=Vs.map(t=>`${t}%`),VN=[...qN,"custom"],GN="enable-higher-slippage-options",sf=kv.length-1,KN=5,$N=2,af=.1,cf=30,HN=2,Fv=(t,e)=>{if(!t)return;let r=parseFloat(t);if(isNaN(r))return{message:e("swapSlippageSettingsCustomInvalidValue"),severity:"critical"};if(r>cf)return{message:e("swapSlippageSettingsCustomMaxError",{maxSlippage:cf}),severity:"critical"};if(r>HN)return{message:e("swapSlippageSettingsHighSlippageWarning"),severity:"warning"};if(r<af)return{message:e("swapSlippageSettingsCustomMinError",{minSlippage:af}),severity:"critical"}},jN=(t,e)=>e?t&&Vs.indexOf(t)!==-1?Vs.indexOf(t):t?sf:1:t&&qs.indexOf(t)!==-1?qs.indexOf(t):t?sf:0,zN=(t,e)=>e?t&&Vs.indexOf(t)===-1?`${t}`:"":t&&qs.indexOf(t)===-1?`${t}`:"",WN=({onDismiss:t})=>{let{t:e}=qe(),r=oe(),{data:[o]}=Se([GN]),{data:n,isFetched:s}=Io(),{mutateAsync:c}=mu(),{selectedSetting:u,isFetched:p,setSlippageSetting:l}=Be(),[d,g]=(0,rt.useState)(u.type),y=(0,Cv.default)(p),[S,h]=(0,rt.useState)(!1),[w,b]=(0,rt.useState)(0),[T,v]=(0,rt.useState)(),[P,C]=(0,rt.useState)(""),[B,G]=(0,rt.useState)(),L=d==="auto",z=w===sf,K=L?!1:B?.severity==="critical"||z&&!P;(0,rt.useEffect)(()=>{y!==p&&d!==u.type&&g(u.type)},[y,p,u.type,d]);let x=(0,rt.useCallback)(N=>{if(w===N)return;G(void 0),b(N);let Z=o?Vs:qs;Z[N]?(v(Z[N]),C("")):v(void 0)},[w,o]),E=(0,rt.useCallback)(N=>{let Z=sr(N.substring(0,KN)),_=_t(Z,$N),ye=parseFloat(_);if(isNaN(ye)){G(void 0),C("");return}C(_),G(Fv(_,e))},[e]),F=(0,rt.useCallback)(()=>{if(L)r.capture("slippageChanged",{data:{slippageType:"auto"}});else if(z){let N=parseFloat(P??"");c(N),r.capture("slippageChanged",{data:{slippageValue:N,slippageType:"custom"}}),v(void 0)}else T&&(c(T),r.capture("slippageChanged",{data:{slippageValue:T,slippageType:"preset"}}),C(""));l({type:d}),t()},[L,l,d,t,z,T,P,c,r]),Q=(0,rt.useCallback)(()=>{let N=jN(n,o),Z=zN(n,o),_=o?Vs:qs;b(N),v(_[N]),C(Z),G(Fv(Z,e)),g(u.type)},[n,e,u.type,o]),O=(0,rt.useCallback)(()=>{g(d==="auto"?"fixed":"auto")},[d,g]),M=(0,rt.useMemo)(()=>({title:e("swapSlippageSettingsTitle"),subtitle:e("swapSlippageSettingsSubtitle",{minSlippage:af,maxSlippage:cf}),custom:e("swapSlippageSettingsCustom"),auto:e("swapSlippageSettingsAuto"),autoSubtitle:e("swapSlippageSettingsAutoSubtitle"),learnMore:e("commandLearnMore"),button:e("commandConfirm")}),[e]);return(0,rt.useEffect)(()=>{!S&&s&&(Q(),h(!0))},[s,S,Q]),{options:o?VN:kv,selectedIndex:w,customSlippageValue:P,i18nStrings:M,error:B,submitDisabled:K,isAutoEnabled:L,autoLearnMoreUrl:Nu,onConfirm:F,onDismiss:t,onSelectOption:x,onChangeCustomSlippage:E,onResetToDefault:Q,onToggleAutoSlippage:O}};i();a();var je=k(D()),_v=k(Ji());i();a();var Rv=k(D());var ZN={type:"auto"},uf=()=>{let{priorityFeeSetting:t,isFetched:e,save:r}=YN();return{isFetched:e,selectedSetting:t,setPriorityFeeSetting:r}},YN=()=>{let{data:t,isFetched:e}=lt({key:"priorityFeeSettings",queryKey:Ae.priorityFeeSettings()}),{mutateAsync:r}=wt({key:"priorityFeeSettings",queryKey:Ae.priorityFeeSettings()}),o=(0,Rv.useCallback)(async n=>{await r(n)},[r]);return{isFetched:e,priorityFeeSetting:t??ZN,save:o}};var pf={input:{maxLength:10,maxDecimals:6},bounds:{min:1e-6,low:5e-6,high:1,max:5}},Dv=(t,e,r)=>{let o=parseFloat(t);if(isNaN(o))return{message:e("swapPriorityFeeSettingsCustomInvalidValue"),severity:"critical"};if(o>r.max)return{message:e("swapPriorityFeeSettingsCustomMaxError",{maxPriorityFee:r.max}),severity:"critical"};if(o<r.min)return{message:e("swapPriorityFeeSettingsCustomMinError",{minPriorityFee:r.min}),severity:"critical"};if(o>r.high)return{message:e("swapPriorityFeeSettingsHighFeeWarning"),severity:"warning"};if(o<r.low)return{message:e("swapPriorityFeeSettingsLowFeeWarning"),severity:"warning"}},JN=()=>{let[t,e]=(0,je.useState)(pf.bounds);return(0,je.useEffect)(()=>{(async()=>{try{let o=await $g({accounts:[],transactionType:"Swap"});e({min:o.min,low:o.low,high:o.high,max:o.max})}catch(o){U.captureError(o instanceof Error?o:new Error("Unable to fetch priority fee bounds."),"swapper")}})()},[]),t},eB=({onDismiss:t})=>{let{t:e}=qe(),r=oe(),{data:o,isFetched:n}=wr(),{mutateAsync:s}=EA(),{selectedSetting:c,isFetched:u,setPriorityFeeSetting:p}=uf(),[l,d]=(0,je.useState)(c.type),g=(0,_v.default)(u),[y,S]=(0,je.useState)(!1),[h,w]=(0,je.useState)(""),[b,T]=(0,je.useState)("$0"),[v,P]=(0,je.useState)(),C=l==="auto",B=C?!1:v?.severity==="critical"||!h,G=JN(),L=Nt("solana"),{data:z}=St({query:{data:L}}),K=z?.usd;(0,je.useEffect)(()=>{if(!K)return;let M=Ze(Number(h),K);T(`$${M.toString()}`)},[h,K]),(0,je.useEffect)(()=>{g!==u&&l!==c.type&&d(c.type)},[g,u,c.type,l]);let x=(0,je.useCallback)(M=>{let N=sr(M.substring(0,pf.input.maxLength)),Z=_t(N,pf.input.maxDecimals);if(isNaN(parseFloat(Z))){P(void 0),w("");return}w(Z),P(Dv(Z,e,G))},[e,G]),E=(0,je.useCallback)(()=>{if(C)s(null),U.addBreadcrumb("swapper","Priority fee setting changed to auto.","info"),r.capture("swapperPriorityFeeChanged",{data:{priorityFeeType:"auto"}});else if(h){let M=parseFloat(h??"");s(M),U.addBreadcrumb("swapper",`Priority fee setting changed to custom: ${M} SOL`,"info"),r.capture("swapperPriorityFeeChanged",{data:{priorityFeeValue:M,priorityFeeType:"custom"}}),w("")}p({type:l}),t()},[C,p,l,t,h,s,r]),F=(0,je.useCallback)(()=>{let M=o?`${o}`:"";w(M),P(Dv(M,e,G)),d(c.type)},[o,e,c.type,G]),Q=(0,je.useCallback)(()=>{d(l==="auto"?"fixed":"auto"),w("")},[l,d]),O=(0,je.useMemo)(()=>({title:e("swapPriorityFeeSettingsTitle"),custom:e("swapPriorityFeeSettingsCustom"),auto:e("swapPriorityFeeSettingsAuto"),autoSubtitle:e("swapPriorityFeeSettingsAutoSubtitle"),learnMore:e("commandLearnMore"),button:e("commandConfirm")}),[e]);return(0,je.useEffect)(()=>{!y&&n&&(F(),S(!0))},[n,y,F]),{customPriorityFeeValue:h,customPriorityFeeValueInDollars:b,i18nStrings:O,error:v,submitDisabled:B,isAutoEnabled:C,onConfirm:E,onDismiss:t,onChangeCustomPriorityFee:x,onResetToDefault:F,onToggleAutoPriorityFee:Q}};i();a();var Nn=k(D());i();a();i();a();var Nv=()=>[{chainId:"solana:101",address:"2b1kV6DkPAnxd5ixfnxCpjxmKwqjjaYmCZfHsFu24GXo",resourceType:"address"}];var Gs=(t,e)=>{let r=[];if(rB(t)&&!oB(t)&&r.push({type:"permanentDelegate",level:"warn",titleKey:"swapAssetWarningPermanentDelegate"}),(t.data.spamStatus==="NOT_VERIFIED"||t.data.spamStatus==="SPAM"||t.data.spamStatus==="POSSIBLE_SPAM")&&r.push({type:"unverified",level:"info",titleKey:"swapAssetWarningUnverified"}),!Ye(t.type)&&e&&nB(e)){let o=Le.get(t.data.chain.id).nativeFungible;r.push({type:"lowBalance",level:"info",titleKey:"swapAssetWarningLowTokenBalance",options:{token:o.data.symbol??"",network:o.data.chain.name}})}return r};function rB(t){let e=t.data;return e?.mintExtensions?e.mintExtensions.some(r=>r.extension==="permanentDelegate"):!1}function oB(t){let e=$(t),r=Nv();return e.resourceType==="address"?r.some(o=>o.resourceType===e.resourceType&&o.address===e.address&&o.chainId===e.chainId):!1}function nB(t){let e=Le.get(t.data.chain.id);return new q(t.data.amount?t.data.amount:0).lt(e.swapDefaultFee)}i();a();var Qv=k(D());i();a();function Bv(){return[new ff,new lf,new df,new mf]}var lf=class{isEditable({sellAsset:e}){return!!e&&I.isSolanaNetworkID(e.data.chain.id)}},mf=class{isEditable({currencyDenomination:e}){return e==="crypto"}},df=class{isEditable({sellAsset:e,buyAsset:r}){return!Oe(e?.data.chain.id,r?.data.chain.id)}},ff=class{isEditable(){return Qe.isFeatureEnabled("enable-swapper-exact-out")}};var gf=({sellAsset:t,buyAsset:e,currencyDenomination:r})=>{let o=(0,Qv.useMemo)(()=>Bv(),[]);return e?o.every(n=>n.isEditable({sellAsset:t,buyAsset:e,currencyDenomination:r})):!1};i();a();var Uv=k(D());i();a();var yf=class{isSupported(e,r,o,n,s){switch(e){case"sell":return!!(o&&s);case"buy":return!1}}},Sf=class{isSupported(e){return e!=="buy"}};function hf(){return[new yf,new Sf]}var Bu=(t,e,r,o,n)=>(0,Uv.useMemo)(()=>hf(),[]).every(c=>c.isSupported(t,e,r,o,n));i();a();var wf=class{format(e,r){return`${Tt(e)} ${r}`}},bf=class{format(e,r){return`${ka(e,{compact:!0})} ${r}`}},Af=class{format(e){return ka(e,{compact:!0})}};function _n(t){switch(t){case"full":return new wf;case"compact":return new bf;case"compactNoSymbol":return new Af}}var vf=class{format(e,r,o){return`${Tt(Ht(Number(e),o,r.data?.decimals??0))} ${r.data.symbol??""}`}},Qu=class{format(e,r,o){return ka(Ht(Number(e),o,r.data?.decimals??0),{compact:!0})}},Tf=class{noSymbolDisplayStrategy;constructor(e){this.noSymbolDisplayStrategy=e}format(e,r,o){return`${this.noSymbolDisplayStrategy.format(e,r,o)} ${r.data?.symbol??""}`}};function xf(t){switch(t){case"full":return new vf;case"compact":return new Tf(new Qu);case"compactNoSymbol":return new Qu}}var sB=ot?[.25,.5,1]:[.5,1],Lv=ot?_n("full"):_n("compactNoSymbol"),Mv=ot?xf("full"):xf("compact"),iB={chainId:se.Solana.Mainnet,slip44:"501",resourceType:"nativeToken"},aB=()=>{let e=A(ze=>ze.amountType)==="sell"?"sell":"buy",r=A(ze=>ze.primaryCurrency),{currencySymbol:o,toUsd:n}=De(),s=r==="fiat"?o:void 0,c=A(ze=>ze.swapFilter),u=A(ze=>ze.setSwapFilter),p=Zp(),{handleCryptoAmountInputChange:l,handleFiatAmountInputChange:d,sellFungible:g,uiSellAmountCryptoInput:y,isFetchingQuote:S,notEnoughAssets:h,hasMinimumSellAmount:w,handleToggleCurrencyClick:b,uiSellAmountLocalFiatInput:T,handleSwapFilterClick:v,maxSellAmount:P}=Jd(),C=A(ze=>ze.buyFungible),B=C?$(C):iB,G=Vv(B),L=Vv($(g)),z=Bu("sell",g,L,C,G),K=(0,Nn.useMemo)(()=>({fungible:g,perspective:"sell",amount:r==="crypto"?y:T,secondaryCryptoSubtitle:r==="fiat"?Ov(n(T),g,Mv,L):void 0,balance:qv(g,Lv,p,P),isAmountLoading:S&&e!=="sell",isSecondaryCryptoSubtitleLoading:S,isWarning:h||!w,isAmountEditable:!0,supportsCurrencyDenominationSwitching:z,amountPrefix:s,filters:sB,selectedFilter:c,warnings:[],usdAmount:L?Ze(Number(y),L):0}),[g,r,y,T,L,p,P,S,e,h,w,z,s,c,n]),{handleSwitchTokensClick:x,cryptoAmountInputValue:E,localFiatAmountInputValue:F,handleCryptoAmountInputChange:Q}=Wd(),O=Bu("buy",g,L,C,G),M=gf({sellAsset:g,buyAsset:C,currencyDenomination:r}),N=Oe(g?.data.chain.id,C?.data.chain.id),Z=C?.data.chain.id,{fungible:_}=pr({key:Z?ui(Z,void 0):void 0}),ye=(0,Nn.useMemo)(()=>{if(C)return{fungible:C,perspective:"buy",balance:qv(C,Lv,p),amount:r==="crypto"?E:F,secondaryCryptoSubtitle:r==="fiat"?Ov(n(F),C,Mv,G):void 0,isAmountLoading:S&&e!=="buy",isSecondaryCryptoSubtitleLoading:S,isWarning:!1,isAmountEditable:M,supportsCurrencyDenominationSwitching:O,amountPrefix:s,filters:[],selectedFilter:void 0,warnings:Gs(C,N?_:void 0),usdAmount:G?Ze(Number(E),G):0}},[C,p,r,E,F,G,S,e,M,O,s,n,N,_]),we=(0,Nn.useCallback)((ze,ge)=>{switch(u(void 0),ze){case"sell":r==="crypto"?l(ge):d(ge);break;case"buy":if(r==="fiat")return;Q(ge);break}},[u,r,l,d,Q]),Ke=oe(),ke=(0,Nn.useCallback)(async()=>{e==="sell"&&(b(),await Ke.capture("swapperToggleQuoteCurrency",{data:{value:r==="fiat"?"native":"fiat"}}))},[e,Ke,r,b]),Gn=(0,Nn.useCallback)((ze,ge)=>{ge==="sell"&&v(ze)},[v]);return{switchPerspective:x,sell:K,buy:ye,setAmount:we,switchCurrencyDenomination:ke,setFilter:Gn,currencyDenomination:r}};function Ov(t,e,r,o){let n=e.data?.symbol??"",s=Number(t);return o?r.format(s,e,o):`0 ${n}`}function qv(t,e,r,o){let n=o?q(o):t.data?.balance;if(!(!n||r))return e.format(n,t.data?.symbol??"")}var Vv=t=>{let{data:e}=St({query:{data:t}});return e?.usd};i();a();var cB=["lastSubmittedPairs","slippageTolerance"],Ef=t=>{let e=String(t.queryKey[1]);return cB.includes(e)};i();a();var Gv=k(D());function If(t){let{t:e}=qe();return(0,Gv.useMemo)(()=>{let{networkFee:r,phantomFee:o,tokenAccountFee:n,nonIncludedFees:s,destinationNetworkFee:c,liquidityFee:u}=t;return{networkFee:{label:e("swapQuoteNetwork"),valueUsd:r.amountUsd,maxValueUsd:r.maxAmountUsd},bridgeFee:{label:e("swapQuoteBridgeFee"),valueUsd:s.amountUsd,maxValueUsd:s.maxAmountUsd},tokenAccountFee:{label:e("swapQuoteOneTimeTokenAccount"),valueUsd:n.amountUsd},phantomFeePercent:{label:o.pct?e("swapQuoteFeeDisclaimer",{feePercentage:Hp(o.pct)}):"",value:o.pct?`${o.pct}`:""},destinationNetworkFee:{label:e("swapQuoteDestinationNetwork"),valueUsd:c.amountUsd},liquidityProviderFee:{label:e("swapQuoteLiquidityProvider"),valueUsd:u.amountUsd}}},[t,e])}i();a();var Kv=k(D());function uB(){let t=oe(),e=A(g=>g.buyFungible),r=A(g=>g.sellFungible),o=A(g=>g.setBuyFungible),n=A(g=>g.setSellFungible),s=A(g=>g.setSellAmount),c=A(g=>g.setUiSellAmountCryptoInput),u=A(g=>g.resetQuote),p=A(g=>g.setSwapFilter),l=r?.data.amount,{cancelQuotes:d}=Au();return(0,Kv.useCallback)(async g=>{if(r&&pn(g,r)){g&&g.data.amount!==l&&(n(g),p(void 0));return}await d();let y=Cn(g);t.capture("swapperUpdateFromAsset",{data:y}),n(g),p(void 0),e&&r&&pn(g,e)&&o(r),g&&r?.data.chain.id!==g.data.chain.id&&(u(),o(void 0),s(""),c(""))},[t,e,d,l,u,r,o,s,n,p,c])}i();a();var Zv=k(D());i();a();var Do=k(D());i();a();i();a();i();a();var Uu=class{sections(e){let r=eo().map(s=>s.programId),o=e.reduce((s,c)=>{if(c.data.spamStatus==="VERIFIED")return s.verified.push(c),s;if(c.type!=="SPL"||!c.data.ugcTokenMeta||c.data.ugcTokenMeta.status==="graduated"||!r.includes(c.data.ugcTokenMeta.programId))return s.unverified.push(c),s;let u=c.data.ugcTokenMeta.programId,p=s[u]??[];return p.push(c),s[u]=p,s},{verified:[],unverified:[]}),n=eo().map(s=>{let c=o[s.programId]??[];return{id:s.programId,header:{title:R.t("swapSectionTitleTokens",{section:s.name}),iconUrl:s.iconUrl},data:c,behavior:"collapsible"}});return[{id:"verified",data:o.verified,behavior:"static"},{id:"unverified",header:{title:R.t("swapUnverifiedTokens")},data:o.unverified,behavior:"collapsible"},...n]}};function $v(){return new Uu}i();a();var jv=k(D());i();a();var Lu=k(D());var Hv=()=>{let{data:t}=lt({key:"lastSelectedTokens",queryKey:Ae.lastSelectedTokens()}),e=(0,Lu.useMemo)(()=>t?JSON.parse(t):{},[t]),{mutateAsync:r}=wt({key:"lastSelectedTokens",queryKey:Ae.lastSelectedTokens()}),o=(0,Lu.useCallback)(async n=>{let s={...e,[n]:!0};await r(JSON.stringify(s))},[e,r]);return{lastSelectedTokens:e,storeSelectedToken:o}};i();a();var Mu=class{constructor(e,r){this.lastSelectedTokens=e;this.storeSelectedToken=r}intercept(e){let r=Y($(e));return this.lastSelectedTokens[r]||this.storeSelectedToken(r),"continue"}};i();a();i();a();var Ou=class{constructor(e){this.lastSelectedTokens=e}intercept(e,r){switch(e.type){case"SPL":{let o=Y($(e)),n=this.lastSelectedTokens[o];return e.data.ugcTokenMeta?.status==="preDeploy"&&!n?(zA(e),r("ugcWarning"),"interrupt"):"continue"}default:return"continue"}}};function dB({lastSelectedTokens:t,storeSelectedToken:e}){return[new Mu(t,e),new Ou(t)]}function zv(){let{lastSelectedTokens:t,storeSelectedToken:e}=Hv();return(0,jv.useMemo)(()=>dB({lastSelectedTokens:t,storeSelectedToken:e}),[t,e])}var Wv=(0,Do.createContext)(void 0),fB=({children:t})=>{let e=(0,Do.useMemo)(()=>$v(),[]),r=zv();return Do.default.createElement(Wv.Provider,{value:{buyAssetSectionAdapter:e,interceptors:r}},t)},ca=()=>{let t=(0,Do.useContext)(Wv);if(!t)throw new Error("useSwapAssetSelect must be used within a SwapAssetSelectProvider");return t};var gB=()=>{let{interceptors:t}=ca();return{executeInterceptors:(0,Zv.useCallback)((r,o)=>{for(let n of t)if(n.intercept(r,o)==="interrupt")return"interrupt";return"continue"},[t])}};i();a();var Bn=k(D());var Yv=3;function Pf(t){return{id:t.id,data:t.data,...t.header?{header:t.header}:{}}}var yB=t=>{let[e,r]=(0,Bn.useState)({}),o=(0,Bn.useCallback)((c,u)=>r(p=>({...p,[c]:u})),[]),{buyAssetSectionAdapter:n}=ca(),s=(0,Bn.useMemo)(()=>n.sections(t),[n,t]);return(0,Bn.useMemo)(()=>s.map(c=>{switch(c.behavior){case"static":return Pf(c);case"collapsible":{if(c.data.length<=Yv)return Pf(c);let u=e[c.id],p=u?c.data:c.data.slice(0,Yv),l=()=>o(c.id,!u),d=Pf(c);return{...d,header:{...d.header,button:{label:u?R.t("commandShowLess"):R.t("commandShowMore"),onClick:l}},data:p}}}}),[s,e,o])};i();a();i();a();var Xv=3,qu=()=>{let t=Qe.getMultivariateAssignment("latest-terms-of-service-version-number");return t&&f.number().safeParse(Number(t)).success?Number(t):Xv};var Ff=()=>{let t=ue(),e=ee();return ve({mutationFn:async o=>{if(!o)await hy(t);else{let n=qu();if(!n)return null;await Sy(t,n)}e.setQueryData(["termsHaveBeenAcknowledgedLastSeenVersion"],o)}})};i();a();i();a();var Jv=async t=>await t.get("termsHaveBeenAcknowledgedLastSeenVersion");var Ks=()=>{let t=ue(),e=async()=>{let r=qu();if(!r)return!1;let o=await Jv(t);return!(o===null||o<r)};return re({queryKey:["termsHaveBeenAcknowledgedLastSeenVersion"],queryFn:e})};i();a();i();a();var Cf=class{#e;constructor(e){this.#e=e}onBannerSeen=e=>{this.#e.capture("actionBannerSeenByUser",{data:{banner:e}})};onBannerClick=e=>{this.#e.capture("actionBannerClickedByUser",{data:{banner:e}})};onBannerDismiss=e=>{this.#e.capture("actionBannerDismissedByUser",{data:{banner:e}})};onInterstitialSeen=e=>{this.#e.capture("actionBannerInterstitialSeenByUser",{data:{banner:e}})};onInterstitialPrimaryClick=e=>{this.#e.capture("actionBannerInterstitialPrimaryButtonClickedByUser",{data:{banner:e}})};onInterstitialSecondaryClick=e=>{this.#e.capture("actionBannerInterstitialSecondaryButtonClickedByUser",{data:{banner:e}})};onInterstitialDismiss=e=>{this.#e.capture("actionBannerInterstitialDismissedByUser",{data:{banner:e}})}};i();a();var SB=({id:t,humanReadableId:e,description:r,bannerType:o})=>({id:t,humanReadableId:e,description:r,type:o}),hB=({id:t,humanReadableId:e,description:r,bannerType:o,interstitial:n})=>{let{title:s,primaryButtonText:c,secondaryButtonText:u}=n,p;if(o==="Modal")for(let[l,d]of Object.values(n.lineItems).entries())p={...p??{},[`lineItem${l+1}`]:{title:d.title,description:d.description}};return{id:t,humanReadableId:e,description:r,type:o,interstitial:{title:s,body:p,primaryButtonText:c??R.t("commandContinue"),secondaryButtonText:u??R.t("commandDismiss")}}};i();a();var eT=k(D());i();a();var _o=k(D());i();a();var obe=["firstTimeOnboarding","isResettingApp"],kf=["seed","seedless","privateKey"];var Rf=({onSuccess:t,onError:e}={})=>{let{t:r}=qe(),{data:[o]}=Se(["enable-onboarding-claim-username"]),{mutateAsync:n,isIdle:s,isPending:c,error:u}=Fg(),p=Bg(K=>K.username),{refetch:l}=Zn(),{data:d,error:g,refetch:y}=We(),{data:S,refetch:h}=he(),{data:w}=_g(),b=(0,_o.useMemo)(()=>{if(S)switch(S.type){case"seedless":case"seed":return S.seedIdentifier;case"privateKey":return S.privateKeyIdentifier;default:return}},[S]),T=(0,_o.useMemo)(()=>{let K={};return S?.addresses.forEach(x=>{K[x.networkID]=x.address}),K},[S?.addresses]),v=S&&kf.includes(S.type),P=!d||g instanceof Cg,C=b&&w&&T,B=o&&v&&P&&C,G=(0,_o.useCallback)(async()=>{if($n()||!o)return!1;let K=await h();if(!(K&&K.data&&kf.includes(K.data.type)))return!1;let E=await l(),F=E&&E.data,Q=await y(),O=Q&&Q.data;return!F||F&&!O},[o,h,l,y]),L=(0,_o.useMemo)(()=>u instanceof Error&&u.message!=="Unknown error"?u.message:r("settingsClaimUsernameError"),[u,r]),z=(0,_o.useCallback)(async()=>{C&&n({username:p,icon:wB(),addresses:T,accountIdentifiers:w.map(K=>K.identifier),secretIdentifiers:[b]}).then(()=>t?.()).catch(()=>e?.())},[w,n,C,e,t,T,b,p]);return(0,_o.useMemo)(()=>({handleClaimUsername:z,shouldNavigateToQuickClaimUsername:G,quickClaimUsernameAvailable:B,claimUsernameErrorMessage:L,isClaimingUsernamePending:c,isClaimUsernameIdle:s}),[L,z,s,c,B,G])},wB=()=>`https://assets.phantom.app/assets/phemojis/variant${bB(1,337)}.png`,bB=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t)+t));var AB=()=>{let t=oe(),{data:[e]}=Se(["enable-onboarding-claim-username-dropoff"]),{data:r}=pd("QuickClaimUsername"),{quickClaimUsernameAvailable:o}=Rf();return(0,eT.useMemo)(()=>({shouldShow:e&&r?.length&&o,showFlow:n=>{t.capture("onboardingUsernameClaimDropoff"),n?.()}}),[t,e,o,r?.length])};i();a();var vB=()=>{let{data:t}=Ks(),{mutate:e}=Ff(),{data:[r]}=Se(["enable-terms-of-service-update-interstitial"]);return{shouldShowTermsOfServiceUpdateInterstitial:!t&&r,setTermsAcknowledgement:e}};i();a();i();a();var IB=k(D());i();a();var tT=io(oe,t=>new Df(t)),Df=class{#e;constructor(e){this.#e=e}onOpen=()=>this.#e.capture("connectHardwareOpen");onSelectedChains=e=>{let r=new Set(e),o=[];for(let s of I.getAllChainIDs())r.has(s)&&o.push(s);let n={numChains:o.length,selectedChains:o.map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(", ")};this.#e.capture("connectHardwareSelectedChains",{data:n})};onDerivedAccounts=e=>{let r={};for(let[o,n]of Object.entries(e.derivedAddresses)){if(!TB(o))continue;let s={numberOfDerivedAccounts:n.addresses.length};n.duration!==void 0&&(s.derivationDuration=n.duration),r[o]=s}this.#e.capture("connectHardwareAccountsDerived",{data:{...r}})};onDiscoveredAccounts=e=>{let{discoveredAccounts:r}=e,o={};for(let n of r){if(n.status==="undiscovered")continue;let s=n.accounts.reduce((c,{derivationPathType:u,hasAccountActivity:p})=>{let l=Oo.getAddressType(u);return c[l]={derivationPathType:u,hasAccountActivity:p},c},{});for(let{hasAccountActivity:c,derivationPathType:u}of Object.values(s)){if(!c)continue;let p=o[u]??0;o[u]=p+1}}this.#e.capture("connectHardwareAccountsDiscovered",{data:{numberOfActiveAccounts:o}})};onConnectedAccounts=e=>{let r={};for(let o of e.accounts){let n=[...o.addresses,...o.publicKeys].reduce((s,c)=>{let u=Oo.getAddressType(c.pathType);return s[u]=c.pathType,s},{});for(let s of Object.values(n)){let c=r[s]??0;r[s]=c+1}}this.#e.capture("connectHardwareAccountsConnected",{data:{numberOfAccountsImported:e.accounts.length,numberOfAccountsImportedByDerivationPath:r}})}};function TB(t){return typeof t!="string"?!1:Object.keys(Wp).includes(t)}i();a();i();a();i();a();var Vu="@phantom/onboarding",to={firstTimeOnboarding:[`${Vu}:first-time-onboarding`],isResettingApp:[`${Vu}:is-resetting-app`],deriveLedgerAccounts:[`${Vu}:derive-ledger-accounts`],discoverLedgerAccounts:[`${Vu}:discover-ledger-accounts`]};i();a();i();a();i();a();i();a();var PB="/discover/v1",FB={Accept:"application/json"},CB=t=>{if(!t||!Array.isArray(t.accounts))return!1;for(let e of t.accounts)if(!(typeof e.address=="string"&&typeof e.amount=="string"&&(!e.lastActivityTimestamp||typeof e.lastActivityTimestamp=="number")&&e.chain&&typeof e.chain.id=="string"&&new Set(I.getAllNetworkIDs()).has(e.chain.id)&&typeof e.chain.name=="string"&&typeof e.chain.symbol=="string"&&typeof e.chain.imageUrl=="string"))return!1;return!0},kB=t=>!!t&&typeof t.message=="string",_f=async t=>{if(!t.accounts.length)throw new Error("Must send at least 1 account for discovery");let e=await X.api().headers(FB).post(PB,t),r=e.data;if(!me(e))throw kB(r)?new Error(r.message):new Error(`Unable to discover accounts with args: ${JSON.stringify(t)}`);if(CB(r))return r;throw new Error(`Invalid discover accounts response: ${JSON.stringify(r)}`)};var RB="fetch-multi-chain-accounts-by-seed",DB=()=>["bitcoinTaproot","bitcoinNativeSegwit"],_B=()=>["bip44Change","bip44","deprecated"],NB=()=>["bip44Ethereum","bip44EthereumSecondary","bip44EthereumTertiary"],BB=()=>["bip44Sui"],QB=(t,e)=>DB().map(r=>{let o={pathType:r,index:t},{publicKey:n}=e.derivePathType(r,t),s=Oo.getAddressType(r),c=ni({publicKey:n,addressType:s});return{chainType:s,chainId:se.Bitcoin.Mainnet,address:c,publicKey:Buffer.from(n).toString("hex"),pathParams:o}}),UB=(t,e)=>NB().map(r=>{let o={pathType:r,index:t},{publicKey:n}=e.derivePathType(r,t),s=Oo.getAddressType(r),c=ni({publicKey:n,addressType:"eip155"});return{chainType:s,pathType:r,address:c,publicKey:Buffer.from(n).toString("hex"),pathParams:o}}),LB=(t,e)=>_B().map(r=>{let o={pathType:r,index:t},n=e.derivePathType(r,t),s;switch(r){case"bip44Root":case"bip44":case"bip44Change":s=n.publicKey;break;case"deprecated":s=vg(n.secretKey).publicKey;break}let c=ni({publicKey:s,addressType:"solana"});return{chainType:"solana",chainId:se.Solana.Mainnet,address:c,publicKey:Buffer.from(s).toString("hex"),pathParams:o}}),MB=(t,e)=>BB().map(r=>{let o={pathType:r,index:t},{publicKey:n}=e.derivePathType(r,t),s=ni({publicKey:n,addressType:"sui"});return{chainType:"sui",chainId:se.Sui.Mainnet,address:s,publicKey:Ag(n),pathParams:o}}),OB=1e4,rT=async(t,e=!0)=>{let r=Object.assign({},...t);try{let o=Object.values(r).map(({account:g})=>({address:g.address,chainId:g.chainId})),n;e?n=(await gg(async()=>Fa(_f({accounts:o}),OB),()=>!0,2)).accounts:n=(await _f({accounts:o})).accounts;let s={};for(let g of n){let{account:y}=r[`${g.chain.id}-${g.address}`],S=y.publicKey,h=y.chainType,w=Da(y.pathParams),b={...g,publicKey:S,chainType:h,derivationPathType:y.pathParams.pathType,hasAccountActivity:!!g.lastActivityTimestamp||parseFloat(g.amount)>0};s[w]=[...s[w]||[],b]}Object.keys(s).forEach(g=>{s[g]=s[g].sort((y,S)=>I.compareNetworkID(y.chain.id,S.chain.id))});let c=Object.values(s),u=c.filter(g=>g.some(y=>y.hasAccountActivity)),p=!!u.length;return(p?u:c).map(g=>{let y=g[0];return{status:"discovered",seedIndex:r[`${y.chain.id}-${y.address}`].account.pathParams.index??-1,isSelectedByDefault:p,accounts:g}})}catch{let o=Object.values(r).map(({account:u})=>u),n={};for(let u of o){let{account:p}=r[`${u.chainId}-${u.address}`],l=Da(p.pathParams),d={...u,chain:{id:u.chainId,name:I.getNetworkName(u.chainId),symbol:I.getTokenSymbol(u.chainId)},chainType:Oo.getAddressType(p.pathParams.pathType),derivationPathType:p.pathParams.pathType,hasAccountActivity:!1};n[l]=[...n[l]||[],d]}return Object.keys(n).forEach(u=>{n[u]=n[u].sort((p,l)=>I.compareNetworkID(p.chain.id,l.chain.id))}),Object.values(n).map(u=>{let p=u[0];return{status:"undiscovered",seedIndex:r[`${p.chain.id}-${p.address}`].account.pathParams.index??-1,accounts:u,isSelectedByDefault:!1}})}},qB=async({hdWallet:t,startIndex:e,endIndex:r,enabledAddressTypes:o,enabledChains:n})=>{let s=[];for(let c=e;c<=r;++c){let u={};if(o.includes("bip122_p2wpkh"))for(let p of QB(c,t))u[`${se.Bitcoin.Mainnet}-${p.address}`]={account:p};if(o.includes("eip155")){let p=UB(c,t),l=n.filter(d=>I.isEVMNetworkID(I[d].mainnetID));for(let d of l){let g=I[d];for(let{address:y,publicKey:S,chainType:h,pathParams:w}of p)u[`${g.mainnetID}-${y}`]={account:{chainType:h,chainId:g.mainnetID,address:y,publicKey:S,pathParams:w}}}}if(o.includes("solana"))for(let p of LB(c,t))u[`${p.chainId}-${p.address}`]={account:p};if(o.includes("sui"))for(let p of MB(c,t))u[`${p.chainId}-${p.address}`]={account:p};s.push(u)}return rT(s)};function DAe({batchSize:t,hdWallet:e,enabledAddressTypes:r,enabledChains:o}){let n=!!e&&r.length!=0;return $t({enabled:n,queryKey:[RB,t],queryFn:async({pageParam:p=0})=>{try{if(t<1)throw new Error(`Need positive batchSize: ${t}`);if(!e)throw new Error("Missing HDWallet");let l=[],d=[],g=p===0,y=p,S=!0;for(;S;){let h=y,w=y+t-1,T=(await qB({hdWallet:e,startIndex:h,endIndex:w,enabledAddressTypes:r,enabledChains:o})).flat(1);y+=t,S=!1;for(let v of T)l.push(v),(v.status==="undiscovered"||v.isSelectedByDefault)&&d.push(v),g&&v.status==="discovered"&&v.isSelectedByDefault&&(S=!0)}if(g&&d.length===0&&l.length>1){let h=l[0],w=h.accounts.map(T=>({...T,hasAccountActivity:!1})),b={status:"undiscovered",seedIndex:h.seedIndex,accounts:w,isSelectedByDefault:!1};d.push(b)}return d}catch(l){throw l instanceof Error&&U.captureError(l,"account"),l}},getNextPageParam:(p,l)=>{let d=l.length,g=d?l[0]:[],y=g.length?VB(g[g.length-1].seedIndex,t):0;return d===1?y:y+t*(d-1)},gcTime:0,staleTime:0,initialPageParam:0})}var VB=(t,e)=>Math.ceil(t/e)*e+e;i();a();i();a();var GB=()=>{let t=ue(),e=async()=>{let o=await t.get("firstTimeOnboarding");return o===null?!0:o.isFirstTimeOnboarding},{data:r}=re({queryKey:to.firstTimeOnboarding,queryFn:e});return r},KB=()=>{let t=ue(),e=ee();return ve({mutationFn:async o=>{await t.set("firstTimeOnboarding",{isFirstTimeOnboarding:o}),wy(t,o?void 0:Date.now()),e.setQueryData(to.firstTimeOnboarding,o)}})};i();a();var $B=()=>{let t=ue(),e=async()=>{let o=await t.get("isResettingApp");return o===null?{isResettingApp:!1,isFirstTimeResettingApp:!1}:o},{data:r}=re({queryKey:to.isResettingApp,queryFn:e});return r},HB=()=>{let t=ue(),e=ee();return ve({mutationFn:async o=>{let s=(await t.get("isResettingApp"))?.isFirstTimeResettingApp??!1;await t.set("isResettingApp",{isResettingApp:o,isFirstTimeResettingApp:s}),e.setQueryData(to.isResettingApp,{isResettingApp:o,isFirstTimeResettingApp:s})}})},jB=()=>{let t=ue(),e=ee();return ve({mutationFn:async o=>{let s=(await t.get("isResettingApp"))?.isResettingApp??!1;await t.set("isResettingApp",{isResettingApp:s,isFirstTimeResettingApp:o}),e.setQueryData(to.isResettingApp,{isResettingApp:s,isFirstTimeResettingApp:o})}})};i();a();var zB=k(Tx()),WB=k(D());i();a();var ZB=()=>{let{data:[t]}=Se(["enable-zero-balance-nux"]),{data:e}=he(),{data:r}=Dg(e?.identifier),o=e?.isReadOnly;return r?.value===0&&!o&&t};i();a();i();a();var xr=k(D());i();a();i();a();i();a();var YB=["SwapperNoQuotes","UnsupportedCountry","UnknownError"],oT=(t,e,r,o)=>{t instanceof Ne&&YB.includes(t.code)||(!e||e>=400&&e<500)&&U.addBreadcrumb(r,JSON.stringify(o),"info")};i();a();var nT=async(t,e,r=void 0)=>{if(me(t))return Promise.resolve();let o;try{o=t.data}catch{throw new Ne({key:r})}let n=Jc.safeParse(o);throw n.success?(U.addBreadcrumb(e,JSON.stringify(n.data),"info"),new Ne({key:n.data.name})):new Ne({key:r})};i();a();var sT=t=>{let e=new Ne({key:"SwapperNoQuotes"});if(Vi.safeParse(t?.type).success===!1)throw U.captureError(new Error("Failed to parse a valid quote type."),"swapper"),new Error("Invalid input");let r=Gi.safeParse(t);if(!r.success)throw U.captureError(new Error("Failed to parse a valid swap quotes response."),"swapper"),e;if(r.data.quotes.length===0)throw e;return r.data};var iT="swap-quotes";async function Gu({sellTokenCaip19:t,buyTokenCaip19:e,taker:r,takerDestination:o,exactOut:n,sellAmount:s,slippageTolerance:c,signal:u,enableAutoSlippage:p,priorityFee:l}){let d;try{Vo(r)&&(r.address=r.address.toLowerCase()),o&&Vo(o)&&(o.address=o.address.toLowerCase()),Vo(e)&&(e.address=e.address.toLowerCase()),Vo(t)&&(t.address=t.address.toLowerCase());let g="/swap/v2/quotes",y={sellToken:t,buyToken:e,taker:r,takerDestination:o,exactOut:n,sellAmount:s,slippageTolerance:c,autoSlippage:p,priorityFee:l},S=await X.api().post(g,y,{signal:u});return d=S.status,await nT(S,iT,"SwapperNoQuotes"),sT(S.data)}catch(g){let y=g instanceof Ne?g:new Ne;throw oT(y,d,iT,{sellToken:t,buyToken:e,sellAmount:s,slippageTolerance:c}),y}}var Ku=class{getQuotes(e){return Gu({sellTokenCaip19:e.sell,buyTokenCaip19:e.buy,taker:e.taker,takerDestination:e.takerDestination,sellAmount:e.amount,slippageTolerance:e.slippageTolerance,signal:e.signal,exactOut:e.exactOutEnabled,priorityFee:e.priorityFee,enableAutoSlippage:e.autoSlippageEnabled})}};i();a();i();a();var $u=class{constructor(e,r,o,n,s,c){this.executingQuote=e;this.takerAddress=r;this.networkId=o;this.quote=n;this.executionId=s;this.evmSwapCommand=c}createTransaction(){return Ed({networkId:this.networkId,callerAddress:this.takerAddress,quote:this.quote})}async swap(e,r,o,n,s){return this.evmSwapCommand.swap(e,r,o,n,s)}async waitForConfirmation(e){return this.evmSwapCommand.waitForConfirmation(e)}};i();a();i();a();var uT=k(D());i();a();var aT=k(D());function $s(t){return(0,aT.useMemo)(()=>_e(t),[t])}function pT({sender:t}){let{t:e}=qe(),{currentQuote:r}=ne(),o=A(g=>g.buyFungible),n=A(g=>g.sellFungible),s=$s(Me(r)),{data:c}=Sr({callerAddress:t,quote:r,sellFungible:n}),u=c?.transactionPairs?.flatMap(g=>[...$o(g.sellToken)??[],...$o(g.buyToken)??[]])??[],p=[...new Set(u)],{fungibles:l}=Bt({keys:p});return{pendingActivityRows:(0,uT.useMemo)(()=>Qn({swapTransactions:c,sellFungible:n,buyFungible:o,fungibles:l,t:e,currentQuote:r,provider:s}),[c,n,o,l,e,r,s])}}function Qn({swapTransactions:t,sellFungible:e,buyFungible:r,fungibles:o,currentQuote:n,provider:s,t:c}){let u={pendingSwapActivityRows:[],pendingApprovalActivityRows:[]};return t?t.type==="evm"?t.transactionTypes.reduce((p,l,d)=>{let g=e,y=r,S,h=t.transactionPairs;if(h&&h[d]){let w=h[d];g=Hu(w.sellToken,o)??e,y=Hu(w.buyToken,o)??r,S=w.approvalMetadata}if(l.includes("approval")){let w=g?.data.symbol??"";p.pendingApprovalActivityRows.push({topLeft:S?{text:`${c("transactionsPendingApproving")} ${S.symbol}`}:{text:`${c("transactionsPendingApproving")} ${w}`}})}else g&&y&&p.pendingSwapActivityRows.push(cT({sellFungible:g,buyFungible:y,sellAmount:n?.sellAmount,buyAmount:n?.buyAmount,provider:s,isBridge:l.includes("bridge"),t:c}));return p},u):t.transactionTypes.reduce((p,l,d)=>{let g=e,y=r,S=t.transactionPairs;if(S&&S[d]){let h=S[d];g=Hu(h.sellToken,o)??e,y=Hu(h.buyToken,o)??r}return g&&y&&p.pendingSwapActivityRows.push(cT({sellFungible:g,buyFungible:y,sellAmount:n?.sellAmount,buyAmount:n?.buyAmount,provider:s,isBridge:l.includes("bridge"),t:c})),p},u):u}var cT=({sellFungible:t,buyFungible:e,sellAmount:r,buyAmount:o,provider:n,isBridge:s,t:c})=>{let u=t.data.symbol,p=e.data.symbol,l=fe(r??0,t.data.decimals??0),d=fe(o??0,e.data.decimals??0);return{topLeft:{text:`${c(s?"transactionsPendingBridging":"transactionsPendingSwapping")} on ${n}`},topRight:{text:`${d} ${p}`,color:"accentSuccess"},bottomLeft:{text:`${u} \u2192 ${p}`},bottomRight:{text:`${l} ${u}`}}},Hu=(t,e)=>e.find(r=>($o(t)??[]).includes(r.data.key));var lT="standard",ju=class{constructor(e,r,o,n,s,c){this.executingQuote=e;this.takerAddress=r;this.networkId=o;this.quote=n;this.executionId=s;this.gasEstimation=c}createTransaction(){return Ki({quote:this.quote,callerAddress:this.takerAddress,networkId:this.networkId,sellFungible:this.executingQuote.sell})}async swap(e,r,o,n,s){let c=this.gasEstimation??await this.estimateGas(this.quote,this.executingQuote.response,lT,r,o);if(!c)throw new Error(`No gas estimation found for ${lT}`);let u=this.parsePendingActivity(this.executingQuote,r),{signature:p,error:l}=await U.startSpan({name:"Process EVM Swap Txns"},()=>Tu({transactions:r.transactions,transactionTypes:r.transactionTypes,networkID:this.networkId,gasEstimation:c,pendingSwapActivityRows:u.pendingSwapActivityRows,pendingApprovalActivityRows:u.pendingApprovalActivityRows,accountIdentifier:e,accountSigner:n,storage:s}));if(l)throw l;return{networkID:this.networkId,id:p}}async waitForConfirmation(e){await Og(e.networkID,e.id)}async estimateGas(e,r,o,n,s){let c=await La(this.networkId,!0);if(!c)return;let u=c[o];if(!u)return;let p={networkID:this.networkId,gasLimit:new j(1),maxFeePerGas:u.maxFeePerGas,maxPriorityFeePerGas:u.maxPriorityFeePerGas};return Cs.estimateGas({swapTransactions:n,evmGasEstimation:p,currentQuote:e,scanResult:s,includeGasBuffer:!0,networkID:this.networkId,gasBuffer:r.gasBuffer})}parsePendingActivity(e,r){let o=_e(Me(e.quote));return Qn({swapTransactions:r,sellFungible:e.sell,buyFungible:e.buy,fungibles:[],currentQuote:e.quote,provider:o,t:R.t})}};i();a();var mT=k(xx());i();a();var No=class{constructor(e,r,o,n,s,c){this.executingQuote=e;this.takerAddress=r;this.networkId=o;this.quote=n;this.executionId=s;this.connection=c}async createTransaction(){return $i({quote:this.quote,connection:this.connection})}async swap(e,r,o,n,s){let c=this.parsePendingActivity(this.executingQuote,r),{signature:u,error:p}=await xu({callerAddress:this.takerAddress,connection:this.connection,networkID:this.networkId,transactions:r.transactions,pendingSwapActivityRows:c.pendingSwapActivityRows,accountIdentifier:e,accountSigner:n,storage:s});if(p)throw p;return{networkID:this.networkId,id:u}}async waitForConfirmation(e){let r=Kg(e.networkID);await Ga({connection:r,signature:e.id})}parsePendingActivity(e,r){let o=_e(Me(e.quote));return Qn({swapTransactions:r,sellFungible:e.sell,buyFungible:e.buy,fungibles:[],currentQuote:e.quote,provider:o,t:R.t})}};var XB=f.object({signature:f.string()}),zu=class extends No{constructor(r,o,n,s,c,u,p){super(r,o,n,s,c,u);this.executingQuote=r;this.takerAddress=o;this.networkId=n;this.quote=s;this.executionId=c;this.connection=u;this.gaslessSignature=p}async swap(r,o,n,s,c){let u=this.quote.transactionData[0];if(!u)throw new Error("No transaction data found in quote");let p=new Kt.PublicKey(this.takerAddress),d=this.parsePendingActivity(this.executingQuote,o).pendingSwapActivityRows[0];if(!d)throw new Error("Unable to create pending activity for gasless");let g=await Xg({accountIdentifier:r,feePayer:p,connection:this.connection,accountSigner:s,transaction:or(u,"bs58"),pendingTransactionInput:{ownerAddress:p.toBase58(),networkID:this.networkId,data:{signature:this.gaslessSignature},type:"swap",display:{summary:d}},storage:c,opts:{}});return{id:(await this.submitGaslessSwap(this.gaslessSignature,g)).signature,networkID:this.networkId}}async submitGaslessSwap(r,o){let n=await X.api().post("/gasless-swap/v1/submit",{quoteSignature:r,encoding:"bs58",chainId:this.networkId,transaction:mT.default.encode(o.serialize())}),s=XB.safeParse(n.data);if(!s.success)throw new Error("Failed to submit gasless swap");return s.data}};i();a();var Wu=class{constructor(e,r,o,n,s,c){this.executingQuote=e;this.takerAddress=r;this.networkId=o;this.quote=n;this.executionId=s;this.connection=c;this.solanaSwapCommand=new No(e,r,o,e.quote,s,c)}solanaSwapCommand;createTransaction(){return Id({quote:this.quote,connection:this.connection})}async swap(e,r,o,n,s){return this.solanaSwapCommand.swap(e,r,o,n,s)}async waitForConfirmation(e){return this.solanaSwapCommand.waitForConfirmation(e)}};i();a();var Zu=class{constructor(e,r,o,n,s){this.executingQuote=e;this.takerAddress=r;this.networkId=o;this.quote=n;this.executionId=s}async createTransaction(){return Hi({quote:this.quote})}async swap(e,r,o,n,s){let c=this.parsePendingActivity(this.executingQuote,r),{signature:u,error:p}=await Eu({callerAddress:this.takerAddress,networkID:this.networkId,transactions:r.transactions,pendingSwapActivityRows:c.pendingSwapActivityRows,accountIdentifier:e,accountSigner:n,storage:s});if(p)throw p;return{networkID:this.networkId,id:u}}async waitForConfirmation(e){await qa(this.networkId,e.id)}parsePendingActivity(e,r){let o=_e(Me(e.quote));return Qn({swapTransactions:r,sellFungible:e.sell,buyFungible:e.buy,fungibles:[],currentQuote:e.quote,provider:o,t:R.t})}};var Yu=class{create(e,r,o,n,s){if(I.isSolanaNetworkID(o)&&Hr(e.quote)){let c=new No(e,r,o,e.quote,gt(),n);return e.quote.gaslessSignature?new zu(e,r,o,e.quote,gt(),n,e.quote.gaslessSignature):c}else{if(I.isEVMNetworkID(o)&&Ft(e.quote))return this.createEvmSwapCommand(e,r,o,s);if(I.isSuiNetworkID(o)&&jr(e.quote))return new Zu(e,r,o,e.quote,gt());if(de(e.quote)){if(I.isSolanaNetworkID(o))return new Wu(e,r,o,e.quote,gt(),n);if(I.isEVMNetworkID(o)){let c=this.createEvmSwapCommand(e,r,o,s);return new $u(e,r,o,e.quote,gt(),c)}}}throw new Error("Unsupported SwapQuote}")}createEvmSwapCommand(e,r,o,n){let s=n?n.filter(Ma):void 0;return s&&s.length===0&&(s=void 0),new ju(e,r,o,e.quote,gt(),s)}};i();a();i();a();var JB=["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"],Nf=class{ERROR=-1;CONNECTING=0;OPEN=1;CLOSED=2;CRLF=`\r
`;LF=`
`;CR="\r";lastEventId=null;status=this.CONNECTING;eventHandlers={open:[],message:[],error:[],close:[]};method;timeout;timeoutBeforeConnection;withCredentials;headers;body;debug;interval;lineEndingCharacter;_xhr=null;_pollTimer=null;_lastIndexProcessed=0;url;constructor(e,r={}){if(!e||typeof e!="string"&&typeof e.toString!="function")throw new SyntaxError("[EventSource] Invalid URL argument.");this.url=typeof e.toString=="function"?e.toString():e,this.method=r.method||"GET",this.timeout=r.timeout??0,this.timeoutBeforeConnection=r.timeoutBeforeConnection??500,this.withCredentials=r.withCredentials||!1,this.headers=r.headers||{},this.body=r.body||void 0,this.debug=r.debug||!1,this.interval=r.pollingInterval??5e3,this.lineEndingCharacter=r.lineEndingCharacter||null,this._pollAgain(this.timeoutBeforeConnection,!0)}_pollAgain(e,r){(e>0||r)&&(this._logDebug(`[EventSource] Will open new connection in ${e} ms.`),this._pollTimer=setTimeout(()=>{this.open()},e))}open(){try{this.status=this.CONNECTING,this._lastIndexProcessed=0,this._xhr=new XMLHttpRequest,this._xhr.open(this.method,this.url,!0),this.withCredentials&&(this._xhr.withCredentials=!0),this._xhr.setRequestHeader("Accept","text/event-stream"),this._xhr.setRequestHeader("Cache-Control","no-cache"),this._xhr.setRequestHeader("X-Requested-With","XMLHttpRequest");for(let[e,r]of Object.entries(this.headers))this._xhr.setRequestHeader(e,r);this.lastEventId!==null&&this._xhr.setRequestHeader("Last-Event-ID",this.lastEventId),this._xhr.timeout=this.timeout,this._xhr.onreadystatechange=()=>{if(this.status===this.CLOSED)return;let e=this._xhr;this._logDebug(`[EventSource][onreadystatechange] ReadyState: ${JB[e.readyState]||"Unknown"}(${e.readyState}), status: ${e.status}`),[XMLHttpRequest.DONE,XMLHttpRequest.LOADING].includes(e.readyState)&&(e.status>=200&&e.status<400?(this.status===this.CONNECTING&&(this.status=this.OPEN,this.dispatch("open",{type:"open"}),this._logDebug("[EventSource][onreadystatechange][OPEN] Connection opened.")),this._handleEvent(e.responseText||""),e.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][DONE] Operation done."),this._pollAgain(this.interval,!1))):e.status!==0&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:e.responseText,xhrStatus:e.status,xhrState:e.readyState}),e.readyState===XMLHttpRequest.DONE&&(this._logDebug("[EventSource][onreadystatechange][ERROR] Response status error."),this._pollAgain(this.interval,!1))))},this._xhr.onerror=()=>{this.status!==this.CLOSED&&(this.status=this.ERROR,this.dispatch("error",{type:"error",message:this._xhr.responseText,xhrStatus:this._xhr.status,xhrState:this._xhr.readyState}))},this.body?this._xhr.send(this.body):this._xhr.send(),this.timeout>0&&setTimeout(()=>{this._xhr.readyState===XMLHttpRequest.LOADING&&(this.dispatch("error",{type:"timeout"}),this.close())},this.timeout)}catch(e){this.status=this.ERROR,this.dispatch("error",{type:"exception",message:e.message,error:e})}}_logDebug(...e){this.debug&&console.debug(...e)}_handleEvent(e){if(this.lineEndingCharacter===null){let l=this._detectNewlineChar(e);if(l!==null)this._logDebug(`[EventSource] Automatically detected lineEndingCharacter: ${JSON.stringify(l).slice(1,-1)}`),this.lineEndingCharacter=l;else{console.warn("[EventSource] Unable to identify the line ending character. Ensure your server delivers a standard line ending character: \\r\\n, \\n, \\r, or specify your custom character using the 'lineEndingCharacter' option.");return}}let r=this._getLastDoubleNewlineIndex(e);if(r<=this._lastIndexProcessed)return;let o=e.substring(this._lastIndexProcessed,r).split(this.lineEndingCharacter);this._lastIndexProcessed=r;let n,s=null,c=[],u=0,p="";for(let l=0;l<o.length;l++)if(p=o[l].trim(),p.startsWith("event"))n=p.replace(/event:?\s*/,"");else if(p.startsWith("retry"))u=parseInt(p.replace(/retry:?\s*/,""),10),isNaN(u)||(this.interval=u);else if(p.startsWith("data"))c.push(p.replace(/data:?\s*/,""));else if(p.startsWith("id"))s=p.replace(/id:?\s*/,""),s!==""?this.lastEventId=s:this.lastEventId=null;else if(p===""&&c.length>0){let d=n||"message",g={type:d,data:c.join(`
`),url:this.url,lastEventId:this.lastEventId};this.dispatch(d,g),c=[],n=void 0}}_detectNewlineChar(e){let r=[this.CRLF,this.LF,this.CR];for(let o of r)if(e.includes(o))return o;return null}_getLastDoubleNewlineIndex(e){let r=this.lineEndingCharacter+this.lineEndingCharacter,o=e.lastIndexOf(r);return o===-1?-1:o+r.length}addEventListener(e,r){this.eventHandlers[e]===void 0&&(this.eventHandlers[e]=[]),this.eventHandlers[e].push(r)}removeEventListener(e,r){this.eventHandlers[e]!==void 0&&(this.eventHandlers[e]=this.eventHandlers[e].filter(o=>o!==r))}removeAllEventListeners(e){let r=Object.keys(this.eventHandlers);if(e===void 0)for(let o of r)this.eventHandlers[o]=[];else{if(!r.includes(e))throw Error(`[EventSource] '${e}' type is not supported event type.`);this.eventHandlers[e]=[]}}dispatch(e,r){if(Object.keys(this.eventHandlers).includes(e))for(let n of Object.values(this.eventHandlers[e]))n(r)}close(){this.status!==this.CLOSED&&(this.status=this.CLOSED,this.dispatch("close",{type:"close"})),clearTimeout(this._pollTimer),this._xhr&&this._xhr.abort()}},Xu=Nf;i();a();var e0={"X-Phantom-Version":Ee,"X-Phantom-Platform":$e},Bf={name:"SwapperNoQuotes",message:"No quotes found"},Hs=class{getOptions(e={}){return{...e,headers:{...e.headers,...e0}}}createStreamUrl({amount:e,buy:r,sell:o,taker:n,takerDestination:s,slippageTolerance:c,exactOut:u,autoSlippage:p,priorityFee:l,clientEnableGaslessSwap:d}){let g=new URLSearchParams({taker:n,takerDestination:s,buyToken:Y($(r)),sellToken:Y($(o)),sellAmount:e,exactOut:u?"true":"false",autoSlippage:p?"true":"false",clientEnableGaslessSwap:d?"true":"false"});return c&&g.set("slippageTolerance",String(c)),l&&g.set("priorityFee",String(l)),`${so()}/swap/v2/stream/quotes?${g.toString()}`}handleNewQuoteResponse(e,r){try{if(!e)throw new Error("No data in new-quote-response");let o=JSON.parse(e),n=this.parseSwapQuotesResponse(o);r({type:"newQuoteResponse",quoteResponse:n})}catch{r({type:"error",errorResponse:Bf})}}handleErrorQuoteResponse(e,r){try{if(!e)throw new Error("No data in error-quote-response");let o=Jc.safeParse(JSON.parse(e));r({type:"error",errorResponse:o.success?o.data:Bf})}catch{r({type:"error",errorResponse:Bf})}}parseSwapQuotesResponse(e){let r=new Ne({key:"SwapperNoQuotes"});if(Vi.safeParse(e?.type).success===!1)throw U.captureError(new Error("Failed to parse a valid quote type."),"swapper"),new Error("Invalid input");let o=Gi.safeParse(e);if(!o.success)throw U.captureError(new Error("Failed to parse a valid swap quotes response."),"swapper"),r;if(o.data.includesAllProviders&&o.data.quotes.length===0)throw r;return o.data}};var Ju=class extends Hs{eventSource;open(e,r){this.close(),this.eventSource=new Xu(this.createStreamUrl(e),this.getOptions());let o=n=>{switch(n.type){case"new-quote-response":this.handleNewQuoteResponse(n.data,r);break;case"error-quote-response":this.handleErrorQuoteResponse(n.data,r);break;case"open":r({type:"open"});break;case"error":r({type:"error",errorResponse:{name:"UnknownError",message:n.message}});break;case"close":r({type:"close"});break}};this.eventSource.addEventListener("new-quote-response",o),this.eventSource.addEventListener("error-quote-response",o),this.eventSource.addEventListener("open",o),this.eventSource.addEventListener("error",o),this.eventSource.addEventListener("close",o)}close(){this.eventSource&&(this.eventSource.removeAllEventListeners(),this.eventSource.close())}};i();a();var ep=class extends Hs{eventSource;open(e,r){this.close(),this.eventSource=new Xu(this.createStreamUrl(e),this.getOptions());let o=n=>{switch(n.type){case"new-quote-response":this.handleNewQuoteResponse(n.data,r);break;case"error-quote-response":this.handleErrorQuoteResponse(n.data,r);break;case"open":r({type:"open"});break;case"error":r({type:"error",errorResponse:{name:"UnknownError",message:n.message}});break;case"close":r({type:"close"});break}};this.eventSource.addEventListener("new-quote-response",o),this.eventSource.addEventListener("error-quote-response",o),this.eventSource.addEventListener("open",o),this.eventSource.addEventListener("error",o),this.eventSource.addEventListener("close",o)}close(){this.eventSource&&(this.eventSource.removeAllEventListeners(),this.eventSource.close())}};i();a();var tp=class{constructor(e){this.producer=e}listeners=new Set;openStream(e){this.listeners.forEach(r=>r.onEvent({type:"openRequested"})),this.producer.close(),this.producer.open(e,r=>{this.listeners.forEach(o=>o.onEvent(r))})}closeStream(){this.producer.close()}subscribe(e){this.listeners.add(e)}unsubscribe(e){this.listeners.delete(e)}};i();a();i();a();i();a();async function rp({transactions:t,locale:e,url:r,deviceId:o,takerAddress:n,networkId:s,slippageType:c,quote:u,quoteResponse:p}){return await gi(e,o,{type:"transaction",userAccount:n,params:t0(t),url:r,networkID:s,context:de(u)?"bridge":"swap",provider:r0(u),slippageType:c,metadata:{swapper:{quoteOutputAmount:u.buyAmount,quoteOutputToken:Y(p.buyToken),quoteInputAmount:u.sellAmount,quoteInputToken:Y(p.sellToken)}}})}var t0=t=>{switch(t.type){case"evm":return{transactions:t.transactions};case"solana":return{transactions:t.transactions,method:"signAndSendTransaction",simulatorConfig:{decodeAccounts:!1}};case"sui":return{transactions:t.transactions,method:"signAndSendTransaction"}}},r0=t=>{let e=de(t)?Ps(t):t?.sources??[];return _e(e)};var op=class{constructor(e,r,o,n,s){this.networkID=e;this.account=r;this.priceClient=o;this.quoteInput=n;this.quoteResponse=s}getNativeTokenCaip19(){return Y({chainId:this.networkID,resourceType:"nativeToken",slip44:I.getSlip44(this.networkID)})}async processQuote(e){let r=await this.createSwapTransactions(e),o=await this.calculateNetworkFee(r,e),n=this.appendPhantomFee([o],e);return{quote:e,fees:{totalFees:this.sumFees(n),fees:n},swapTransactions:r}}createSwapTransactions(e){return Ki({networkId:this.networkID,callerAddress:this.checkChainAddress().address,quote:e,sellFungible:this.quoteInput.sell})}appendPhantomFee(e,r){let o=r.fees.find(n=>n.type==="phantom");return o?[...e,{type:"phantom",percentage:new q(o.percentage),amountUsd:new q(0),amount:new q(0)}]:e}async calculateNetworkFee(e,r){let o=await this.estimateGas(r,e);if(!o)throw new Error("Unable to estimate gas");let n=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!n.usd)throw new Error("Price data not found");let s=o[0],c=I.getTokenDecimals(this.networkID),u=s.gasLimit.times(s.maxFeePerGas);return{type:"evmGas",amountUsd:new q(u).shiftedBy(-c).times(n.usd),amount:u}}async estimateGas(e,r){let o=await La(this.networkID,!0);if(!o)return;let n=o.standard;if(!n)return;let s={networkID:this.networkID,gasLimit:new q(1),maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas},c=await rp({transactions:r,locale:"en-us",url:"https://phantom.app",deviceId:"123",takerAddress:this.checkChainAddress().address,networkId:this.networkID,slippageType:this.quoteInput.autoSlippage?"auto":"fixed",quote:e,quoteResponse:this.quoteResponse});return Cs.estimateGas({swapTransactions:r,evmGasEstimation:s,currentQuote:e,scanResult:c,includeGasBuffer:!0,networkID:this.networkID,gasBuffer:this.quoteResponse.gasBuffer})}checkChainAddress(){let e=this.account.addresses.find(r=>r.networkID===this.networkID);if(!e)throw new Error(`No address found for chain ${this.networkID}`);return Ra(e)&&(e.address=e.address.toLowerCase()),e}sumFees(e){return e.reduce((r,o)=>r.plus(o.amountUsd),new q(0))}};i();a();var np=class{constructor(e,r,o){this.networkID=e;this.priceClient=r;this.connection=o}getNativeTokenCaip19(){return Y({chainId:this.networkID,resourceType:"nativeToken",slip44:I.getSlip44(this.networkID)})}async processQuote(e){let r=await this.createSwapTransactions(e),o=await this.calculateNetworkFee(r),n=this.appendPhantomFee([o],e);return{quote:e,fees:{totalFees:this.sumFees(n),fees:n},swapTransactions:r}}createSwapTransactions(e){return $i({quote:e,connection:this.connection})}appendPhantomFee(e,r){let o=r.fees.find(n=>n.type==="phantom");return o?[...e,{type:"phantom",percentage:new q(o.percentage),amountUsd:new q(0),amount:new q(0)}]:e}async calculateNetworkFee(e){let r=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!r.usd)throw new Error("Price data not found");let o=e.transactions.map(l=>this.processEncodedTx(l,this.networkID,this.connection)),s=(await Promise.all(o)).map(l=>l.networkFeeEstimation.value),c=new q(s[0]);return{type:"solanaNetwork",amountUsd:c.div(new q(Kt.LAMPORTS_PER_SOL)).times(r.usd),amount:c}}async processEncodedTx(e,r,o){let n=or(e,"bs58");return await Ea(n,o),{networkFeeEstimation:await Va(r,[n.message])}}sumFees(e){return e.reduce((r,o)=>r.plus(o.amountUsd),new q(0))}};i();a();var sp=class{constructor(e,r){this.networkID=e;this.priceClient=r}getNativeTokenCaip19(){return Y({chainId:this.networkID,resourceType:"nativeToken",slip44:I.getSlip44(this.networkID)})}async processQuote(e){let r=await this.createSwapTransactions(e),o=await this.calculateNetworkFee(r),n=this.appendPhantomFee([o],e);return{quote:e,fees:{totalFees:this.sumFees(n),fees:n},swapTransactions:r}}createSwapTransactions(e){return Hi({quote:e})}appendPhantomFee(e,r){let o=r.fees.find(n=>n.type==="phantom");return o?[...e,{type:"phantom",percentage:new q(o.percentage),amountUsd:new q(0),amount:new q(0)}]:e}async calculateNetworkFee(e){let r=await this.priceClient.getPrice(this.getNativeTokenCaip19());if(!r.usd)throw new Error("Price data not found");let o=new q(0),n=new q(0);try{let s=await Promise.all(e.transactions.map(c=>Oa({networkID:this.networkID,transaction:Jn.deserializeTransactionString(c)})));n=new q(s.reduce((c,u)=>c+u.gasBudget.toNumber(),0)),o=n.dividedBy(1e9).multipliedBy(r.usd)}catch{return{type:"suiNetwork",amountUsd:new q(0),amount:new q(0)}}return{type:"suiNetwork",amountUsd:o,amount:n}}sumFees(e){return e.reduce((r,o)=>r.plus(o.amountUsd),new q(0))}};var ip=class{create(e,r,o){let n=r.sell.data.chain.id;if(I.isSolanaNetworkID(n)){let s=cy(e).connection;return new np(n,this.priceClient,s)}else{if(I.isEVMNetworkID(n))return new op(n,e,this.priceClient,r,o);if(I.isSuiNetworkID(n))return new sp(n,this.priceClient)}throw new Error(`Unsupported network ID: ${n}`)}priceClient={getPrice:async e=>(await Ka({tokens:[qo(e)]}))[e]};isSupportedNetwork(e){return I.isSolanaNetworkID(e)||I.isEVMNetworkID(e)}},ap=class{create(e,r,o){return{processQuote:async n=>({quote:n,fees:{totalFees:new q(0),fees:[]}})}}};i();a();i();a();i();a();var js=t=>t.reduce((e,r)=>{if(!r||r.type!=="SPL")return e;let o;return r.type==="SPL"&&(o=o0(r)),o?{fees:[...e.fees,o],totalPercentFees:e.totalPercentFees+o.percentFee}:e},{fees:[],totalPercentFees:0}),o0=t=>{if(t.type!=="SPL")return;let r=(t.data.mintExtensions??[]).find(o=>o.extension==="transferFeeConfig");if(r)return{caip19:Y($(t)),fungibleKey:t.data.key,symbol:t.data.symbol??"",name:t.data.name??"",percentFee:r.state.newerTransferFee.transferFeeBasisPoints/100}};i();a();var n0=t=>t.isGreaterThanOrEqualTo(1)?"0,0.[00]":"0,0.[00000]",Un=t=>{let e=q(t);return bg(t,n0(e))};var s0=5,i0=5,a0=50;function Qf(t,e,r,o){let{priceImpact:n,quoteSlippageTolerance:s}=c0(t),c=e.autoSlippage?s??r.slippageTolerance:r.slippageTolerance,u={type:"slippage",slippage:c,slippageType:e.autoSlippage?"auto":"fixed",alert:c&&c>=i0?"highSlippage":void 0},p={type:"priceImpact",priceImpactPercentage:u0(n),alert:n&&n.gte(s0)?"highPriceImpact":void 0,warning:n&&n.gte(a0)?"veryHighPriceImpact":void 0},d=[dT(t,e.buy,e.sell),u,p],g=js([e.sell,e.buy]);return g.fees.length>0&&d.push({type:"transferFees",transferFees:g.totalPercentFees,transferTokenSymbol:e.sell.data.symbol??"",alert:"transferFees"}),o&&d.push({type:"fees",quoteFees:o}),d}function c0(t){return Hr(t)?{priceImpact:t.priceImpact?q(t.priceImpact):q(0),quoteSlippageTolerance:t.slippageTolerance}:Ft(t)?{priceImpact:t.priceImpact?q(t.priceImpact):q(0),quoteSlippageTolerance:t.slippageTolerance}:jr(t)?{priceImpact:t.priceImpact?q(t.priceImpact):q(0),quoteSlippageTolerance:t.slippageTolerance}:{priceImpact:q(0),quoteSlippageTolerance:void 0}}function u0(t){return t.isZero()?"0%":`${t.toFixed(2)}%`}function dT(t,e,r){let{buyAmount:o,sellAmount:n}=t,s=new q(o).shiftedBy(-e.data.decimals).dividedBy(new q(n).shiftedBy(-r.data.decimals));return{type:"pricing",ratio:s,exchangeRate:`1 ${r.data.symbol} \u2248 ${Un(s)} ${e.data.symbol}`,exchangeRateFlipped:`1 ${e.data.symbol} \u2248 ${Un(q(1).dividedBy(s))} ${r.data.symbol}`}}i();a();var cp=class{queue=[];processing=!1;enqueue(e){this.queue.push(e),this.processNext()}clearQueue(){this.queue=[],this.processing=!1}async processNext(){if(this.processing||this.queue.length===0)return;this.processing=!0;let e=this.queue.shift();if(e)try{await e()}catch(r){console.error("Error processing task:",r)}this.processing=!1,this.processNext()}};i();a();var ua=class{constructor(e){this.entries=e;for(let r of e)r.alert&&this.alerts.push(r.alert),r.warning&&this.warnings.push(r.warning)}alerts=[];warnings=[]};i();a();var fT=(l=>(l.SwapperNoQuotes="SwapperNoQuotes",l.InsufficientSellAmount="InsufficientSellAmount",l.CrossChainUnavailable="CrossChainUnavailable",l.TokenNotTradable="TokenNotTradable",l.NotEnoughSuiObjects="NotEnoughSuiObjects",l.FromTokenIsHoneyPotToken="FromTokenIsHoneyPotToken",l.ToTokenIsHoneyPotToken="ToTokenIsHoneyPotToken",l.InsufficientLiquidity="InsufficientLiquidity",l.SwapInitializationFailed="SwapInitializationFailed",l))(fT||{}),pa=class t extends Error{name;type;constructor(e,r,o){super(r),this.name=e,this.type=o}static fromErrorResponse(e,r){return(n=>Object.values(fT).includes(n))(e)?new t(e,r,e):new t(e,r)}};var p0="swap-quotes",up=class{constructor(e,r){this.quoteStreamer=e;this.commandFactory=r}state={type:"idle"};listeners=[];swapTransactionQueue=new cp;start(e,r){this.setState({type:"starting",input:e,account:r}),this.quoteStreamer.subscribe(this.quoteStreamListener),this.quoteStreamer.openStream(e)}stop(){this.swapTransactionQueue.clearQueue(),this.setState({type:"idle"}),this.quoteStreamer.closeStream(),this.quoteStreamer.unsubscribe(this.quoteStreamListener)}quoteStreamListener={onEvent:e=>{switch(e.type){case"newQuoteResponse":switch(this.state.type){case"starting":let n=this.findPreferredQuote(this.state.input,e.quoteResponse);this.setState({type:"firstQuoteReceived",input:this.state.input,quote:n,response:e.quoteResponse,account:this.state.account,quoteDetails:new ua(Qf(n,this.state.input,e.quoteResponse))}),this.enqueueQuoteToProcess(this.state.input,e.quoteResponse,this.state.account);break;case"quoteProcessed":this.enqueueQuoteToProcess(this.state.input,e.quoteResponse,this.state.account,this.state.prevProcessedQuote);break}break;case"error":let r=pa.fromErrorResponse(e.errorResponse.name,e.errorResponse.message),o=new Ne({key:r.name});switch(U.addBreadcrumb(p0,JSON.stringify(r.name),"info"),this.state.type){case"starting":case"firstQuoteReceived":case"quoteProcessed":case"error":this.setState({type:"error",error:o,quoteError:r,account:this.state.account,input:this.state.input});break}break;case"openRequested":break;case"close":this.setState({type:"idle"});break}}};enqueueQuoteToProcess(e,r,o,n){this.swapTransactionQueue.enqueue(()=>this.processQuote(r,e,o,n))}async processQuote(e,r,o,n){try{let s=this.findPreferredQuote(r,e),u=await this.commandFactory.create(o,r,e).processQuote(s);switch(this.state.type){case"firstQuoteReceived":case"quoteProcessed":case"error":this.setState({type:"quoteProcessed",input:r,response:e,quote:s,prevProcessedQuote:n,nextProcessedQuote:u,account:o,quoteDetails:new ua(Qf(s,r,e,u.fees))});break}return u}catch(s){throw U.captureError(s,"swapper"),s}}subscribe(e){this.listeners.push(e)}unsubscribe(e){this.listeners=this.listeners.filter(r=>r!==e)}getState(){return this.state}findPreferredQuote(e,r){let o=e.preferredProvider;return o&&r.quotes.find(n=>n.baseProvider.id===o)||r.quotes[0]}setState(e){let r=this.state;this.state=e,this.listeners.forEach(o=>o.onStateChange(r,e))}};i();a();i();a();i();a();i();a();var Te=class extends Error{code;detailMessage;constructor(e,r){super(e),this.code=e,this.detailMessage=r}};var l0="slippageToleranceExceeded",m0="INSUFFICIENT_FUNDS",d0=Mg,f0="insufficient lamports",g0="lower balance than rent-exempt minimum",y0=Lg,S0="Transaction confirmation failed",h0=["Ledger App not open","Ledger not connected","Unable to connect to Ledger","Unable to connect to Ledger device","Need permission to connect to Ledger"],w0="Ledger user rejected action",b0="Ledger Sign Error";function A0(t){try{return Number(t.split('"Custom":')[1].split("}")[0])}catch{return null}}function v0(t){switch(A0(t.message)){case 301:return"slippageToleranceExceeded";case 6e3:return"EmptyRoute";case 6001:return"slippageToleranceExceeded";case 6002:return"InvalidCalculation";case 6003:return"MissingPlatformFeeAccount";case 6004:return"InvalidSlippage";case 6005:return"NotEnoughPercent";case 6006:return"InvalidInputIndex";case 6007:return"InvalidOutputIndex";case 6008:return"NotEnoughAccountKeys";case 6009:return"NonZeroMinimumOutAmountNotSupported";case 6010:return"InvalidRoutePlan";case 6011:return"InvalidReferralAuthority";case 6012:return"LedgerTokenAccountDoesNotMatch";case 6013:return"InvalidTokenLedger";case 6014:return"IncorrectTokenProgramID";case 6015:return"TokenProgramNotProvided";case 6016:return"SwapNotSupported";case 6017:return"ExactOutAmountNotMatched";case 6018:return"SourceAndDstinationMintCannotBeTheSame";default:return null}}function T0(t){return h0.some(r=>t.message.includes(r))?"LedgerConnectionError":t.message.includes(w0)?"LedgerRejectAction":t.message.includes(b0)?"LedgerUnknownSignError":t.message.toLowerCase().includes("ledger")?"LedgerUnknownError":null}function Bo(t){if(t===void 0)return new Te("UnknownError","No error provided");if(t instanceof Te)return t;let e=x0(t);if(e.message.includes(m0))return new Te("INSUFFICIENT_FUNDS");if(E0(e.message))return new Te("slippageToleranceExceeded");if(e.message==="Scan results are not valid")return new Te("Scan results are not valid");if([d0,f0,y0,g0].some(p=>e.message.includes(p)))return new Te("NotEnoughSol");let s=v0(e);if(s!==null)return new Te(s);if(e.message.includes(S0))return new Te("Transaction confirmation failed");let u=T0(e);return u!==null?new Te(u):new Te("UnknownError",e.message)}function x0(t){return typeof t=="string"?new Error(t):typeof t=="object"&&"logs"in t&&t.logs?.length?new Error(t.logs.join(`
`)):t}function E0(t){return t.includes(l0)}i();a();i();a();var gT=3;function pp(){try{let t=Qe.getMultivariateAssignment("swapper-high-slippage-threshold"),e=Number(t);return!t||isNaN(e)?gT:e}catch{return gT}}var yT=({currentQuote:t,quoteResponse:e,gasEstimation:r,swapTransactions:o,scanResults:n,isSwapSimulationDisabled:s,slippageTolerance:c})=>{if(!t)throw new Te("Trying to execute swap with no current quote");if(!e)throw new Te("Trying to execute swap with no quote response");if(I.isEVMNetworkID(e.sellToken.chainId)&&(!r||r?.length===0||r?.length<(o?.transactions.length??1)))throw new Te("No gas estimation available");if(!o)throw new Te("No swap transactions available");if(n.state!=="valid"&&(U.addBreadcrumb("swapper","swapSimulationNotValid","info",ao({scanResults:n.state})),!s)){let p=["Scan results are not valid","AccountFrozen","INSUFFICIENT_FUNDS","INSUFFICIENT_GAS","slippageToleranceExceeded","SIMULATION_TIMEOUT","MissingArgument","STALE_QUOTE","SimulationUnknownError"];if(P0(n.state)&&p.includes(n.state.code)){if(I0(n.state,c))return;throw n.state}else throw new Te("Scan results are not valid")}};function I0(t,e){return t.code==="slippageToleranceExceeded"&&e&&e>=pp()}function P0(t){return t instanceof Te}var F0={swap:{solana:"executeSolanaSwap",evm:"executeEvmSwap",sui:"executeSuiSwap"},bridge:{solana:"executeSolanaBridge",evm:"executeEvmBridge",sui:"executeSuiBridge"}},Uf=(t,e)=>F0[t?"bridge":"swap"][e??"solana"],ST=async({isBridge:t,addressType:e,isSwapSimulationDisabled:r,sender:o,currentQuote:n,quoteResponse:s,gasEstimation:c,swapTransactions:u,scanResults:p,pendingActivityRows:l,connection:d,logSwapFailureNoSignature:g,logTransactionSubmitted:y,onTransactionReceiptReceived:S,onTransactionSubmissionError:h,resetToInitialState:w,slippageTolerance:b,swapFungibles:T})=>{await U.startSpan({name:Uf(t,u?.type)},async()=>{w();let v;try{yT({currentQuote:n,quoteResponse:s,gasEstimation:c,swapTransactions:u,scanResults:p,isSwapSimulationDisabled:r,slippageTolerance:b});let P=await T({type:e,callerAddress:o,swapTransactions:u,pendingSwapActivityRows:l.pendingSwapActivityRows,pendingApprovalActivityRows:l.pendingApprovalActivityRows,gasEstimation:c,connection:d});if(S(P),P.error)throw P.id||g(),v=P.id,P.error;y(P)}catch(P){let C=Bo(P);h(C,v)}})};i();a();i();a();i();a();i();a();var ro=(p=>(p.SlippageExceeded="SLIPPAGE_EXCEEDED",p.InsufficientFunds="INSUFFICIENT_FUNDS",p.InsufficientGas="INSUFFICIENT_GAS",p.AccountFrozen="ACCOUNT_FROZEN",p.SimulationTimeout="SIMULATION_TIMEOUT",p.StaleQuote="STALE_QUOTE",p.UnknownError="UNKNOWN_ERROR",p.SimulationFailed="SIMULATION_FAILED",p))(ro||{}),zs=class t extends Error{constructor(r,o,n){super(r);this.scannedTransactionResult=o;this.type=n;o&&(this.detailMessage=o.simulationError?.humanReadableError??(o.warnings.length>0?o.warnings[0].message:void 0)),this.type=n}detailMessage;static fromError(r){return r instanceof t?r:new t(r.message)}static fromScannedTransactionResult(r,o){return(s=>Object.values(ro).includes(s))(r)?new t(r,o,r):new t(r,o)}};i();a();var Ln=class t extends Error{constructor(r,o){super(r);this.type=o}static fromError(r){return new t(r.message)}static fromType(r){return new t(r,r)}};var hT="https://phantom.com",lp=class{constructor(e,r,o){this.swapCommand=e;this.send=r;this.executingQuote=o;this.takerAddress=e.takerAddress,this.networkId=e.networkId,this.quote=e.quote,this.executionId=e.executionId}takerAddress;networkId;quote;executionId;createTransaction(){return this.send({type:"executeSwapStarted",executionId:this.executionId,executingQuote:this.executingQuote}),this.swapCommand.createTransaction()}async simulate(e,r,o){try{this.send({type:"simulationRequestStarted",executionId:this.executionId,executingQuote:this.executingQuote,networkId:this.networkId});let n,s=Ge(R.language)??"en";switch(I.isSuiNetworkID(this.networkId)?n={type:"transaction",expectedChanges:[],warnings:[],advancedDetails:void 0,error:void 0,simulationError:void 0,block:void 0}:n=await rp({transactions:e,locale:s,url:hT,deviceId:o,takerAddress:this.takerAddress,networkId:this.networkId,slippageType:this.executingQuote.slippageType,quote:this.quote,quoteResponse:this.executingQuote.response}),n.error){case void 0:break;case"SIMULATION_FAILED":break;case"SLIPPAGE_EXCEEDED":if(this.executingQuote.response.slippageTolerance>=pp())break;default:throw zs.fromScannedTransactionResult(n.error,n)}return this.send({type:"simulationPassed",scannedTransactionResult:n,executionId:this.executionId,networkId:this.networkId}),n}catch(n){throw this.send({type:"simulationFailed",error:zs.fromError(n),executionId:this.executionId,networkId:this.networkId,url:hT}),n}}async swap(e,r,o,n,s){this.send({type:"transactionSubmissionStarted",executionId:this.executionId});try{let c=await this.swapCommand.swap(e,r,o,n,s);if(!c.id)throw Ln.fromType("noSignature");return this.send({type:"transactionSubmissionSuccess",txReceipt:c,executionId:this.executionId}),c}catch(c){let u=c instanceof Ln?c:Ln.fromError(c);throw this.send({type:"transactionSubmissionFailed",error:u,executionId:this.executionId}),u}}async waitForConfirmation(e){this.send({type:"transactionConfirmationStarted",executionId:this.executionId,txReceipt:e});try{let r=await this.swapCommand.waitForConfirmation(e);return this.send({type:"transactionConfirmed",executionId:this.executionId,txReceipt:e}),r}catch(r){throw this.send({type:"transactionConfirmationFailed",error:r,txReceipt:e,executionId:this.executionId}),r}}};i();a();i();a();var Lf=class extends Error{constructor(e,r){super(`Can't transition to ${r} from ${e.type}`)}},mp=class{state=new Map;listeners=new Set;send(e){e.type==="executeSwapStarted"&&this.state.set(e.executionId,{type:"idle",executingQuote:e.executingQuote});let r=this.state.get(e.executionId);if(!r)throw new Error(`No previous state found for execution id: ${e.executionId}`);let o=r;try{return o=this.detectNextState(r,e),o.type==="transactionConfirmed"?this.state.delete(e.executionId):this.state.set(e.executionId,o),o}catch{return r}finally{this.notifyListeners(e,r,o,this.state)}}notifyListeners(e,r,o,n){try{this.listeners.forEach(s=>s.onStateChange(e,r,o,n))}catch{}}getState(){return this.state}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}detectNextState(e,r){switch(r.type){case"executeSwapStarted":return Tr(e,"idle"),{type:"started",executingQuote:r.executingQuote};case"simulationRequestStarted":return Tr(e,"started"),{type:"simulating",executingQuote:e.executingQuote};case"simulationPassed":return Tr(e,"simulating"),{type:"simulated",scannedTransactionResult:r.scannedTransactionResult,executingQuote:e.executingQuote};case"simulationFailed":return Tr(e,"simulating"),{type:"simulationFailed",error:r.error,executingQuote:e.executingQuote};case"transactionSubmissionStarted":return Tr(e,"simulated"),{type:"submittingTransaction",executingQuote:e.executingQuote,scannedTransactionResult:e.scannedTransactionResult};case"transactionSubmissionFailed":return Tr(e,"submittingTransaction"),{type:"transactionSubmissionFailed",error:r.error,executingQuote:e.executingQuote,scannedTransactionResult:e.scannedTransactionResult};case"transactionSubmissionSuccess":return Tr(e,"submittingTransaction"),{type:"transactionSubmitted",txReceipt:r.txReceipt,executingQuote:e.executingQuote,scannedTransactionResult:e.scannedTransactionResult};case"transactionConfirmationStarted":return Tr(e,"transactionSubmitted"),{type:"confirmingTransaction",txReceipt:e.txReceipt,scannedTransactionResult:e.scannedTransactionResult,executingQuote:e.executingQuote};case"transactionConfirmationFailed":return Tr(e,"transactionSubmitted"),{type:"transactionNotConfirmed",txReceipt:e.txReceipt,scannedTransactionResult:e.scannedTransactionResult,error:r.error,executingQuote:e.executingQuote};case"transactionConfirmed":return Tr(e,"confirmingTransaction"),{type:"transactionConfirmed",txReceipt:e.txReceipt,scannedTransactionResult:e.scannedTransactionResult,executingQuote:e.executingQuote}}}};function Tr(t,e){if(t.type!==e)throw new Lf(t,e)}i();a();function wT(t){return t.type==="quote"}i();a();i();a();var k0={"Could not find any routes":"noRoute"},dp=class t extends Error{type;constructor(e,r){super(r??e),this.type=e}static fromMessage(e){let r=e?k0[e]??"undefinedError":"undefinedError";return new t(r,e)}};var Mn=class extends Error{constructor(e,r){super(`Can't transition to ${r} from ${e.type}`)}},fp=class{state;listeners=new Set;constructor(e){this.state=e??{type:"idle"}}send(e){let r=this.state;try{return r=this.detectNextState(this.state,e),this.state=r,r}catch{return this.state}finally{this.notifyListeners(e,this.state,r)}}getState(){return this.state}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(e,r,o){try{this.listeners.forEach(n=>n.onStateChange(e,r,o))}catch{}}detectNextState(e,r){switch(r.type){case"setPair":return{type:"pair",buy:r.buy,sell:r.sell,amount:r.amount};case"quoteRequestStarted":switch(e.type){case"pair":case"quote":case"quoteError":return{type:"fetchingQuote",buy:e.buy,sell:e.sell,amount:r.amount,slippageType:r.slippageType};default:throw new Mn(e,r.type)}case"quoteRequestError":if(e.type!=="fetchingQuote")throw new Mn(e,r.type);return{type:"quoteError",buy:e.buy,sell:e.sell,amount:e.amount,error:r.error,slippageType:e.slippageType};case"quoteResponseReceived":if(e.type!=="fetchingQuote")throw new Mn(e,r.type);let o=r.response.quotes[0];return o?{type:"quote",response:r.response,buy:e.buy,sell:e.sell,quote:o,amount:e.amount,slippageType:e.slippageType}:{type:"quoteError",buy:e.buy,sell:e.sell,amount:e.amount,error:new dp("noRoute"),slippageType:e.slippageType};case"quoteResponseStreamed":switch(e.type){case"pair":case"fetchingQuote":case"quote":case"quoteError":return{type:"quote",response:r.response,buy:e.buy,sell:e.sell,quote:r.quote,amount:{amount:r.quoteInput.amount,perspective:r.quoteInput.exactOut?"buy":"sell"},slippageType:r.quoteInput.autoSlippage?"auto":"fixed"};default:throw new Mn(e,r.type)}case"userSelectedQuote":if(e.type!=="quote")throw new Mn(e,r.type);return{type:"quote",quote:r.quote,buy:e.buy,sell:e.sell,response:e.response,amount:e.amount,slippageType:e.slippageType}}}};i();a();i();a();var On=class t extends Error{constructor(r,o){super(o??r.name);this.type=r}static fromError(r){return new t({name:"unknown"},r.message)}};function AT(t){switch(t.type){case"buy":return qo(t.buyCaip19).chainId;case"sell":return qo(t.sellCaip19).chainId;case"swap":return t.network}}var gp=class{async initialize(e,r){let o=await X.api().headers({"Content-Type":"application/json"}).timeout(J({seconds:20})).post("/swap/v2/initialize",{...e,address:r.address});if(o.status!==200)throw new Ne({key:"SwapInitializationFailed"});if(e.type==="buy"&&"buyToken"in o.data&&!("sellToken"in o.data))throw new On({name:"insufficientFunds",buyToken:o.data.buyToken});return await o.data}};i();a();var yp=class{state={type:"idle"};eventListeners=[];send(e){let r=this.state,o=this.detectNextState(e);this.state=o,this.eventListeners.forEach(n=>n.onStateChange(e,r,o))}detectNextState(e){switch(e.type){case"initializeStarted":return{type:"initializing",mode:e.mode};case"initializeCompleted":if(this.state.type==="initializing")return{type:"pair",mode:this.state.mode,sellToken:e.result.sellToken,buyToken:e.result.buyToken,sellTokenPrice:e.result.sellTokenPrice,buyTokenPrice:e.result.buyTokenPrice,warnings:Gs(e.result.buyToken)};throw new Error("Invalid state");case"initializeFailed":if(this.state.type!=="initializing")throw new Error("Invalid state");return{type:"error",error:e.error};case"switchTokens":if(this.state.type!=="pair")throw new Error("Invalid state");return{type:"pair",mode:this.state.mode,sellToken:this.state.buyToken,buyToken:this.state.sellToken,sellTokenPrice:this.state.buyTokenPrice,buyTokenPrice:this.state.sellTokenPrice,warnings:Gs(this.state.buyToken)};case"changeToken":if(this.state.type!=="pair")throw new Error("Invalid state");return{type:"pair",mode:this.state.mode,sellToken:e.perspective==="sell"?e.token:this.state.sellToken,buyToken:e.perspective==="buy"?e.token:this.state.buyToken,sellTokenPrice:e.sellTokenPrice??this.state.buyTokenPrice,buyTokenPrice:e.buyTokenPrice??this.state.sellTokenPrice,warnings:Gs(this.state.buyToken)}}}getState(){return this.state}subscribe(e){this.eventListeners.push(e)}unsubscribe(e){this.eventListeners=this.eventListeners.filter(r=>r!==e)}};var ma=class{constructor(e,r,o,n){this.apiClient=e;this.swapCommandFactory=r;this.quoteProcessor=o;this.account=n,this.quoteProcessor.subscribe(this.quoteProcessorListener),this.tokenStateMachine.subscribe(this.tokenStateListener)}stateMachine=new fp;executeSwapStateMachine=new mp;account;config={slippageType:"auto",slippageTolerance:1.3};swapInitializer=new gp;tokenStateMachine=new yp;accountChangeListeners=[];tokenStateListener={onStateChange:(e,r,o)=>{if(o.type==="pair"&&(this.setPair(o.buyToken,o.sellToken,{amount:"0",perspective:"sell"}),e.type==="changeToken")){let n=this.getLastQuoteProcessorSwapAmount();if(!n)return;this.setAmount(n)}}};initializeSwap(e){let r=AT(e),o=this.checkChainAddress(r);this.tokenStateMachine.send({type:"initializeStarted",mode:e}),this.swapInitializer.initialize(e,o).then(n=>{this.tokenStateMachine.send({type:"initializeCompleted",result:n})}).catch(n=>{U.captureError(n,"swapper"),n instanceof On?this.tokenStateMachine.send({type:"initializeFailed",error:n}):this.tokenStateMachine.send({type:"initializeFailed",error:On.fromError(n)})})}getTokenState(){return this.tokenStateMachine.getState()}subscribeToken(e){return this.tokenStateMachine.subscribe(e),()=>this.unsubscribeToken(e)}unsubscribeToken(e){this.tokenStateMachine.unsubscribe(e)}quoteProcessorListener={onStateChange:(e,r)=>{(r.type==="firstQuoteReceived"||r.type==="quoteProcessed")&&this.send({type:"quoteResponseStreamed",response:r.response,quoteInput:r.input,quote:r.quote})}};isValidAmount(e){try{let r=new q(e);return r.isFinite()?!r.isNegative():!1}catch{return!1}}setAmount(e,r){let{amount:o}=e;if(o===""&&(o="0"),!this.isValidAmount(o))return;this.quoteProcessor.stop();let n=this.checkAccount(),s=this.getState(),c={...this.config,...r};switch(s.type){case"pair":case"quote":case"quoteError":if(o==="0"||o===""){this.send({type:"setPair",buy:s.buy,sell:s.sell,amount:e});return}let u=this.checkChainAddress(s.sell.data.chain.id),p=this.checkChainAddress(s.buy.data.chain.id),l={chainId:u.networkID,resourceType:"address",address:u.address},d={chainId:p.networkID,resourceType:"address",address:p.address};try{let g={amount:new q(e.amount).shiftedBy(e.perspective==="buy"?s.buy.data.decimals:s.sell.data.decimals).toString(),buy:s.buy,sell:s.sell,taker:Y(l),takerDestination:Y(d),slippageTolerance:c.slippageTolerance,autoSlippage:c.slippageType==="auto",exactOut:e.perspective==="buy",priorityFee:c.priorityFee,preferredProvider:c.preferredProvider,clientEnableGaslessSwap:c.gasslessEnabled};this.quoteProcessor.start(g,n)}catch(g){console.error("Error when streaming quotes",g)}break}}setPair(e,r,o){this.send({type:"setPair",buy:e,sell:r,amount:o})}switchTokens(){this.tokenStateMachine.send({type:"switchTokens"})}setAccount(e){this.account=e,this.accountChangeListeners.forEach(r=>r.onAccountChange(e))}getAccount(){return this.account}async fetchQuotes({amount:e,buy:r,sell:o,slippageTolerance:n,autoSlippageEnabled:s,priorityFee:c,signal:u}){let p=$(o),l=$(r),d=e.perspective==="buy",g=new q(e.amount).shiftedBy(e.perspective==="buy"?r.data.decimals:o.data.decimals).toString();this.send({type:"quoteRequestStarted",amount:e,slippageType:s?"auto":"fixed"});let y=this.checkChainAddress(o.data.chain.id),S={chainId:y.networkID,resourceType:"address",address:y.address},h;if(Oe(o.data.chain.id,r.data.chain.id)){let w=this.checkChainAddress(r.data.chain.id);h={chainId:w.networkID,resourceType:"address",address:w.address}}try{let w=await this.apiClient.getQuotes({sell:p,buy:l,amount:g,taker:S,takerDestination:h,slippageTolerance:n??0,autoSlippageEnabled:s,exactOutEnabled:d,priorityFee:c,signal:u});return this.send({type:"quoteResponseReceived",response:w}),w}catch(w){throw this.send({type:"quoteRequestError",error:w}),w}}async swap(e,r,o,n,s,c){let u=this.getState();if(!wT(u))throw new Error(`Can't swap from ${u.type}`);this.quoteProcessor.stop();let p=this.checkAccount(),l=this.checkChainAddress(u.sell.data.chain.id),d={account:p,buy:u.buy,sell:u.sell,amount:u.amount,quote:u.quote,response:u.response,slippageType:u.slippageType},g=this.swapCommandFactory.create(d,l.address,l.networkID,s,c),y=new lp(g,h=>this.executeSwapStateMachine.send(h),d),S=await y.createTransaction();await U.startSpan({name:Uf(de(u.quote),S.type)},async()=>{let h=await y.simulate(S,o,n),w=await y.swap(p.identifier,S,h,e,r);await y.waitForConfirmation(w)})}changeToken(e,r){let o=this.getTokenState();if(o.type!=="pair")return;let n=r==="buy"?e:o.buyToken,s=r==="sell"?e:o.sellToken;Ka({tokens:[$(n),$(s)]}).then(c=>{let u=c[Y($(n))],p=c[Y($(s))];this.tokenStateMachine.send({type:"changeToken",token:e,perspective:r,buyTokenPrice:u,sellTokenPrice:p})})}selectQuote(e){this.send({type:"userSelectedQuote",quote:e})}setQuoteConfig(e){this.config={...this.config,...e},this.refreshQuoteProcessor()}refreshQuoteProcessor(){let e=this.getLastQuoteProcessorSwapAmount();e&&this.setAmount(e)}getLastQuoteProcessorSwapAmount(){let e=this.getQuoteProcessorState();switch(e.type){case"starting":case"firstQuoteReceived":case"quoteProcessed":case"error":let r=e.input;return{amount:new q(r.amount).shiftedBy(-1*(r.exactOut?r.buy.data.decimals:r.sell.data.decimals)).toString(),perspective:r.exactOut?"buy":"sell"};default:return}}getState(){return this.stateMachine.getState()}getExecuteState(){return this.executeSwapStateMachine.getState()}stopProcessingQuotes(){this.quoteProcessor.stop()}subscribeExecution(e){return this.executeSwapStateMachine.addListener(e),()=>this.unsubscribeExecution(e)}unsubscribeExecution(e){this.executeSwapStateMachine.removeListener(e)}getQuoteProcessorState(){return this.quoteProcessor.getState()}subscribeQuoteProcessor(e){return this.quoteProcessor.subscribe(e),()=>this.unsubscribeQuoteProcessor(e)}unsubscribeQuoteProcessor(e){this.quoteProcessor.unsubscribe(e)}stopQuoteProcessor(){this.quoteProcessor.stop()}subscribeAccountChange(e){return this.accountChangeListeners.push(e),()=>this.unsubscribeAccountChange(e)}unsubscribeAccountChange(e){this.accountChangeListeners=this.accountChangeListeners.filter(r=>r!==e)}send(e){return this.stateMachine.send(e)}checkAccount(){if(!this.account)throw new Error("Must set a MultiChainAccount");return this.account}checkChainAddress(e){let o=this.checkAccount().addresses.find(n=>n.networkID===e);if(!o)throw new Error(`No address found for chain ${e}`);return Ra(o)&&(o.address=o.address.toLowerCase()),o}};var vT=(0,xr.createContext)(null);function D0({children:t,processorMode:e="noOp"}){let{data:r}=he(),o=(0,xr.useMemo)(()=>_0(e),[e]);return(0,xr.useEffect)(()=>{r&&o.setAccount(r)},[r,o]),xr.default.createElement(vT.Provider,{value:o},t)}function Rt(){let t=(0,xr.useContext)(vT);if(!t)throw new Error("useSwapper must be used within a SwapperProvider");return t}function _0(t){return new ma(new Ku,new Yu,new up(new tp(ot?new ep:new Ju),t==="noOp"?new ap:new ip))}i();a();i();a();var Sp=k(D());i();a();i();a();i();a();var B0=k(D());i();a();var N0=k(D());i();a();var Mf=Re(t=>({preferredProvider:void 0,setPreferredProvider:e=>t({preferredProvider:e})}));i();a();var Q0=k(D());i();a();var TT=k(D());i();a();i();a();var Of=k(D());i();a();var oo=t=>t&&de(t)?t.executionDuration:0;i();a();var Gt=k(D());i();a();i();a();i();a();i();a();function hp({buyAssetUsdValue:t,buyToken:e,sellAssetUsdValue:r,sellToken:o,buyAmount:n,sellAmount:s,phantomFeeUiAmount:c,priceImpact:u,provider:p,baseProvider:l,slippageTolerance:d,transactionId:g,slippageType:y,sellSwapFilter:S,isRetry:h,analyticsContext:w}){let b=mA({buyAssetUsdValue:t,buyToken:e,sellAssetUsdValue:r,sellToken:o,buyAmount:n,sellAmount:s,phantomFeeUiAmount:c,priceImpact:u,provider:p,baseProvider:l,slippageTolerance:d,slippageType:y,sellSwapFilter:S,isRetry:h,analyticsContext:w});return b?{data:{...b,id:g}}:{}}i();a();var wp=({txReceipt:t,networkID:e,amountType:r,swapAnalytics:o})=>{let n=co(e);U.addBreadcrumb("swapper","submittedTransaction","info",{...n,txReceipt:t.id,method:n.chainType==="solana"?"signAndSendTransaction":n.chainType==="eip155"?"eth_sendRawTransaction":n.chainType==="sui"?"signAndExecuteTransaction":"UNKNOWN"}),n.chainType==="solana"?o.submittedTransaction(t.id,{...n,method:"signAndSendTransaction",swapType:r==="sell"?"exactIn":"exactOut"}):n.chainType==="eip155"?o.submittedTransaction(t.id,{...n,method:"eth_sendRawTransaction",swapType:r==="sell"?"exactIn":"exactOut"}):n.chainType==="sui"&&o.submittedTransaction(t.id,{...n,method:"signAndExecuteTransaction",swapType:r==="sell"?"exactIn":"exactOut"})};i();a();var Uo=t=>t?de(t)?void 0:t.priceImpact:0;i();a();var xT=Re(t=>({lastFailedSwap:void 0,setLastFailedSwap:e=>{t({lastFailedSwap:e})}}));function ET(){return xT.getState().lastFailedSwap}function qf(t){xT.getState().setLastFailedSwap(t)}var da=class{constructor(e,r,o="swapperClassic"){this.swapAnalytics=e;this.analytics=r;this.uiContext=o}onStateChange(e,r,o,n){switch(e.type){case"executeSwapStarted":this.analytics.capture("swapperSwap",{data:{uiContext:this.uiContext}});let s=Zi({buyAssetUsdValue:o.executingQuote.buy.data.usd,buyToken:o.executingQuote.buy,sellAssetUsdValue:o.executingQuote.sell.data.usd,sellToken:o.executingQuote.sell,quote:o.executingQuote.quote,slippageTolerance:this.parseSlippageTolerance(o.executingQuote.slippageType,o.executingQuote.quote,o.executingQuote.response),slippageType:o.executingQuote.slippageType,sellSwapFilter:A.getState().swapFilter,isRetry:this.isRetry(o.executingQuote),analyticsContext:o.executingQuote.quote.analyticsContext,baseProvider:o.executingQuote.quote.baseProvider?.id??""});s&&(U.addBreadcrumb("swapper","approved","info",ao(s.swap)),this.swapAnalytics.approved(s));break;case"simulationFailed":e.error.type!=="SLIPPAGE_EXCEEDED"&&U.captureError(e.error,"swapper"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(o.executingQuote).data,error:L0(e.error)}});break;case"transactionSubmissionFailed":U.captureError(e.error,"swapper"),e.error.type==="noSignature"&&this.analytics.capture("swapperSwapFailureNoSignature"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(o.executingQuote).data,error:e.error.message,uiContext:this.uiContext}});break;case"transactionSubmissionSuccess":wp({txReceipt:e.txReceipt,networkID:e.txReceipt.networkID,amountType:o.executingQuote.amount.perspective==="buy"?"buy":"sell",swapAnalytics:this.swapAnalytics});break;case"transactionConfirmationFailed":let c=Bo(e.error);U.captureError(e.error,"swapper"),this.analytics.capture("swapperSwapFailure",{data:{...this.createAnalyticsPayload(o.executingQuote).data,error:c.message,uiContext:this.uiContext}});let u=co(e.txReceipt.networkID),p={chainId:I.getChainID(e.txReceipt.networkID),networkId:e.txReceipt.networkID},l=e.txReceipt;switch(this.analytics.capture("waitForTransactionConfirmationError",{data:{...p,errorMessage:c.message}}),u.chainType){case"eip155":case"solana":case"sui":U.addBreadcrumb("swapper","transactionStatus","error",{...u,txReceipt:l.id}),this.swapAnalytics.transactionStatus(l.id,{...u,status:{type:"error"}});break}break;case"transactionConfirmed":this.analytics.capture("swapperSwapSuccess",{data:{...this.createAnalyticsPayload(o.executingQuote,e.txReceipt).data,uiContext:this.uiContext}});let d=co(e.txReceipt.networkID);switch(U.addBreadcrumb("swapper","transactionStatus","info",{...d,txReceipt:e.txReceipt.id}),d.chainType){case"eip155":case"solana":case"sui":this.swapAnalytics.transactionStatus(e.txReceipt.id,{...d,status:{type:"confirmed"}});break}break}this.isFailureEvent(e)?qf(o.executingQuote):e.type==="transactionSubmissionSuccess"&&qf(void 0)}createAnalyticsPayload(e,r){let o=e.quote,n=A.getState();return hp({buyToken:e.buy,sellToken:e.sell,buyAmount:o.buyAmount.toString(),sellAmount:o.sellAmount.toString(),phantomFeeUiAmount:Zd(o).amountUsd?.toString()??"",priceImpact:Uo(o),provider:_e(Me(o)),buyAssetUsdValue:n.buyUsdValue,sellAssetUsdValue:n.sellUsdValue,slippageTolerance:this.parseSlippageTolerance(e.slippageType,o,e.response),transactionId:r?.id??"",slippageType:e.slippageType,sellSwapFilter:n.swapFilter,isRetry:this.isRetry(e),analyticsContext:e.quote.analyticsContext,baseProvider:e.quote.baseProvider?.id??""})}parseSlippageTolerance(e,r,o){switch(e){case"fixed":return o.slippageTolerance;case"auto":return yr(r)?r.slippageTolerance:o.slippageTolerance}}isRetry(e){let r=ET();if(!r)return!1;let o=Y($(r.buy)),n=Y($(r.sell)),s=Y($(e.buy)),c=Y($(e.sell));return o===s&&n===c}isFailureEvent(e){switch(e.type){case"simulationFailed":case"transactionSubmissionFailed":case"transactionConfirmationFailed":return!0;default:return!1}}};function L0(t){switch(t.type){case"SLIPPAGE_EXCEEDED":return"slippageToleranceExceeded";case"INSUFFICIENT_FUNDS":return"INSUFFICIENT_FUNDS";case"INSUFFICIENT_GAS":return"INSUFFICIENT_GAS";case"ACCOUNT_FROZEN":return"AccountFrozen";case"STALE_QUOTE":return"STALE_QUOTE";case"SIMULATION_TIMEOUT":return"SIMULATION_TIMEOUT";case"UNKNOWN_ERROR":return"SimulationUnknownError";case"SIMULATION_FAILED":return"SIMULATION_FAILED";default:return"Scan results are not valid"}}i();a();var fa=class{constructor(e){this.queryClient=e}onStateChange(e,r,o,n){let{sell:s,quote:c,account:u}=o.executingQuote;if(e.type==="transactionConfirmed"){let p=new j(s.data.amount),l=new j(c.sellAmount),d=p.minus(l).toString();Fu(this.queryClient,{id:Os(s),amount:d}),this.queryClient.invalidateQueries({queryKey:sy.tokens(u.addresses)})}}};i();a();var M0="swap-validation",ga=class{simulationAnalytics;constructor(e){this.simulationAnalytics=new an(e)}onStateChange(e,r,o){switch(e.type){case"simulationPassed":let n=e.scannedTransactionResult;this.simulationAnalytics.onScannedTransactionByUser({networkId:e.networkId,warnings:n.warnings.map(c=>c.severity),shouldBlock:!!n.block,errorCode:n.error??""});break;case"simulationFailed":let s=e.error.scannedTransactionResult;if(s){this.simulationAnalytics.onScannedTransactionByUser({networkId:e.networkId,warnings:s.warnings.map(c=>c.severity),shouldBlock:!!s.block,errorCode:s.error??""}),s?.error&&U.addBreadcrumb(M0,`Simulation error: ${JSON.stringify({error:s.error})}`,"info");return}this.simulationAnalytics.onFailedScannedTransactionByUser({networkId:e.networkId,url:e.url}),U.addBreadcrumb("simulation",`networkID: ${e.networkId}, url: ${e.url}, type: transaction`,"info");break}}};i();a();var ya=class{onStateChange(e,r,o,n){let s=this.toLegacyTransition(e,o);s&&ru(s.nextState,s.event)}toLegacyTransition(e,r){let{buy:o,sell:n,quote:s,response:c}=r.executingQuote;switch(e.type){case"simulationFailed":return{event:{type:"simulationRequestError",error:e.error},nextState:{type:"simulationFailed",buy:o,sell:n,response:c,quote:s,scannedTransactionResult:e.error.scannedTransactionResult,simulationError:e.error.message}};case"transactionSubmissionFailed":return{event:{type:"transactionSubmissionFailed",error:e.error},nextState:{type:"transactionSubmissionFailed",buy:o,sell:n,response:c,quote:s,error:e.error}};case"transactionConfirmationFailed":return{event:{type:"transactionConfirmationFailed",error:e.error,txReceipt:e.txReceipt},nextState:{type:"transactionNotConfirmed",buy:o,sell:n,response:c,quote:s,error:e.error,txReceipt:e.txReceipt}};default:return}}};i();a();i();a();var Sa=t=>{let e=oo(t);return Mt(e)};i();a();i();a();var q0=3e3,vt=Re(t=>({toast:void 0,toastId:void 0,visible:!1,currentTimer:null,hideToast(e){t(r=>e&&r.toastId!==e?r:(r.currentTimer&&clearTimeout(r.currentTimer),{visible:!1,currentTimer:null}))},removeToast(){t(e=>(e.currentTimer&&clearTimeout(e.currentTimer),{toast:void 0,toastId:void 0,visible:!1,currentTimer:null}))},success(e){t(r=>{r.currentTimer&&clearTimeout(r.currentTimer);let o=setTimeout(()=>{t({visible:!1,currentTimer:null})},q0);return{toast:{type:"Success",...e},toastId:e.id??gt(),visible:!0,currentTimer:o}})},failed(e){t(r=>(r.currentTimer&&clearTimeout(r.currentTimer),{toast:{type:"Failed",...e},toastId:e.id??gt(),visible:!0,currentTimer:null}))},progress(e){t(r=>(r.currentTimer&&clearTimeout(r.currentTimer),{toast:{type:"Progress",...e},toastId:e.id??gt(),visible:!0,currentTimer:null}))},message(e){t(r=>(r.currentTimer&&clearTimeout(r.currentTimer),{toast:{type:"Default",...e},toastId:e.id??gt(),visible:!0,currentTimer:null}))}}));i();a();i();a();function IT({sell:t,buy:e,onBuyFungiblePress:r}){let o=`${R.t("swapTxConfirmationSwapFailed")} ${t.data.symbol} \u2192 ${e.data.symbol}`,n=I.getChainDefinition(t.data.chain.id).tokenSymbol,s=R.t("buyAssetInterpolated",{tokenSymbol:n});return{title:o,message:R.t("swapTabInsufficientFunds"),onPress:r,buttonText:s}}i();a();function PT(t){switch(t.type){case"SLIPPAGE_EXCEEDED":return R.t("swapTxConfirmationSwapFailedSlippageLimit");case"INSUFFICIENT_FUNDS":return R.t("swapTxConfirmationSwapFailedInsufficientBalance");case"INSUFFICIENT_GAS":return R.t("swapTxConfirmationSwapFailedInsufficientGas");case"ACCOUNT_FROZEN":return R.t("swapTxConfirmationSwapFailedAcountFrozen");case"SIMULATION_TIMEOUT":return R.t("swapTxConfirmationSwapFailedSimulationTimeout");case"STALE_QUOTE":return R.t("swapTxConfirmationSwapFailedStaleQuote");case"UNKNOWN_ERROR":return R.t("swapTxConfirmationSwapFailedSimulationUnknownError");default:return R.t("swapTxConfirmationSwapFailedTryAgain")}}function FT(t,e,r,o,n,s){let{sell:c,buy:u}=e,p=V0(t,c,u,n,o,r,s);return p||{title:`${R.t("swapTxConfirmationSwapFailed")} ${c.data.symbol} \u2192 ${u.data.symbol}`,message:PT(t),onPress:()=>{vt.getState().hideToast(),o()},buttonText:R.t("commandRetry")}}function V0(t,e,r,o,n,s,c){if(!(t.type&&!c.includes(t.type)))switch(t.type){case"INSUFFICIENT_FUNDS":return IT({sell:e,buy:r,onBuyFungiblePress:()=>{vt.getState().hideToast(),s()}});case"SLIPPAGE_EXCEEDED":return o.selectedSetting.type==="auto"?void 0:{title:R.t("swapEnableAutoSlippageTitleToast",{sellSymbol:e.data.symbol,buySymbol:r.data.symbol}),buttonText:R.t("swapEnableAutoSlippageButtonToast"),message:"",onPress:()=>{o.setSlippageSetting({type:"auto"}),n(),vt.getState().hideToast()}}}}var ha=class{constructor(e,r,o,n,s,c=$0){this.showFungibleDetails=e;this.showBuyFungibleScreen=r;this.slippageSettings=o;this.supportedCustomSimulationToastErrorTypes=n;this.retryAndNavigateToSwapper=s;this.toastMessageParser=c}onStateChange(e,r,o,n){let{sell:s,buy:c,quote:u}=o.executingQuote;switch(e.type){case"executeSwapStarted":G0(de(u)?R.t("swapInitiatingBridgeToast",{sellSymbol:s.data.symbol,sellChain:s.data.chain.name,buySymbol:c.data.symbol,buyChain:c.data.chain.name}):R.t("swapSwappingToast",{sellSymbol:s.data.symbol,buySymbol:c.data.symbol}));break;case"transactionConfirmed":K0(this.toastMessageParser.parseTransactionConfirmed(s,c,u),()=>this.showFungibleDetails(c));break;case"simulationFailed":CT(FT(e.error,o.executingQuote,this.showBuyFungibleScreen,()=>this.handleRetryPress(o.executingQuote),this.slippageSettings,this.supportedCustomSimulationToastErrorTypes));break;case"transactionSubmissionFailed":case"transactionConfirmationFailed":CT({title:`${R.t("swapTxConfirmationSwapFailed")} ${s.data.symbol} \u2192 ${c.data.symbol}`,message:R.t("swapTxConfirmationSwapFailedUnknownError"),onPress:()=>{this.handleRetryPress(o.executingQuote)},buttonText:R.t("commandRetry")});break}}handleRetryPress(e){vt.getState().hideToast(),this.retryAndNavigateToSwapper(e)}};function G0(t){vt.getState().progress({message:t,onPress:()=>{vt.getState().hideToast()}})}function K0(t,e){vt.getState().success({id:"swap-success",message:t,onPress:()=>{vt.getState().hideToast(),e()}})}function CT(t){vt.getState().failed(t)}var $0={parseTransactionConfirmed(t,e,r){return de(r)?R.t("swapBridgeInitiatedToast",{sellSymbol:t.data.symbol,sellChain:t.data.chain.name,buySymbol:e.data.symbol,buyChain:e.data.chain.name,estimatedTime:Sa(r)}):R.t("swapSwappedToast",{sellSymbol:t.data.symbol,buySymbol:e.data.symbol})}};var bp=class{intercept(e){let{swapper:r,connection:o,storage:n,vaultProxy:s,locale:c,analytics:u,resetSwapper:p,queryClient:l,showFungibleDetails:d,showBuyFungibleScreen:g,swapAnalytics:y,gasEstimation:S,slippageSettings:h,supportedCustomSimulationToastErrorTypes:w,navigateToSwapper:b,storePairs:T,isMobile:v}=e;if(!v||r.getAccount()?.type==="ledger")return"continue";let C=r.getState();if(C.type!=="quote")return"continue";let{quote:B,sell:G,buy:L}=C;return this.isSupportedQuote(B)?((async()=>{T(G,L);let z=await u.getDeviceId(),K=new ha(d,g,h,w,O=>{b(O)}),x=new fa(l),E=new da(y,u),F=new ga(u),Q=new ya;try{r.subscribeExecution(x),r.subscribeExecution(F),r.subscribeExecution(E),r.subscribeExecution(K),r.subscribeExecution(Q),await Promise.all([r.swap(s,n,c,z,o,S),p()])}catch{}finally{r.unsubscribeExecution(x),r.unsubscribeExecution(F),r.unsubscribeExecution(E),r.unsubscribeExecution(K),r.unsubscribeExecution(Q)}})(),"interrupt"):"continue"}isSupportedQuote(e){return Hr(e)||Ft(e)||jr(e)||de(e)}};i();a();i();a();var Ap=class{intercept({hasViewedAutoSlippageOptIn:e,selectedSetting:r,setHasViewedAutoSlippageOptIn:o,showOverlay:n}){return!e&&r!=="auto"?(n("autoSlippageOptIn"),o(!0),"interrupt"):"continue"}};i();a();var vp=class{intercept(){let{review:e}=xo();return e?$r(e):sn(),"continue"}};function kT(t,e,r){let o=[];return t&&o.push(new Ap),r&&o.push(new bp),e||o.push(new vp),o}i();a();var Tp=class{async fetch(e){return await Gu(e)}stopFetching(){}getFetchInterval(e){return e}};i();a();var xp=class{constructor(e){this.swapper=e}async fetch(e){let r=j0(e.amount,e.sell,e.buy);return this.swapper.setPair(e.buy,e.sell,r),await this.swapper.fetchQuotes({buy:e.buy,sell:e.sell,amount:r,slippageTolerance:e.slippageTolerance,autoSlippageEnabled:e.enableAutoSlippage,priorityFee:e.priorityFee})}stopFetching(){this.swapper.stopProcessingQuotes()}getFetchInterval(e){return e}};function j0(t,e,r){let o=t.type==="sell"?e:r;return{amount:new q(t.value).shiftedBy(-o.data.decimals).toString(),perspective:t.type}}i();a();var Ep=class{constructor(e,r){this.swapper=e;this.queryClient=r}queryKey;quoteProcessorListener={onStateChange:(e,r)=>{if(!this.queryKey){console.error("queryKey is not set");return}r.type==="quoteProcessed"&&this.queryClient.setQueryData(this.queryKey,r.response)}};async fetch(e,r){return this.queryKey=r,this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener),new Promise((o,n)=>{let s=z0(e.amount,e.sell,e.buy),c={onStateChange:(u,p)=>{switch(p.type){case"firstQuoteReceived":o(p.response),this.swapper.unsubscribeQuoteProcessor(c);break;case"error":n(p.error),this.swapper.unsubscribeQuoteProcessor(c),this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener);break}}};this.swapper.subscribeQuoteProcessor(this.quoteProcessorListener),this.swapper.subscribeQuoteProcessor(c),this.swapper.setPair(e.buy,e.sell,s),this.swapper.setAmount(s,{slippageTolerance:e.slippageTolerance,slippageType:e.enableAutoSlippage?"auto":"fixed",priorityFee:e.priorityFee})})}stopFetching(){this.swapper.getQuoteProcessorState().type!=="idle"&&(this.swapper.stopProcessingQuotes(),this.swapper.unsubscribeQuoteProcessor(this.quoteProcessorListener))}getFetchInterval(e){return!1}};function z0(t,e,r){let o=t.type==="sell"?e:r;return{amount:new q(t.value).shiftedBy(-o.data.decimals).toString(),perspective:t.type}}i();a();var Vf=k(D());var RT=()=>{let t=(0,Vf.useCallback)(()=>{$r()},[]),e=(0,Vf.useCallback)(()=>{sn()},[]);return{onSwapTabEnter:t,onSwapTabExit:e}};var DT=(0,Gt.createContext)(void 0),W0=({children:t})=>{let{data:[e,r,o,n,s,c]}=Se(["enable-auto-slippage","enable-swapper-skip-review","enable-swapper-toasts","enable-swapper-toasts-auto-slippage","enable-swapper-keypad-swap","enable-quote-streaming"]),u=(0,Gt.useMemo)(()=>e?["auto","fixed"]:["fixed"],[e]),p=(0,Gt.useMemo)(()=>n?["SLIPPAGE_EXCEEDED"]:[],[n]),l=(0,Gt.useMemo)(()=>kT(e,r,o),[e,r,o]),d=Kp,g=r,y=Rt(),S=ee(),h=(0,Gt.useMemo)(()=>c?new Ep(y,S):o&&ot?new xp(y):new Tp,[y,o,c,S]),{onSwapTabEnter:w,onSwapTabExit:b}=RT(),T=(0,Gt.useMemo)(()=>ot?_n("full"):_n("compactNoSymbol"),[]);return Gt.default.createElement(DT.Provider,{value:{slippageSettingTypes:u,reviewInterceptors:l,inspectorEnabled:d,showStickyCTAButton:g,getSwapQuotesStrategy:h,supportedCustomSimulationToastErrorTypes:p,showKeypadSwapButton:s,onSwapTabEnter:w,onSwapTabExit:b,balanceDisplayStrategy:T}},t)},Ip=()=>{let t=(0,Gt.useContext)(DT);if(!t)throw new Error("useSwapTab must be used within a SwapTabProvider");return t};i();a();var Z0=t=>eu.safeParse(t).success;i();a();var Lo=k(D());i();a();i();a();function _T(){return xo().review!==null?1:0}var NT=(0,Lo.createContext)(void 0),X0=({children:t})=>{let e=(0,Lo.useMemo)(()=>_T(),[]);return Lo.default.createElement(NT.Provider,{value:{infoRowDisplayStrategy:e}},t)},J0=()=>{let t=(0,Lo.useContext)(NT);if(!t)throw new Error("useSwapReview must be used within a SwapReviewProvider");return t};i();a();var Dt=k(D());i();a();i();a();var no=k(D());i();a();var BT=({networkID:t,txReceipt:e,preferredExplorers:r})=>{let o=e?.id??"";if(!o)return;let n=r?.explorers[t];return kg({networkID:t,endpoint:"transaction",explorerType:n,param:o})};i();a();function QT(t,e){if(e){let r=eQ(t),o=rQ(t,e),n=oQ(t,e);return{notEnoughSol:e.message==="NotEnoughSol",txErrorTitle:r,txErrorMessage:o,txErrorHelpButtonLink:n}}return{notEnoughSol:!1,txErrorTitle:"",txErrorMessage:"",txErrorHelpButtonLink:""}}var eQ=t=>t?R.t("swapTxBridgeFailed"):R.t("swapTxConfirmationSwapFailed"),tQ=t=>{switch(t.message){case"LedgerConnectionError":return R.t("swapTxConfirmationSwapFailedLedgerConnectionError");case"LedgerRejectAction":return R.t("swapTxConfirmationSwapFailedLedgerReject");case"LedgerUnknownSignError":return R.t("swapTxConfirmationSwapFailedLedgerSignError");case"LedgerUnknownError":return R.t("swapTxConfirmationSwapFailedLedgerError");default:return null}},rQ=(t,e)=>{let r=tQ(e);if(r!==null)return r;if(t)switch(e.message){case"slippageToleranceExceeded":return R.t("swapTxConfirmationSwapFailedSlippageLimit");default:return R.t("swapTxBridgeFailedDescription")}else switch(e.message){case"INSUFFICIENT_FUNDS":return R.t("swapTxConfirmationSwapFailedInsufficientBalance");case"slippageToleranceExceeded":return R.t("swapTxConfirmationSwapFailedSlippageLimit");case"EmptyRoute":return R.t("swapTxConfirmationSwapFailedEmptyRoute");case"AccountFrozen":return R.t("swapTxConfirmationSwapFailedAcountFrozen");case"SIMULATION_TIMEOUT":return R.t("swapTxConfirmationSwapFailedSimulationTimeout");case"INSUFFICIENT_GAS":return R.t("swapTxConfirmationSwapFailedInsufficientGas");case"Scan results are not valid":return R.t("swapTxConfirmationSwapFailedUnknownError");case"STALE_QUOTE":return R.t("swapTxConfirmationSwapFailedStaleQuote");case"SimulationUnknownError":return R.t("swapTxConfirmationSwapFailedSimulationUnknownError");default:return R.t("swapTxConfirmationSwapFailedTryAgain")}},oQ=(t,e)=>t?Yc:e.message==="AccountFrozen"?_b:Yc;i();a();var UT=({sellAmount:t,sellFungible:e,buyAmount:r,buyFungible:o,txStatus:n,txReceipt:s,swapTransactions:c,isReadyToExecute:u,uiEstimatedTime:p,isBridge:l,isLedger:d,notEnoughSol:g,txError:y,txErrorTitle:S,txErrorMessage:h,explorerUrl:w,txErrorHelpButtonLink:b,addressType:T})=>{let v=fe(t,e?.data.decimals??0).toNumber(),P=fe(r,o?.data.decimals??0).toNumber(),C=n==="success",B=n==="error",G=!!s,L=c?.transactions.length||0;return{sellAsset:{amount:v,symbol:e?.data.symbol??"",networkID:e?.data.chain.id??se.Solana.Mainnet},buyAsset:{amount:P,symbol:o?.data.symbol??"",networkID:o?.data.chain.id??se.Solana.Mainnet},estimatedTime:p,isBridge:l,isSuccess:C,isFailure:B,isLedger:d,isClosable:G,notEnoughSol:g,txError:y,txErrorTitle:S,txErrorMessage:y?.detailMessage?`${h}

${y?.detailMessage}`:h,txLink:w??"",txErrorHelpButtonLink:b,numberOfTransactions:L,isReadyToExecute:u,addressType:T}};var Gf=({sellFungible:t,txReceipt:e,swapTransactions:r,isBridge:o,txError:n,txStatus:s,isReadyToExecute:c,isLedger:u})=>{let p=t?.data.chain.id??se.Solana.Mainnet,{notEnoughSol:l,txErrorTitle:d,txErrorMessage:g,txErrorHelpButtonLink:y}=(0,no.useMemo)(()=>QT(o,n),[o,n]),S=(0,no.useMemo)(()=>I.getAddressType(p),[p]),{currentQuote:h}=ne(),[w]=(0,no.useState)(h),{buyAmount:b,sellAmount:T}=w??{buyAmount:"0",sellAmount:"0"},v=A(L=>L.buyFungible),{data:P}=Rg(),C=(0,no.useMemo)(()=>BT({txReceipt:e,networkID:p,preferredExplorers:P}),[e,p,P]),B=(0,no.useMemo)(()=>Sa(w),[w]);return(0,no.useCallback)(()=>UT({sellFungible:t,txReceipt:e,addressType:S,swapTransactions:r,isBridge:o,txError:n,sellAmount:T,buyAmount:b,buyFungible:v,txStatus:s,isReadyToExecute:c,uiEstimatedTime:B,isLedger:u,notEnoughSol:l,txErrorTitle:d,txErrorMessage:g,explorerUrl:C,txErrorHelpButtonLink:y}),[t,e,S,r,o,n,T,b,v,s,c,B,u,l,d,g,C,y])()};i();a();var Ws=k(D());var qn=()=>{let t=oe(),e=cn(),{currentQuote:r,quoteResponse:o,selectedProviderIndex:n,selectedBaseProvider:s}=ne(),{analyticsContext:c}=r??{analyticsContext:void 0},u=A(L=>L.buyFungible),p=A(L=>L.sellFungible),l=A(L=>L.buyUsdValue),d=A(L=>L.sellUsdValue),g=A(L=>L.swapFilter),{selectedSetting:y}=Be(),S=A.getState().amountType,h=p?.data.chain.id??se.Solana.Mainnet,w=Xt(),{transition:b}=zr(),T=(0,Ws.useCallback)(L=>{let z=Eo(n,y.type,o);return hp({buyToken:u,sellToken:p,buyAmount:r?.buyAmount.toString()??"",sellAmount:r?.sellAmount.toString()??"",phantomFeeUiAmount:w.phantomFee.amountUsd?.toString()??"",priceImpact:Uo(r),provider:_e(Me(r)),baseProvider:s,buyAssetUsdValue:l,sellAssetUsdValue:d,slippageTolerance:z,transactionId:L??"",slippageType:y.type,sellSwapFilter:g,analyticsContext:c})},[u,p,r,w.phantomFee.amountUsd,l,d,o,n,y.type,g,c,s]),v=(0,Ws.useCallback)(L=>{wp({txReceipt:L,networkID:h,amountType:S,swapAnalytics:e})},[h,S,e]),P=(0,Ws.useCallback)((L,z)=>{b({type:"transactionSubmissionFailed",error:L}),L.message!=="Scan results are not valid"&&L.message!=="slippageToleranceExceeded"&&U.captureError(L,"swapper");let K=T(z);t.capture("swapperSwapFailure",{data:{...K.data,error:L.message}})},[t,T,b]),C=()=>{t.capture("swapperSwapFailureNoSignature")},B=(0,Ws.useCallback)(L=>{let z=T(L.id);t.capture("swapperSwapSuccess",z);let K=co(L.networkID);U.addBreadcrumb("swapper","transactionStatus","info",{...K,txReceipt:L.id}),(K.chainType==="eip155"||K.chainType==="solana"||K.chainType==="sui")&&e.transactionStatus(L.id,{...K,status:{type:"confirmed"}})},[t,T,e]),G=(0,Ws.useCallback)((L,z)=>{let K=L?.networkID?co(L.networkID):null;(K?.chainType==="eip155"||K?.chainType==="solana"||K?.chainType==="sui")&&L?.id&&(U.addBreadcrumb("swapper","transactionStatus","error",{...K,txReceipt:L.id}),e.transactionStatus(L.id,{...K,status:{type:"error"}}),b({type:"transactionConfirmationFailed",error:z,txReceipt:L}))},[e,b]);return{logTransactionSubmitted:v,logTransactionSubmissionError:P,logSwapFailureNoSignature:C,logTransactionConfirmed:B,logTransactionConfirmationFailed:G}};i();a();var OT=k(D());i();a();var wa=()=>{let{selectedSetting:t}=Be(),{selectedProviderIndex:e,quoteResponse:r}=ne(),o=Eo(e,t.type,r),{data:n}=Io();return{slippageSetting:t,slippageTolerance:o??n??void 0}};i();a();i();a();var Pp=k(D());i();a();var Kf="swap-validation",LT=({scanResult:t,scanResultError:e,quote:r,sellToken:o,buyToken:n})=>{if(e)return"valid";if(!r||!o||!n)return U.addBreadcrumb(Kf,`Missing necessary args: ${JSON.stringify({quote:!!r,scanResult:!!t,sellToken:o,buyToken:n})}`,"info"),new Te("MissingArgument");if(t?.error===lr.SIMULATION_FAILED)return"valid";if(t?.error){if(U.addBreadcrumb(Kf,`Simulation error: ${JSON.stringify({error:t.error})}`,"info"),t.error===lr.SLIPPAGE_EXCEEDED)return new Te("slippageToleranceExceeded");if(t.error===lr.INSUFFICIENT_FUNDS)return new Te("INSUFFICIENT_FUNDS");if(t.error===lr.INSUFFICIENT_GAS)return new Te("INSUFFICIENT_GAS");if(t.error===lr.ACCOUNT_FROZEN)return new Te("AccountFrozen");if(t.error===lr.SIMULATION_TIMEOUT)return new Te("SIMULATION_TIMEOUT");if(t.error===lr.STALE_QUOTE)return new Te("STALE_QUOTE");if(t.error===lr.UNKNOWN_ERROR){let s=nQ(t);return new Te("SimulationUnknownError",s)}return new Te("Scan results are not valid")}return t?"valid":(U.addBreadcrumb(Kf,`Missing necessary args: ${JSON.stringify({quote:!!r,scanResult:!1,sellToken:o,buyToken:n})}`,"info"),new Te("MissingArgument"))};function nQ(t){return t.simulationError?t.simulationError.humanReadableError:t.warnings[0]?.message}var MT=({swapTransactions:t})=>{let e=A(w=>w.sellFungible),r=A(w=>w.buyFungible),o=e?.data.chain.id??se.Solana.Mainnet,{selectedSetting:n}=Be(),{currentQuote:s,quoteResponse:c}=ne(),u=_e(Me(s)),p=Oe(e?.data.chain.id,r?.data.chain.id),l=c?.buyToken?Y(c?.buyToken):void 0,d=c?.sellToken?Y(c?.sellToken):void 0,g={type:"transaction",userAccount:e?.data.walletAddress??"",params:void 0,url:"https://phantom.com",networkID:o,context:p?"bridge":"swap",provider:u,slippageType:n.type,metadata:{swapper:{quoteOutputAmount:s?.buyAmount,quoteOutputToken:l,quoteInputAmount:s?.sellAmount,quoteInputToken:d}}};t?.type==="evm"&&I.isEVMNetworkID(o)&&(g.params={transactions:t.transactions}),t?.type==="solana"&&I.isSolanaNetworkID(o)&&(g.params={transactions:t.transactions,method:"signAndSendTransaction",simulatorConfig:{decodeAccounts:!1}});let{transition:y}=zr(),S=(0,Pp.useCallback)((w,b)=>{b&&y({type:"simulationRequestError",error:b}),w&&y({type:"simulationResponseReceived",scannedTransactionResult:w})},[y]),h=qi(g,{disableRefetch:!0,onSettled:S,disabled:t?.type==="sui"});return(0,Pp.useMemo)(()=>{if(h.isLoading)return{isLoading:!0,state:"loading"};if(t?.type==="sui")return{isLoading:!1,state:"valid"};let w=LT({scanResult:h.data,scanResultError:h.isError,quote:s,sellToken:c?.sellToken,buyToken:c?.buyToken,simulationTolerance:c?.simulationTolerance});return{isLoading:h.isLoading,state:w}},[h,s,c,t?.type])};function qT({isBridge:t,addressType:e,isSwapSimulationDisabled:r,onTransactionReceiptReceived:o,onTransactionSubmissionError:n,resetToInitialState:s,sender:c}){let{logTransactionSubmitted:u,logSwapFailureNoSignature:p}=qn(),{connection:l}=ur(),{data:d}=he(),{currentQuote:g,quoteResponse:y}=ne(),{slippageTolerance:S}=wa(),h=A(x=>x.gasEstimation.estimateWithBuffer),w=A(x=>x.sellFungible),b=w?.data.chain.id??se.Solana.Mainnet,{data:T,isSuccess:v}=Sr({callerAddress:c,quote:g,sellFungible:w}),P=MT({swapTransactions:T}),{pendingActivityRows:C}=pT({sender:c}),{mutateAsync:B}=zd({accountIdentifier:d?.identifier??"",networkID:b}),[G,L]=(0,OT.useState)(!1),z=async()=>(L(!0),ST({isBridge:t,addressType:e,isSwapSimulationDisabled:r,sender:c,currentQuote:g,quoteResponse:y,gasEstimation:h,swapTransactions:T,scanResults:P,pendingActivityRows:C,connection:l,slippageTolerance:S,logSwapFailureNoSignature:p,logTransactionSubmitted:u,swapFungibles:B,onTransactionSubmissionError:n,onTransactionReceiptReceived:o,resetToInitialState:s}));return{isReadyToExecute:G||(!P.isLoading||r)&&v,executeSwap:z}}i();a();var Fp=k(D());var VT=({goToSwapTab:t,goToSwapReview:e,goToActivityTab:r})=>{let{resume:o}=zt(),{clearQuotes:n}=Hd(),s=Wr(),c=(0,Fp.useCallback)(()=>{o(),n(),t()},[t,o,n]),u=(0,Fp.useCallback)(()=>{o(),e()},[e,o]),p=(0,Fp.useCallback)(()=>{s(),r()},[r,s]);return{onClose:c,onRetry:u,onSwapSuccess:p}};i();a();function GT(){let{data:[t]}=Se(["kill-swapper-simulation"]);return t}i();a();var Zs=k(D());var KT=({onTransactionConfirmationSuccess:t,onTransactionConfirmationError:e,txReceipt:r})=>{let o=ee(),{data:n}=he(),s=(0,Zs.useMemo)(()=>n?.addresses??[],[n]),c=my(s),u=Wr(),{logTransactionConfirmed:p,logTransactionConfirmationFailed:l,logTransactionSubmissionError:d}=qn(),g=A(v=>v.sellFungible),{currentQuote:y}=ne(),{sellAmount:S}=y??{sellAmount:"0"},h=(0,Zs.useCallback)(async v=>{if(p(v),u(),g){let P=new j(g.data.amount),C=new j(S),B=P.minus(C).toString();Fu(o,{id:Os(g),amount:B})}c()},[p,u,S,g,c,o]),{isSuccess:w,isError:b,error:T}=uy(h,r);(0,Zs.useEffect)(()=>{if(w)t();else if(b){let v=Bo(T);e(v),l(r,v),d(v,r?.id)}},[w,b,T,r,l,t,e,d])};function $T({isLedger:t,goToSwapTab:e,goToSwapReview:r,goToActivityTab:o}){let{currentQuote:n}=ne(),s=A(_=>_.buyFungible),c=A(_=>_.sellFungible),u=Wr(),p=GT(),{logTransactionSubmissionError:l}=qn(),[d]=(0,Dt.useState)(Oe(c?.data.chain.id,s?.data.chain.id)),g=c?.data.chain.id??se.Solana.Mainnet,{data:y}=he(),S=(0,Dt.useMemo)(()=>y?.addresses??[],[y]),h=(0,Dt.useMemo)(()=>S.find(_=>_.networkID===c?.data.chain.id)?.address??"",[S,c]),w=(0,Dt.useMemo)(()=>I.getAddressType(g),[g]),{data:b}=Sr({callerAddress:h,quote:n,sellFungible:c}),[T,v]=(0,Dt.useState)(),[P,C]=(0,Dt.useState)("loading"),[B,G]=(0,Dt.useState)(),L=()=>{C("loading"),G(void 0),v(void 0)},z=_=>{v(_)},K=(0,Dt.useCallback)((_,ye)=>{C("error"),G(_),l(_,ye)},[l]),x=(0,Dt.useCallback)(()=>{C("success")},[]),E=(0,Dt.useCallback)(_=>{C("error"),G(Bo(_))},[]);KT({onTransactionConfirmationSuccess:x,onTransactionConfirmationError:E,txReceipt:P==="error"?void 0:T});let{executeSwap:F,isReadyToExecute:Q}=qT({isBridge:d,addressType:w,isSwapSimulationDisabled:p,onTransactionSubmissionError:K,onTransactionReceiptReceived:z,resetToInitialState:L,sender:h}),{onClose:O,onRetry:M,onSwapSuccess:N}=VT({goToSwapTab:e,goToSwapReview:r,goToActivityTab:o});return{...Gf({sellFungible:c,txReceipt:T,swapTransactions:b,isBridge:d,txStatus:P,isReadyToExecute:Q,isLedger:t,txError:B}),executeSwap:F,resetSwapper:u,onClose:O,onRetry:M,onSwapSuccess:N}}i();a();i();a();var HT=k(D()),jT=()=>{let{data:[t,e]}=Se(["enable-auto-slippage","enable-swapper-priority-fee-settings"]);return(0,HT.useMemo)(()=>t?e?"autoWithPriorityFees":"auto":"fixed",[t,e])};i();a();i();a();var zT=k(D());var sQ=()=>{let{data:[t]}=Se(["enable-swapper-toasts"]),e=Rt();return{selectQuote:(0,zT.useCallback)((o,n)=>{if(t){let s=o[n];s&&e.selectQuote(s)}},[t,e])}};i();a();i();a();i();a();i();a();var Ys=class t{constructor(e,r){this.tracer=r;this.name=e.name,this.context=e.context,this.marks=t.makeMarks(e.marks),this.derivedMarks=e.derivedMarks||[],this.onlyDev=e.onlyDev||!1}name;context;marks;derivedMarks;onlyDev;get markCount(){return this.marks.length+this.derivedMarks.length}getMark(e){return this.marks.find(r=>r.name===e)}qualify(e){return`${this.id}_${e}`}static makeMarks(e){return e.map(r=>typeof r=="string"?{name:r}:{name:r.name,metric:r.metric})}};i();a();var ba=class extends Ys{get id(){return`${this.context}_${this.name}`}startTrace(){Er()||this.tracer.startTrace(this,"start")}mark(e){Er()||this.tracer.mark(this,e)}};i();a();i();a();i();a();var Cp=class{nativeTimestamp;constructor(e){this.nativeTimestamp=e.nativeEvent.timeStamp}};var kp=class extends Ys{triggers;constructor(e,r){super(e,r),this.triggers=e.triggers}get id(){return`user_${this.context}_${this.name}`}startTrace(e,r){if(Er())return;let o=new Cp(r);this.tracer.startTrace(this,e,o.nativeTimestamp)}mark(e){Er()||this.tracer.mark(this,e)}markFrame(e){Er()||requestAnimationFrame(()=>{this.tracer.mark(this,e)})}};i();a();i();a();i();a();var Rp=class{constructor(e){this.cleanupOptions=e}cleanupInterval=null;lastActivityTimestamp=0;signalActive(){this.lastActivityTimestamp=performance.now(),this.ensureCleanup()}ensureCleanup(){this.cleanupInterval||(this.cleanupInterval=setInterval(()=>this.cleanupCycle(),this.cleanupOptions.cleanupIntervalMs))}cleanupCycle(){let{itemsRemaining:e}=this.runCleanup(),r=performance.now()-this.lastActivityTimestamp;e===0&&r>=this.cleanupOptions.maxAgeMs&&this.stopCleanup()}stopCleanup(){this.cleanupInterval&&(clearInterval(this.cleanupInterval),this.cleanupInterval=null)}};var Dp=class extends Rp{constructor(r){super({cleanupIntervalMs:10*60*1e3,maxAgeMs:4*60*1e3});this.perf=r}activeTraces=new Map;startTrace(r,o,n=this.perf.now()){let s=new $f(r,o,n);this.activeTraces.set(r.id,s),this.perf.mark(s.startMarkName,{timestamp:n}),this.signalActive()}mark(r,o){let n=this.activeTraces.get(r.id);if(!n||n.hasMark(o))return;let s=r.getMark(o);this.processMark(n,s),this.processDerivedMarks(n),n.numAddedMarks===r.markCount&&this.activeTraces.delete(r.id)}processMark(r,o){r.addMark(o.name);let n=r.operation.qualify(o.name);if(this.perf.mark(n),o.metric){let s=r.operation.qualify(o.metric),c=this.perf.measure(s,r.startMarkName,n);if(c===void 0){U.captureMessage(`[OperationTracer] Unexpected measure duration 'undefined' for mark ${n}, ignoring`,"performance","error");return}console.log(`[OperationTracer] Metric '${s}': ${c}ms (trigger: ${r.trigger})`)}}processDerivedMarks(r){r.operation.derivedMarks.forEach(o=>{if(r.hasMark(o.name))return;o.dependsOn.every(s=>r.hasMark(s))&&this.processMark(r,o)})}runCleanup(){let r=this.perf.now();for(let[o,n]of this.activeTraces)n&&r-n.startTime>this.cleanupOptions.maxAgeMs&&this.activeTraces.delete(o);return{itemsRemaining:this.activeTraces.size}}},$f=class{constructor(e,r,o){this.operation=e;this.trigger=r;this.startTime=o}marks=new Set;get numAddedMarks(){return this.marks.size}get startMarkName(){return this.operation.qualify(this.trigger)}addMark(e){this.marks.add(e)}hasMark(e){return this.marks.has(e)}};i();a();var _p=class{now(){return performance.now()}mark(e,r={timestamp:performance.now()}){performance.mark(e,{startTime:r.timestamp})}measure(e,r,o){try{let n=performance.measure(e,r,o).duration;return Math.round(n)}catch{return}}};var iQ=new _p,Hf=new Dp(iQ),Np=class t{static createOperation(e){return new ba(e,Hf)}static createUserOperation(e){return new kp(e,Hf)}static measureFunc(e,r,o={onlyDev:!1}){if(Er())return r();let n=new ba({name:e,context:"func",marks:[{name:"done",metric:"time"}]},Hf);n.startTrace();let s=r();return s&&typeof s.then=="function"?s.then(c=>(n.mark("done"),c)):(n.mark("done"),s)}static wrapFunc(e,r,o={onlyDev:!1}){return function(...n){return t.measureFunc(e,()=>r(...n),o)}}};var aQ=Np.createUserOperation({name:"switchTokens",context:"swapTab",triggers:["switchButtonClick"],marks:["sellTokenUpdated","buyTokenUpdated"],derivedMarks:[{name:"tokensSwitched",dependsOn:["sellTokenUpdated","buyTokenUpdated"],metric:"switchTime"}],onlyDev:!0});i();a();var YT=k(D());i();a();var WT=k(D());var cQ={status:!1,timestamp:""},ZT=()=>{let{data:t}=lt({key:"hasViewedAutoSlippageOptIn",queryKey:Ae.hasViewedAutoSlippageOptIn()}),{mutateAsync:e}=wt({key:"hasViewedAutoSlippageOptIn",queryKey:Ae.hasViewedAutoSlippageOptIn()}),r=(0,WT.useCallback)(o=>void e({status:o,timestamp:new Date().toISOString()}),[e]);return{viewedOptInState:t??cQ,setViewedOptInState:r}};var jf=()=>{let{viewedOptInState:t,setViewedOptInState:e}=ZT(),{selectedSetting:r}=Be(),{reviewInterceptors:o,supportedCustomSimulationToastErrorTypes:n}=Ip(),s=Rt(),{connection:c}=ur(),u=ue(),p=Yn(),l=R.language,d=oe(),g=Wr(),y=ee(),S=cn(),h=A(v=>v.gasEstimation.estimateWithBuffer),w=Be(),{storePairs:b}=Ut();return{executeInterceptors:(0,YT.useCallback)((v,P,C,B)=>{for(let G of o)if(G.intercept({hasViewedAutoSlippageOptIn:t.status,selectedSetting:r.type,setHasViewedAutoSlippageOptIn:e,showOverlay:v,swapper:s,connection:c,storage:u,vaultProxy:p,locale:l,analytics:d,resetSwapper:g,queryClient:y,showFungibleDetails:P,showBuyFungibleScreen:C,swapAnalytics:S,gasEstimation:h,slippageSettings:w,navigateToSwapper:B,supportedCustomSimulationToastErrorTypes:n,storePairs:b,isMobile:ot})==="interrupt")return"interrupt";return"continue"},[o,t.status,r.type,e,s,c,u,p,l,d,g,y,S,h,w,n,b])}};i();a();var qUe=Re(t=>({quoteSpan:void 0,previousBuyAmount:void 0,previousSellAmount:void 0,setQuoteSpan(e){t({quoteSpan:e})},setPreviousBuyAmount(e){t({previousBuyAmount:e})},setPreviousSellAmount(e){t({previousSellAmount:e})}}));i();a();var jUe=Re(t=>({initialLoadSpan:void 0,setInitialLoadSpan(e){t({initialLoadSpan:e})}}));i();a();var pQ=k(D());var JUe=["simulationRequestErrored","simulationFailed","transactionSubmissionFailed","transactionNotConfirmed"];i();a();var lQ=k(D());i();a();i();a();i();a();var Xs=class{constructor(e){this.analytics=e}swapperOpen(e){this.analytics.capture("swapperOpen",{data:{uiContext:"swapperInterstitial",swapMode:e.type}})}swapperClose(e){this.analytics.capture("swapperClose",{data:{uiContext:"swapperInterstitial",reason:e}})}swapperUpdateAsset(e,r){switch(e.type){case"sell":this.analytics.capture("swapperUpdateToAsset",{data:Cn(r)});break;case"buy":this.analytics.capture("swapperUpdateFromAsset",{data:Cn(r)});break}}swapperSwapDefaultQuoteSelected(e){this.analytics.capture("swapperSwapDefaultQuoteSelected",{data:{quotePercentageValue:e}})}swapperDetailPanelClicked(){this.analytics.capture("swapperDetailPanelClicked",{data:{uiContext:"swapperInterstitial"}})}swapperToggleQuoteCurrency(){this.analytics.capture("swapperToggleQuoteCurrency",{data:{uiContext:"swapperInterstitial"}})}};var zf=class{getNavigationParams({initiatingSwapMode:e,selectedToken:r,initialSwapAmount:o}){return{swapMode:{type:e.type,buyCaip19:e.type==="buy"?e.buyCaip19:Y($(r)),sellCaip19:e.type==="sell"?e.sellCaip19:Y($(r))},initialSwapAmount:o}}captureAnalytics(e,r,o){new Xs(e).swapperUpdateAsset(o,r)}},Wf=class{},mQ=new zf,dQ=new Wf;i();a();var Aa=k(D());var VLe=(0,Aa.createContext)(void 0);i();a();var Bp=k(D());var gQ=["enable","reject"],yQ=({continueSwap:t,dismiss:e})=>{let r=oe(),{setSlippageSetting:o}=Be(),n=(0,Bp.useCallback)(c=>{switch(e(),c){case"enable":r.capture("autoSlippageOptIn",{data:{step:"enabledAutoSlippage"}}),o({type:"auto"}),$r();break;case"reject":r.capture("autoSlippageOptIn",{data:{step:"rejectedAutoSlippage"}}),o({type:"fixed"}),t();break}},[t,e,o,r]),s=(0,Bp.useMemo)(()=>gQ.map(c=>({label:R.t(c==="enable"?"swapSlippageOptInEnableOption":"swapSlippageOptInRejectOption"),variant:c==="enable"?"primary":"secondary",onPress:()=>n(c)})),[n]);return{title:R.t("swapSlippageOptInTitle"),description:R.t("swapSlippageOptInSubtitle"),learnMoreText:R.t("commandLearnMore"),learnMoreUrl:Nu,options:s}};i();a();var JT=k(D());var SQ=({goToAssetSelect:t})=>{let{setSearchQuery:e}=A();return(0,JT.useCallback)(r=>{r==="buy"&&e(""),t(r)},[t,e])};i();a();var va=k(D());var ex="auto-provider-defaulted-to-toast",hQ=({showDefaultAutoProvider:t})=>{let{hasDefaultedToBestQuote:e}=ne(),{message:r,hideToast:o}=vt(),n=A(c=>c.setSelectedBaseProvider),s=(0,va.useRef)(e);(0,va.useEffect)(()=>{s.current=e},[e]),(0,va.useEffect)(()=>{e&&setTimeout(()=>{s.current&&(n(It),r({id:ex,message:R.t("swapProviderAutoUpdateTitle"),icon:"info",onPress:()=>{o(ex),t()}}))},2e3)},[e,r,o,t,n])};i();a();var tx=k(D());i();a();var Js=k(D());var wQ=j(1);function Qp(t,e,r){let o=oe(),[n,s]=(0,Js.useState)(!1),c=(0,Js.useCallback)(async()=>{await o.capture("swapperToggleBestPriceRatio",{data:{unitCurrency:n?"buy token":"sell token"}}),s(!n)},[o,n]),u=A(l=>l.sellFungible),p=A(l=>l.buyFungible);return(0,Js.useMemo)(()=>{let l=!1,d="";if(e&&r){let g=p?.data,y=u?.data;if(g&&y){let{buyAmount:S,sellAmount:h}=r,w=fe(S,g.decimals),b=fe(h,y.decimals),T=w.dividedBy(b),v=`1 ${y.symbol} \u2248 ${Un(T)} ${g.symbol}`,P=`1 ${g.symbol} \u2248 ${Un(wQ.dividedBy(T))} ${y.symbol}`;l=new j(r.buyAmount).isEqualTo(t),d=n?P:v}}return{isBestRate:l,rate:d,flip:c}},[t,r,n,e,u,p,c])}var bQ=({selectProvider:t})=>{let{currentQuote:e,quoteResponse:r}=ne(),{currencySymbol:o,fromUsd:n}=De(),s=e?.buyAmount??"",c=Qp(s,r,e),u=$s(Me(e)),p=e?.baseProvider.name??"";return{details:(0,tx.useMemo)(()=>e?de(e)?vQ({quote:e,selectProvider:t,exchangeRate:c,currencySymbol:o,fromUsd:n}):AQ({provider:p,sources:u,exchangeRate:c,selectProvider:t}):[],[e,p,u,c,t,o,n]),footnote:R.t("swapProviderPricingFootnote")}},AQ=({provider:t,sources:e,exchangeRate:r,selectProvider:o})=>[{label:R.t("swapProviderPricingProvider"),value:t,icon:"chevron-right",onPress:o},{label:R.t("swapProviderPricingMarket"),value:e},{label:R.t("swapProviderPricingPrice"),value:r.rate,icon:"swap",onPress:r.flip}],vQ=({quote:t,selectProvider:e,exchangeRate:r,currencySymbol:o,fromUsd:n})=>{let s=t.baseProvider.name,c=ea(t).toString(),u=Mt(oo(t));return[{label:R.t("swapProviderPricingProvider"),value:s,icon:"chevron-right",onPress:e},{label:R.t("swapProviderPricingPrice"),value:r.rate,icon:"swap",onPress:r.flip},{label:R.t("swapProviderPricingFees"),value:`${o}${n(Number(c),2)} ${R.t("swapProvidersFee")}`},{label:R.t("swapProviderPricingTime"),value:u}]};i();a();i();a();i();a();var ei=k(D());i();a();var Zf=k(D());i();a();var nx=k(D());i();a();function rx(t){if(t===void 0)return"#999";let e=parseFloat(t.toFixed(2));switch(!0){case e>=5:return"#EB3742";case(e>=1&&t<5):return"#FFDC62";case(t>=0&&t<1):return"#21E56F";default:return"#777777"}}i();a();function ox(t){if(t===void 0)return"-";switch(!0){case t>=1e3:return">1000%";case(t>=.01&&t<1e3):return`${t.toFixed(2)}%`;case(t>0&&t<.01):return"<0.01%";case t===0:return"0%";default:return"-"}}function Up(t){return(0,nx.useMemo)(()=>{let e="",r="";if(t===void 0)return;let o=t*100;return e=rx(o),r=ox(o),{color:e,text:r,percentage:o}},[t])}i();a();var Lp=({priceImpact:t,slippage:e,transferFees:r,shouldShowFees:o,shouldShowPriceImpact:n,shouldShowSlippage:s,isQuoteStreaming:c})=>{let u=c?EQ:xQ;return[...TQ({priceImpact:t,slippage:e,transferFees:r}),...u({shouldShowSlippage:s,shouldShowFees:o,shouldShowPriceImpact:n})]},TQ=({priceImpact:t,slippage:e,transferFees:r})=>{let o=[];return t&&t.percentage>ld&&o.push("highPriceImpact"),e&&e.percentage>=md&&o.push("highSlippage"),(r?.totalPercentFees??0)>0&&o.push("transferFees"),o},xQ=({shouldShowSlippage:t,shouldShowFees:e,shouldShowPriceImpact:r})=>{let o=[];return o.push("providerPressable"),o.push("exchangeRate"),t&&o.push("slippagePressable"),e&&o.push("fees"),r&&o.push("priceImpact"),o},EQ=({shouldShowSlippage:t,shouldShowFees:e,shouldShowPriceImpact:r})=>{let o=[];return o.push("pricing"),e&&o.push("fees"),r&&o.push("priceImpact"),t&&o.push("slippagePressable"),o};i();a();function Mp(t,e){let r="",o="";if(t===void 0)return;r=IQ(t);let n=e==="auto"?`${R.t("swapSlippageSettingsAuto")} \u2022 `:"";return o=PQ(t),{color:r,text:o,percentage:t,prefix:n}}function IQ(t){let e=parseFloat(t.toFixed(2));switch(!0){case e>2:return"#EB3742";case(e>=1&&t<=2):return"#FFDC62";default:return"#777777"}}function PQ(t){switch(!0){case t>=1e3:return">1000%";case(t>=.01&&t<1e3):return`${t.toFixed(2)}%`;case(t>0&&t<.01):return"<0.01%";case t===0:return"0%";default:return"-"}}var sx=()=>{let{currentQuote:t,quoteResponse:e}=ne(),r=Up(Uo(t)),{selectedSetting:o}=Be(),n=(0,Zf.useMemo)(()=>Mp(e?.slippageTolerance,o.type),[e?.slippageTolerance,o.type]),s=A(g=>g.sellFungible),c=A(g=>g.buyFungible),u=(0,Zf.useMemo)(()=>js([s,c]),[s,c]),{data:[p,l]}=Se(["enable-swapper-skip-review","enable-quote-streaming"]);return{logSwapHomeState:()=>{let g=Lp({priceImpact:r,slippage:n,transferFees:u,shouldShowFees:p,shouldShowPriceImpact:!!r&&p,shouldShowSlippage:!!n&&p,isQuoteStreaming:l}),y={slippage:JSON.stringify(n),priceImpact:JSON.stringify(r),rows:g};U.addBreadcrumb("swapper","swap-home","info",ao(y))}}};i();a();var ix=k(D());i();a();function Yf({sellFungible:t,totalFees:e,minRequiredBalance:r,currentQuote:o}){let n=t?.type?Ye(t?.type):!1,{source:s,destination:c}=r;if(n){let u=new q(o?.sellAmount??0);return e.plus(u)}else{let u=s.plus(c);return e.plus(u)}}var ax=()=>{let{currentQuote:t}=ne(),{totalFees:e}=Xt(),r=A(u=>u.sellFungible),o=A(u=>u.buyFungible),n=Dn(r),s=Rn({sellFungible:r,buyFungible:o});return(0,ix.useMemo)(()=>Yf({sellFungible:r,totalFees:e.maxAmount??e.amount,minRequiredBalance:{source:n,destination:s},currentQuote:t}),[r,e,n,s,t])};i();a();function Xf({sellFungible:t,sellNativeFungible:e,totalNativeRequirement:r}){let o=t?.data.chain.id,n=e?yt(e.data.amount,e.data.decimals):"-",s=e?yt(r,e.data.decimals):"-";return{networkId:o,balance:n,required:s}}i();a();function cx({quoteResponse:t,hasInsufficientBalance:e,insufficientBalanceArgs:r,isTermsAcknowledged:o,shouldSkipSwapReview:n,logSwapHomeState:s,goToInsufficientBalance:c,goToSwapTermsOfService:u,goToSwapReview:p,onSwap:l,executeInterceptors:d}){if(t)e?c(r):(s(),o?d()==="continue"&&(n?l():p()):u());else return}var Jf=({goToSwapTermsOfService:t,goToSwapReview:e,goToInsufficientBalance:r,goToConfirmation:o,showOverlay:n,showFungibleDetails:s,showBuyFungibleScreen:c,navigateToSwapper:u})=>{let{data:[p]}=Se(["enable-swapper-skip-review"]),{quoteResponse:l}=ne(),d=A(G=>G.sellFungible),g=d?.data.chain.id,{data:y}=Ks(),{logSwapHomeState:S}=sx(),{fungible:h}=pr({key:g?ui(g,void 0):void 0}),w=ax(),b=(0,ei.useMemo)(()=>new q(h?.data.amount??0).lt(w),[h,w]),T=(0,ei.useMemo)(()=>Xf({sellFungible:d,sellNativeFungible:h,totalNativeRequirement:w}),[d,h,w]),v=Yi({goToConfirmation:o}),{executeInterceptors:P}=jf(),C=(0,ei.useCallback)(()=>P(n,s,c,u),[P,n,s,c,u]);return{onClick:(0,ei.useCallback)(()=>cx({quoteResponse:l,hasInsufficientBalance:b,insufficientBalanceArgs:T,isTermsAcknowledged:y,shouldSkipSwapReview:p,logSwapHomeState:S,goToInsufficientBalance:r,goToSwapTermsOfService:t,goToSwapReview:e,onSwap:v,executeInterceptors:C}),[l,b,T,y,p,S,r,t,e,v,C])}};i();a();var Ta=k(D()),eg=k(Ji());i();a();i();a();var ux=({sellFungible:t,totalFees:e,transactionSpeedsToUnitCost:r,currentQuote:o,isBridge:n,minRequiredBalance:s,customPriorityFee:c})=>{let u=t?aa({sellFungible:t,totalFees:e.amount,transactionSpeedsToUnitCost:I.isEVMNetworkID(t.data.chain.id)?r:void 0,isBridge:n,minRequiredBalance:s,customPriorityFee:c}):"0",p=t?.data.decimals;return o?.sellAmount?new j(fe(o.sellAmount,p??0)).isLessThanOrEqualTo(new j(u)):!0};var px=({sellFungible:t,isFetchingQuote:e,quoteResponse:r,currentQuote:o,gasEstimation:n,maxGasEstimation:s,hasNoRoutes:c,totalFees:u,transactionSpeedsToUnitCost:p,isBridge:l,minRequiredBalance:d,shouldSkipSwapReview:g,numTransactions:y,customPriorityFee:S})=>{let h=ux({sellFungible:t,totalFees:u,transactionSpeedsToUnitCost:p,currentQuote:o,isBridge:l,minRequiredBalance:d,customPriorityFee:S});switch(CQ({quoteResponse:r,sellFungible:t,currentQuote:o,hasNoRoutes:c,hasEnoughAssets:h,isFetchingQuote:e,gasEstimation:n,maxGasEstimation:s,shouldSkipSwapReview:g,numTransactions:y})){case"notSwappable":return{title:R.t("swapReviewFlowActionButtonPrimary"),type:"secondary",disabled:!0};case"swappable":return{title:R.t("swapReviewFlowActionButtonPrimary"),type:"primary",disabled:!1};case"reviewable":return{title:R.t("swapFlowActionButtonText"),type:"primary",disabled:!1};case"notReviewable":return{title:R.t("swapFlowActionButtonText"),type:"secondary",disabled:!0};case"insufficientBalance":return{title:R.t("swapReviewInsufficientBalance"),type:"alert",disabled:!0};case"noRoutes":return{title:R.t("swapNoQuotesFound"),type:"secondary",disabled:!0}}},FQ=({sellFungible:t})=>{let e=t?.data.chain.id??se.Solana.Mainnet;return I.isEVMNetworkID(e)};function CQ({quoteResponse:t,sellFungible:e,currentQuote:r,hasNoRoutes:o,hasEnoughAssets:n,isFetchingQuote:s,gasEstimation:c,maxGasEstimation:u,shouldSkipSwapReview:p,numTransactions:l}){if(!n)return"insufficientBalance";if(o)return"noRoutes";let d=FQ({sellFungible:e}),g=!!(c&&(c??[]).length>=l&&(u??[]).length>=l);return!t||!e||!r||d&&!g||s?p?"notSwappable":"notReviewable":p?"swappable":"reviewable"}function kQ({goToInsufficientBalance:t,goToSwapReview:e,goToSwapTermsOfService:r,goToConfirmation:o,showOverlay:n,showFungibleDetails:s,showBuyFungibleScreen:c,navigateToSwapper:u}){let{currentQuote:p,isFetchingQuote:l,quoteResponse:d}=ne(),{data:[g]}=Se(["enable-swapper-skip-review"]),y=A(ke=>ke.hasNoRoutes),S=A(ke=>ke.sellFungible),h=S?.data.chain.id,{estimate:w,estimateWithBuffer:b}=A(ke=>ke.gasEstimation),T=A(ke=>ke.buyFungible),v=T?.data.chain.id,P=Oe(h,v),{totalFees:C}=Xt(),{data:B}=ai({networkID:h}),G=Dn(S),L=Rn({sellFungible:S,buyFungible:T}),z=A(ke=>ke.sellAmount),K=A(ke=>ke.setIsFetchingQuote),x=ks(),E=(0,eg.default)(x),F=(0,eg.default)(z);(0,Ta.useEffect)(()=>{z!==F&&z&&x&&E&&K(!0)},[z,F,K,x,E]);let{data:Q}=he(),O=(0,Ta.useMemo)(()=>Q?.addresses??[],[Q]),M=(0,Ta.useMemo)(()=>O.find(ke=>ke.networkID===S?.data.chain.id)?.address??"",[O,S]),{data:N}=Sr({callerAddress:M,quote:p,sellFungible:S}),{data:Z}=wr(),{title:_,type:ye,disabled:we}=px({sellFungible:S,currentQuote:p,quoteResponse:d,isFetchingQuote:l,isBridge:P,gasEstimation:w,maxGasEstimation:b,hasNoRoutes:y,totalFees:C,transactionSpeedsToUnitCost:B,minRequiredBalance:{source:G,destination:L},shouldSkipSwapReview:g,numTransactions:N?.transactions?.length??0,customPriorityFee:new j(Z??0).multipliedBy(10**9)}),{onClick:Ke}=Jf({goToInsufficientBalance:t,goToSwapReview:e,goToSwapTermsOfService:r,goToConfirmation:o,showOverlay:n,showFungibleDetails:s,showBuyFungibleScreen:c,navigateToSwapper:u});return{disabled:we,title:_,type:ye,onClick:Ke}}i();a();i();a();var xa=k(D());i();a();var lx=({buyNetwork:t,sellNetwork:e,executionDuration:r,priceImpact:o,slippage:n})=>{let s=[];return s.push("provider"),s.push("exchangeRate"),t&&e&&t!==e&&s.push("network"),n&&s.push("slippage"),s.push("fees"),r>0&&s.push("executionDuration"),o&&s.push("priceImpact"),s};function RQ({isSwapReview:t,showProviders:e,showSwapSettings:r,showSwapPricing:o}){let{bestBuyAmount:n,currentQuote:s,hasNoRoutes:c,quoteResponse:u,quotes:p,isFetchingQuote:l}=ne(),d=Qp(n,u,s),g=Up(Uo(s)),{slippageSetting:y,slippageTolerance:S}=wa(),h=(0,xa.useMemo)(()=>Mp(S,y.type),[S,y.type]),w=$s(Me(s)),b=oo(s),T=Mt(b),[v]=(0,xa.useState)(T),P=u?.sellToken?.chainId?I.getChainName(u.sellToken.chainId):void 0,C=u?.buyToken?.chainId?I.getChainName(u.buyToken.chainId):void 0,B=Xt(),G=If(B),L=A(N=>N.sellFungible),z=A(N=>N.buyFungible),K=(0,xa.useMemo)(()=>js([L,z]),[L,z]),{data:[x,E]}=Se(["enable-swapper-skip-review","enable-quote-streaming"]),F=!!B.phantomFee.pct&&(t||x),O={exchangeRate:d,priceImpact:g,slippage:h,provider:w,fees:B,executionDuration:b,uiEstimatedTime:v,isFetchingQuote:l,sellNetwork:P,buyNetwork:C,feeBreakdown:G,selectProviderEnabled:!t&&!!w,isSwapReview:t,showProviders:e,showSwapSettings:r,showSwapPricing:o,transferFees:K},M=t?lx({exchangeRate:d,priceImpact:g,slippage:h,buyNetwork:C,sellNetwork:P,executionDuration:b}):Lp({priceImpact:g,slippage:h,transferFees:K,shouldShowFees:x,shouldShowPriceImpact:!!g&&x,shouldShowSlippage:!!h&&x,isQuoteStreaming:E});return{exchangeRate:d,hasNoRoutes:c,priceImpact:g,slippage:h,provider:w,fees:B,nrOfQuotes:p.length,executionDuration:b,isFetchingQuote:l,sellNetwork:P,buyNetwork:C,rows:M,sharedRowProps:O,displayPhantomFeeRow:F}}i();a();var Vn=k(D());i();a();i();a();var Op=class{getRow({quote:e,buyToken:r}){let o=`${Tt(fe(e.buyAmount,r.decimals),Cr.get(r.networkId).formDisplayPrecision)} ${r.symbol}`;return{type:"standard",key:e.baseProvider.id,logoUri:e.baseProvider.logoUri,topLeft:{text:e.baseProvider.name,color:"textPrimary",font:"body"},topRight:{text:o,color:"textSecondary",font:"body"}}}getAutoRow(){return{type:"standard",key:It,topLeft:{text:R.t("selectSwapProviderAutoLabel"),color:"textPrimary",font:"body"},topRight:{text:R.t("selectSwapProviderAutoDescription"),color:"textSecondary",font:"body"}}}},tg=class extends Op{getRow(e){let{quote:r,currencySymbol:o,fromUsd:n}=e;if(!de(r))throw new Error("Quote is not a bridge quote");let s=super.getRow(e),c=Mt(oo(r)),u=ea(r).toString();return{...s,type:"bridge",bottomLeft:{text:c,color:"textSecondary",font:"caption"},bottomRight:{text:`${o}${n(Number(u),2)} ${R.t("swapProvidersFee")}`,color:"textSecondary",font:"caption"}}}getAutoRow(){return{type:"bridge",key:It,topLeft:{text:R.t("selectSwapProviderAutoLabel"),color:"textPrimary",font:"body"},topRight:{text:R.t("selectSwapProviderAutoDescription"),color:"textSecondary",font:"body"},bottomLeft:{text:R.t("selectSwapProviderAutoTBD"),color:"textSecondary",font:"caption"},bottomRight:{text:R.t("selectSwapProviderAutoTBD"),color:"textSecondary",font:"caption"}}}},rg=new Op,og=new tg;var ng=({quoteResponse:t,buyToken:e,currencySymbol:r,setSelectedProvider:o,fromUsd:n})=>{let s=t.type==="xchain",c=s?og.getAutoRow():rg.getAutoRow(),u={...c,onPress:()=>o(c.key)},p=t.quotes.reduce((l,d)=>{let y=(s?og:rg).getRow({quote:d,buyToken:e,currencySymbol:r,fromUsd:n});return[...l,{...y,onPress:()=>o(d.baseProvider.id)}]},[]);return[u,...p]};var DQ=({dismiss:t})=>{let{fromUsd:e,currencySymbol:r}=De(),o=oe(),n=A(S=>S.quoteResponse),s=A(S=>S.buyFungible),c=A(S=>S.selectedBaseProvider),u=A(S=>S.setSelectedBaseProvider),[p,l]=(0,Vn.useState)(c),d=(0,Vn.useMemo)(()=>!n||!s?[]:ng({quoteResponse:n,buyToken:{networkId:s.data.chain.id,decimals:s.data.decimals,symbol:s.data.symbol??""},currencySymbol:r,setSelectedProvider:l,fromUsd:e}),[n,s,r,e,l]),g=(0,Vn.useCallback)(()=>{u(p),o.capture("swapperProviderSelected",{data:{provider:p}}),t()},[p,u,t,o]),y=(0,Vn.useMemo)(()=>[{theme:"secondary",disabled:!1,label:R.t("commandCancel"),onPress:t},{theme:"primary",disabled:p===c,label:R.t("commandApply"),onPress:g}],[g,t,p,c]);return{selectedProvider:p,rows:d,buttons:y}};i();a();var qp=k(D());i();a();var Vp=k(D());i();a();var QQ=k(D());i();a();var NQ=k(D());i();a();var mx=k(D());i();a();i();a();i();a();i();a();var _Q=k(D());i();a();i();a();var UQ=k(D());i();a();var LQ=k(D());i();a();i();a();var ti=xt(new Pa);function sg(){return sg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},sg.apply(this,arguments)}m.NODE_ENV!=="production"&&(ti.debugPrivate=!0);var MQ=(t,e,r)=>t?.suspense&&OQ(e,r),OQ=(t,e)=>t.isPending&&!e,qQ=({result:t,throwOnError:e,query:r})=>t.isError&&!t.isFetching&&VQ(e,[t.error,r]);function VQ(t,e){return typeof t=="function"?t(...e):!!t}var GQ=t=>t.suspense&&typeof t.staleTime!="number"?sg({},t,{staleTime:1e3}):t;function dx(t,e,r=o=>o(ti)){let o=xt(0),n=xt(r);m.NODE_ENV!=="production"&&(n.debugPrivate=!0);let s=xt(()=>new WeakMap);m.NODE_ENV!=="production"&&(s.debugPrivate=!0);let c=xt(l=>{let d=l(n),g=t(l),y=d.defaultQueryOptions(g),S=l(s).get(d);return y._optimisticResults="optimistic",S&&S.setOptions(y,{listeners:!1}),GQ(y)});m.NODE_ENV!=="production"&&(c.debugPrivate=!0);let u=xt(l=>{let d=l(n),g=l(c),y=l(s),S=y.get(d);if(S)return S;let h=new e(d,g);return y.set(d,h),h});m.NODE_ENV!=="production"&&(u.debugPrivate=!0);let p=xt(l=>{let d=l(u),g=l(c),y=d.getOptimisticResult(g),S=xt(y);return m.NODE_ENV!=="production"&&(S.debugPrivate=!0),S.onMount=h=>{let w=d.subscribe(Hn.batchCalls(h));return()=>{d.getCurrentResult().isError&&d.getCurrentQuery().reset(),w()}},S});return m.NODE_ENV!=="production"&&(p.debugPrivate=!0),xt(l=>{l(o);let d=l(u),g=l(c),y=l(l(p));if(MQ(g,y,!1))return d.fetchOptimistic(g);if(qQ({result:y,query:d.getCurrentQuery(),throwOnError:g.throwOnError}))throw y.error;return y},(l,d)=>{d(o,g=>g+1)})}function U9e(t,e=r=>r(ti)){return dx(t,lg,e)}function L9e(t,e=r=>r(ti)){return dx(t,mg,e)}i();a();var G9e=Symbol((import.meta.env?import.meta.env.MODE:void 0)!=="production"?"RESET":"");function K9e(t,e){let r=null,o=new Map,n=new Set,s=u=>{let p;if(e===void 0)p=o.get(u);else for(let[d,g]of o)if(e(d,u)){p=g;break}if(p!==void 0)if(r?.(p[1],u))s.remove(u);else return p[0];let l=t(u);return o.set(u,[l,Date.now()]),c("CREATE",u,l),l};function c(u,p,l){for(let d of n)d({type:u,param:p,atom:l})}return s.unstable_listen=u=>(n.add(u),()=>{n.delete(u)}),s.getParams=()=>o.keys(),s.remove=u=>{if(e===void 0){if(!o.has(u))return;let[p]=o.get(u);o.delete(u),c("REMOVE",u,p)}else for(let[p,[l]]of o)if(e(p,u)){o.delete(p),c("REMOVE",p,l);break}},s.setShouldRemove=u=>{if(r=u,!!r)for(let[p,[l,d]]of o)r(d,p)&&(o.delete(p),c("REMOVE",p,l))},s}var ig=(t,e,r)=>(e.has(r)?e:e.set(r,t())).get(r),KQ=new WeakMap,$Q=(t,e,r,o)=>{let n=ig(()=>new WeakMap,KQ,e),s=ig(()=>new WeakMap,n,r);return ig(t,s,o)};function $9e(t,e,r=Object.is){return $Q(()=>{let o=Symbol(),n=([c,u])=>{if(u===o)return e(c);let p=e(c,u);return r(u,p)?u:p},s=xt(c=>{let u=c(s),p=c(t);return n([p,u])});return s.init=o,s},t,e,r)}var HQ=t=>typeof t?.then=="function";function jQ(t=()=>{try{return self.localStorage}catch(r){(import.meta.env?import.meta.env.MODE:void 0)!=="production"&&typeof self<"u"&&console.warn(r);return}},e){var r;let o,n,s={getItem:(p,l)=>{var d,g;let y=h=>{if(h=h||"",o!==h){try{n=JSON.parse(h,e?.reviver)}catch{return l}o=h}return n},S=(g=(d=t())==null?void 0:d.getItem(p))!=null?g:null;return HQ(S)?S.then(y):y(S)},setItem:(p,l)=>{var d;return(d=t())==null?void 0:d.setItem(p,JSON.stringify(l,e?.replacer))},removeItem:p=>{var l;return(l=t())==null?void 0:l.removeItem(p)}},c=p=>(l,d,g)=>p(l,y=>{let S;try{S=JSON.parse(y||"")}catch{S=g}d(S)}),u;try{u=(r=t())==null?void 0:r.subscribe}catch{}return!u&&typeof self<"u"&&typeof self.addEventListener=="function"&&self.Storage&&(u=(p,l)=>{if(!(t()instanceof self.Storage))return()=>{};let d=g=>{g.storageArea===t()&&g.key===p&&l(g.newValue)};return self.addEventListener("storage",d),()=>{self.removeEventListener("storage",d)}}),u&&(s.subscribe=c(u)),s}var H9e=jQ();i();a();var gx=k(D(),1);var fx=new WeakMap;function yx(t,e){let r=Ja(e),o=zQ(r);for(let[n,s]of t)(!o.has(n)||e?.dangerouslyForceHydrate)&&(o.add(n),r.set(n,s))}var zQ=t=>{let e=fx.get(t);return e||(e=new WeakSet,fx.set(t,e)),e};var Gp=k(D());i();a();var tr=()=>!0,Sx={tokens:tr,prices:ay,collectibles:dy,currency:Qg,staking:gy,swapper:Ef,transferFungibleLoggingContext:tr,user:Pg,[Ug]:tr,[bo]:tr,[el]:tr,[yy]:tr,[hi]:tr,[dr]:tr,"infinite-tokens":tr,"token-transfers":tr,"portfolio-value":tr,"test-debug-query":Ia},hx=t=>{if(t.queryKey.length===0||t.state.status!=="success")return!1;let e=String(t.queryKey[0]);return Sx[e]?Sx[e](t):!1};var wx=new Pa({defaultOptions:{mutations:{retry:!1,networkMode:"offlineFirst"},queries:{retry:!1,staleTime:1/0,gcTime:1/0,refetchOnWindowFocus:!1,networkMode:"offlineFirst"}}}),WQ=ug({underlyingStorage:new ry,throttleMs:1e3,enableDebugLogs:Ia()}),ZQ=({children:t})=>(yx([[ti,wx]]),t),T2e=t=>Gp.default.createElement(dg,{client:wx,persistOptions:{persister:WQ,dehydrateOptions:{shouldDehydrateQuery:hx},buster:YQ,maxAge:1/0}},Gp.default.createElement(Jy,null,Gp.default.createElement(ZQ,null,t.children))),YQ="25.2.0";i();a();var XQ=(_=>(_.HasOnboarded="hasOnboarded",_.ResetHasOnboarded="resetHasOnboarded",_.LockExtension="lockExtension",_.UnlockExtension="unlockExtension",_.IsExtensionUnlocked="IsExtensionUnlocked",_.SetPassword="setPassword",_.VerifyPassword="verifyPassword",_.UpdatePassword="updatePassword",_.ImportPrivateKeyAccount="importPrivateKeyAccount",_.ImportReadOnlyAccount="importReadOnlyAccount",_.ImportSeedAccount="importSeedAccount",_.ImportSeedlessAccount="importSocialSeedAccount",_.IsExistingSeed="isExistingSeed",_.AddAccountForSeed="addAccountForSeed",_.AddAccountForSeedless="addAccountForSeedless",_.AddLedgerAccounts="addLedgerAccounts",_.DeriveAddresses="deriveAddresses",_.ExportPrivateKey="exportPrivateKey",_.ExportEntropy="exportEntropy",_.SetAccountIcon="setAccountIcon",_.RemoveAccount="removeAccount",_.ReorderAccount="reorderAccount",_.GetAllAccounts="getAllAccounts",_.GetAllSeeds="getAllSeeds",_.GetAllSeedless="getAllSeedlessSeeds",_.GetAuthenticationPublicKey="getAuthenticationPublicKey",_.Sign="sign",_.SyncAccounts="syncAccounts",_.CheckVaultIntegrity="checkVaultIntegrity",_.LogMessage="logMessage",_.DownloadLogs="downloadLogs",_.ProviderInjectionOptions="providerInjectionOptions",_.ServiceWorkerMutexAcquire="serviceWorkerMutexAcquire",_.ServiceWorkerMutexRelease="serviceWorkerMutexRelease",_))(XQ||{});export{rT as a,DAe as b,obe as c,Fx as d,jx as e,Mx as f,lr as g,Ox as h,Wa as i,Sl as j,Wx as k,Zx as l,hl as m,gi as n,xt as o,iE as p,tS as q,aE as r,ti as s,U9e as t,L9e as u,K9e as v,$9e as w,it as x,Zl as y,Ho as z,$l as A,lE as B,mE as C,dE as D,IS as E,bE as F,NS as G,Kk as H,jk as I,bm as J,MP as K,RF as L,Ti as M,fm as N,gm as O,ym as P,Ck as Q,kk as R,jm as S,qk as T,Xk as U,oR as V,iR as W,DR as X,_R as Y,AR as Z,Gr as _,ed as $,Qi as aa,NR as ba,db as ca,rn as da,BR as ea,xR as fa,ER as ga,ad as ha,CR as ia,It as ja,A as ka,Hd as la,ne as ma,To as na,gd as oa,ln as pa,zt as qa,OR as ra,qR as sa,qi as ta,SD as ua,Yi as va,ID as wa,PD as xa,MN as ya,WN as za,eB as Aa,CD as Ba,aB as Ca,ND as Da,If as Ea,Wr as Fa,Kd as Ga,uB as Ha,W_ as Ia,Z_ as Ja,J_ as Ka,fB as La,gB as Ma,eN as Na,yB as Oa,tN as Pa,GB as Qa,KB as Ra,$B as Sa,HB as Ta,jB as Ua,Ff as Va,Ks as Wa,Cf as Xa,SB as Ya,hB as Za,Rf as _a,AB as $a,ZB as ab,vB as bb,D0 as cb,vt as db,W0 as eb,Ip as fb,kQ as gb,Z0 as hb,aQ as ib,X0 as jb,J0 as kb,$T as lb,jT as mb,sQ as nb,RQ as ob,yQ as pb,SQ as qb,hQ as rb,DQ as sb,bQ as tb,hx as ub,wx as vb,T2e as wb,XQ as xb};
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
//# sourceMappingURL=chunk-3HK6ZC5T.js.map
